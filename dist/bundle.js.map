{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://licenta/./src/components/forms/entryForm.js","webpack://licenta/./src/components/forms/formUtils.js","webpack://licenta/./src/components/forms/goto.js","webpack://licenta/./src/components/forms/setForm.js","webpack://licenta/./src/components/menus/datepicker.js","webpack://licenta/./src/components/menus/editCategory.js","webpack://licenta/./src/components/menus/entryOptions.js","webpack://licenta/./src/components/menus/header.js","webpack://licenta/./src/components/menus/shortcutsModal.js","webpack://licenta/./src/components/menus/sidebarCategories.js","webpack://licenta/./src/components/menus/sidebarDatepicker.js","webpack://licenta/./src/components/menus/sidebarFooter.js","webpack://licenta/./src/components/menus/sidebarSubMenu.js","webpack://licenta/./src/components/toastPopups/toast.js","webpack://licenta/./src/components/views/dayview.js","webpack://licenta/./src/components/views/listview.js","webpack://licenta/./src/components/views/monthview.js","webpack://licenta/./src/components/views/weekview.js","webpack://licenta/./src/components/views/yearview.js","webpack://licenta/./src/config/appDefaults.js","webpack://licenta/./src/config/renderViews.js","webpack://licenta/./src/config/setViews.js","webpack://licenta/./src/context/appContext.js","webpack://licenta/./src/context/constants.js","webpack://licenta/./src/context/store.js","webpack://licenta/./src/factory/entries.js","webpack://licenta/./src/factory/queries.js","webpack://licenta/./src/locales/en.js","webpack://licenta/./src/locales/kbDefault.js","webpack://licenta/./src/utilities/dateutils.js","webpack://licenta/./src/utilities/dragutils.js","webpack://licenta/./src/utilities/helpers.js","webpack://licenta/./src/utilities/svgs.js","webpack://licenta/./src/utilities/timeutils.js","webpack://licenta/webpack/bootstrap","webpack://licenta/webpack/runtime/define property getters","webpack://licenta/webpack/runtime/hasOwnProperty shorthand","webpack://licenta/webpack/runtime/make namespace object","webpack://licenta/./src/index.js"],"sourcesContent":["// render methods\nimport setViews from \"../../config/setViews\";\nimport setDatepicker from \"../menus/datepicker\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport locales from \"../../locales/en\";\n\n// svgs\nimport { createCheckIcon } from \"../../utilities/svgs\";\n\n// popups confirmation\nimport createToast from \"../toastPopups/toast\";\n\n// event helpers\nimport {\n  getClosest,\n  placePopup,\n  throttle\n} from \"../../utilities/helpers\";\n\n// date / time helpers\nimport {\n  getDateForStore,\n  isBeforeDate,\n  isDate,\n  getDateFromAttribute,\n} from \"../../utilities/dateutils\";\n\n// main app sidebar\nconst sidebar = document.querySelector(\".sidebar\");\n// main app datepicker / overlay\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\n\n// form wrappers / overlay\nconst formOverlay = document.querySelector(\".form-overlay\");\nconst formModalOverlay = document.querySelector(\".form-modal-overlay\");\nconst entriesFormWrapper = document.querySelector(\".entries__form\");\nconst entriesFormHeader = document.querySelector(\".entries__form--header\")\nconst entriesForm = document.querySelector(\".entry-form\");\nconst entriesFormBody = document.querySelector(\".entries__form--body\");\n\n// title / description inputs\nconst titleInput = document.querySelector(\".form--body__title-input\");\nconst descriptionInput = document.querySelector(\".form--body__description-input\");\n\n// start date / time\n// end date / time\nconst startDateInput = document.querySelector(\".form--body-start__date\");\nconst endDateInput = document.querySelector(\".form--body-end__date\");\n\nconst startTimeInput = document.querySelector(\".form--body-start__time\");\nconst endTimeInput = document.querySelector(\".form--body-end__time\");\n\n// category modal\nconst categoryModal = document.querySelector(\".form--body__category-modal\");\nconst closeCategoryModalBtn = document.querySelector(\".close-options-floating__btn\");\nconst categoryModalIcon = document.querySelector(\".form--body__category-icon\");\nconst categoryModalWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\nconst selectedCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper-selection\");\nconst selectedCategoryColor = document.querySelector(\".form--body__category-modal--wrapper__color\");\nconst selectedCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\n\n// reset / save btns\nconst formSubmitButton = document.querySelector(\".form--footer__button-save\");\n\n\n\nexport default function setEntryForm(context, store, datepickerContext) {\n  let categories;\n  let activeCategories;\n  let currentComponent;\n  let [year, month, day] = [null, null, null];\n\n  function closetimepicker() {\n    const timep = document?.querySelector(\".timepicker\");\n    const timepoverlay = document?.querySelector(\".timepicker-overlay\");\n    const timepcontainer = document?.querySelector(\".timepicker-times__container\");\n    const activeTimeElement = document?.querySelector(\".active-form-time\");\n    if (timep) {\n      timep.scrollTo(0, 0);\n      timep.remove();\n      timepoverlay.remove();\n      timepoverlay.onclick = null;\n      timepcontainer.onclick = null;\n    }\n\n    if (activeTimeElement) {\n      activeTimeElement.classList.remove(\"active-form-time\");\n    }\n  }\n\n  function setEndDateToNextDay() {\n    const startCurrentDate = startDateInput.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\n    let nextDay = new Date(\n      startCurrentDate[0],\n      startCurrentDate[1],\n      startCurrentDate[2] + 1\n    );\n    let nextDayString = `${nextDay.getFullYear()}-${nextDay.getMonth()}-${nextDay.getDate()}`;\n    let nextDayTitle = locales.labels.monthsShort[nextDay.getMonth()] + \" \" + nextDay.getDate() + \", \" + nextDay.getFullYear();\n\n    endDateInput.setAttribute(\"data-form-date\", nextDayString);\n    endDateInput.textContent = nextDayTitle;\n    endTimeInput.setAttribute(\"data-form-time\", \"00:30\");\n    endTimeInput.textContent = \"12:30am\";\n  }\n\n  function setEndDateToNextHour() {\n    const startCurrentTime = startTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\n\n    let [newh, newm] = [\n      startCurrentTime[0] < 23 ? startCurrentTime[0] + 1 : 23,\n      startCurrentTime[0] < 23 ? startCurrentTime[1] : 45\n    ];\n\n    let nextHour = new Date(0, 0, 0, newh, newm);\n    let md = nextHour.getHours() > 12 ? \"pm\" : \"am\";\n\n    let nextHourString = `${nextHour.getHours()}:${nextHour.getMinutes()}`;\n    let nextHourTitle = `${+nextHour.getHours() % 12}:${+nextHour.getMinutes() == 0 ? \"00\" : nextHour.getMinutes()}${md}`;\n\n    endTimeInput.setAttribute(\"data-form-time\", nextHourString);\n    endTimeInput.textContent = nextHourTitle;\n  }\n\n  function createTimepicker(coords, currentTime, end, endLimit) {\n    const timepicker = document.createElement(\"div\");\n    timepicker.classList.add(\"timepicker\");\n    timepicker.style.top = `${coords.y}px`;\n    timepicker.style.left = `${coords.x}px`;\n\n    const timepickerOverlay = document.createElement(\"div\");\n    timepickerOverlay.classList.add(\"timepicker-overlay\");\n\n    const timepickerTimesContainer = document.createElement(\"div\");\n    timepickerTimesContainer.classList.add(\"timepicker-times__container\");\n\n    let hours = [\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\n      12, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11,\n    ];\n    let md = [\n      'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am', 'am',\n      'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm', 'pm',\n    ];\n\n    let minutes = [\"00\", \"15\", \"30\", \"45\"];\n\n    let [currenthour, currentmin] = currentTime.split(\":\").map((x) => {\n      return parseInt(x);\n    });\n\n    let currentmd = currenthour > 12 ? \"pm\" : \"am\";\n\n    let isSameDay = startDateInput.getAttribute(\"data-form-date\") === endDateInput.getAttribute(\"data-form-date\");\n    let shouldTestReset = false;\n\n    if (end && currenthour === 23 && currentmin === 45) {\n      shouldTestReset = true;\n    }\n\n    currenthour > 12 ? currenthour -= 12 : currenthour;\n\n    if (endLimit !== null && isSameDay) {\n      let [h, m] = endLimit.split(\":\").map(x => parseInt(x));\n      if (shouldTestReset) {\n        if (h === 23 && m >= 15) {\n          setEndDateToNextDay();\n          closetimepicker();\n          return;\n        }\n      }\n\n      if (h === 23) {\n        if (m === 45) {\n          setEndDateToNextDay();\n        } else {\n          hours = [12];\n          md = ['pm'];\n          m = m.slice(-1);\n        }\n      } else {\n        hours = hours.slice(+h + 1, hours.length);\n        md = md.slice(+h + 1, md.length);\n      }\n    }\n\n    let count = 0;\n    let si;\n    hours.forEach((hour, houridx) => {\n      minutes.forEach(min => {\n        const timepickerTime = document.createElement(\"div\");\n        timepickerTime.classList.add(\"timepicker-time\");\n        let attr;\n        if (md[houridx] === \"am\") {\n          if (+hour === 12) {\n            attr = `00:${min}`;\n          } else {\n            attr = `${hour}:${min}`;\n          }\n        } else if (md[houridx] === \"pm\") {\n          if (hour === 12) {\n            attr = `12:${min}`;\n          } else {\n            attr = `${hour + 12}:${min}`;\n          }\n        }\n\n        timepickerTime.setAttribute(\"data-tp-time\", attr);\n        timepickerTime.textContent = `${hour}:${min}${md[houridx]}`;\n        count++;\n\n        if (!end) {\n          if (+hour == +currenthour && +min == +currentmin) {\n            if (currentmd === \"pm\" && md[houridx] === \"pm\") {\n              timepickerTime.classList.add(\"timepicker-time--selected\");\n              si = count;\n            } else if (currentmd === \"am\" && md[houridx] === \"am\") {\n              timepickerTime.classList.add(\"timepicker-time--selected\");\n              si = count;\n            }\n          }\n        }\n\n        timepickerTimesContainer.appendChild(timepickerTime);\n      });\n    });\n\n\n    function setnewtime(e) {\n      const time = e.target.textContent;\n      let attr = e.target.getAttribute(\"data-tp-time\");\n\n      if (!end) {\n        startTimeInput.textContent = time;\n        startTimeInput.setAttribute(\"data-form-time\", attr);\n\n        let [testhour, testminute] = attr.split(\":\").map(x => +x);\n        let [endTestHour, endTestMinute] = endTimeInput.getAttribute(\"data-form-time\").split(\":\").map(x => parseInt(x));\n\n        if (isSameDay) {\n          if (testhour === 23 && testminute === 45) {\n            setEndDateToNextDay();\n          } else {\n            if (testhour > endTestHour || (testhour === endTestHour && testminute >= endTestMinute)) {\n              setEndDateToNextHour();\n            }\n          }\n        }\n      } else {\n        endTimeInput.textContent = time;\n        endTimeInput.setAttribute(\"data-form-time\", attr);\n      }\n      closetimepicker();\n    }\n\n    const delegateNewTime = (e) => {\n      if (getClosest(e, \".timepicker-time\")) {\n        setnewtime(e);\n        return;\n      }\n    };\n\n    timepicker.appendChild(timepickerTimesContainer);\n    const [x, y] = coords;\n    timepicker.setAttribute(\"style\", `top:${y}px; left:${x}px;`);\n    document.body.prepend(timepickerOverlay, timepicker);\n    timepickerOverlay.onclick = closetimepicker;\n    timepickerTimesContainer.onclick = delegateNewTime;\n    if (!end) {\n      if (si > 0) {\n        timepicker.scrollTo(0, parseInt(si * 40) - 40);\n      } else {\n        timepicker.scrollTo(0, 0);\n      }\n    } else {\n      timepicker.scrollTo(0, 0);\n    }\n  }\n\n  function renderSidebarDatepickerForm() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      context.setDateSelected(day);\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function getDatePicker(year, month, day) {\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\n    datepicker.classList.remove(\"hide-datepicker\");\n    store.addActiveOverlay(\"hide-datepicker-overlay\");\n    datepickerContext.setDate(year, month, day);\n    datepickerContext.setDateSelected(day);\n    setDatepicker(context, store, datepickerContext, \"form\");\n  }\n\n  function handleSetDate(e, type) {\n    e.preventDefault();\n    if (type === \"start\") {\n      startDateInput.setAttribute(\"class\", \"form--body-start__date active-form-date\");\n      endDateInput.setAttribute(\"class\", \"form--body-end__date inactive-form-date\");\n    } else {\n      startDateInput.setAttribute(\"class\", \"form--body-start__date inactive-form-date\");\n      endDateInput.setAttribute(\"class\", \"form--body-end__date active-form-date\");\n    }\n\n    const [y, m, d] = getDateFromAttribute(e.target, \"data-form-date\");\n    const rect = e.target.getBoundingClientRect();\n    const datepickerLeft = parseInt(rect.left);\n    const bott = parseInt(rect.bottom);\n    let datepickerTop = parseInt(rect.top);\n\n    if (type === \"end\") {\n      datepickerTop -= 40;\n    }\n\n    if (window.innerHeight - 216 <= bott) {\n      datepickerTop = window.innerHeight - 242;\n    }\n\n    datepicker.setAttribute(\"style\", `top:${datepickerTop}px;left:${datepickerLeft}px;`);\n    getDatePicker(y, m, d);\n  }\n\n  function getDateFormatViaAttr(dateAttr) {\n    const [year, month, day] = dateAttr.split(\"-\").map(x => parseInt(x));\n    return new Date(year, month, day);\n  }\n\n  function getTimeFormatViaAttr(timeAttr) {\n    return timeAttr.split(\":\").map(x => parseInt(x));\n  }\n\n  function getDateTimeFormatted(dateAttr, timeAttr) {\n    dateAttr.setHours(timeAttr[0]);\n    dateAttr.setMinutes(timeAttr[1]);\n    dateAttr.setSeconds(0);\n    return dateAttr;\n  }\n\n  function configDatesForStore() {\n    let startDateAttr = startDateInput.getAttribute(\"data-form-date\");\n    let startDate = getDateFormatViaAttr(startDateAttr);\n    let startTimeAttr = startTimeInput.getAttribute(\"data-form-time\");\n    let [starthour, startminute] = getTimeFormatViaAttr(startTimeAttr);\n\n    let endDateAttr = endDateInput.getAttribute(\"data-form-date\");\n    let endDate = getDateFormatViaAttr(endDateAttr);\n    let endTimeAttr = endTimeInput.getAttribute(\"data-form-time\");\n    let [endhour, endminute] = getTimeFormatViaAttr(endTimeAttr);\n\n    return [\n      getDateTimeFormatted(startDate, [starthour, startminute]),\n      getDateTimeFormatted(endDate, [endhour, endminute])\n    ];\n  }\n\n  function checkFormValidity(title, description, category, startDate, endDate) {\n   const status = {\n      title: true,\n      description: true,\n      startDate: true,\n      endDate: true,\n      valid: true,\n    };\n    \n\n\n    if (typeof title === \"string\") {\n      const titlecheck = title.trim().replace(/[^a-zA-Z0-9\\s_-]+|\\s{2,}/g, ' ');\n      if (titlecheck.length > 50) {\n        status.title = \"Title must be Less than 50 characters\";\n        status.valid = false;\n      } else if (titlecheck.length === 0) {\n        status.title = \"Title cannot be empty\";\n        status.valid = false;\n      }\n    } else {\n      status.title = \"Title cannot be empty\";\n    }\n    /* ***************************** */\n    /*  DESCRIPTION VALIDATION CHECK */\n    if (description.length >= 200) {\n      status.description = \"Description must be less than 200 characters\";\n      status.valid = false;\n    }\n    /* ************************** */\n    /*  CATEGORY VALIDATION CHECK */\n    if (!store.hasCtg(category) || !category) {\n      categoryModalWrapper.setAttribute(\"data-form-category\", \"default\");\n    }\n    /* **************************** */\n    /*  START DATE VALIDATION CHECK */\n    if (!startDate) {\n      status.startDate = \"Start date cannot be empty\";\n      status.valid = false;\n    } else if (!isDate(startDate)) {\n      status.startDate = \"Start date is not valid\";\n      status.valid = false;\n    }\n    /* **************************** */\n    /*  END DATE VALIDATION CHECK */\n    if (!endDate) {\n      status.endDate = \"End date cannot be empty\";\n      status.valid = false;\n    } else if (!isDate(endDate)) {\n      status.endDate = \"End date is not valid\";\n      status.valid = false;\n    } else if (!isBeforeDate(startDate, endDate)) {\n      status.endDate = \"End date must be after start date\";\n      status.valid = false;\n    }\n    /* ************* */\n    /*  congregate any errors  */\n    let errors = {};\n    let hasErrors;\n    for (let key in status) {\n      if (status[key] !== true) {\n        errors[key] = status[key];\n        hasErrors = true;\n      }\n    }\n\n    if (hasErrors) {\n      return errors;\n    } else {\n      return true;\n    }\n  }\n\n  function removeErrorMessages(e) {\n    if (e.target.classList.contains(\"form-input-error\")) {\n      e.preventDefault();\n      e.target.classList.remove(\"form-input-error\");\n      e.target.removeAttribute(\"data-form-error-message\");\n      e.target.firstElementChild.focus();\n    } else if (e.target.classList.contains(\"form-input-error__custom-input\")) {\n      e.target.classList.remove(\"form-input-error__custom-input\");\n      e.target.removeAttribute(\"data-form-error-message\");\n      e.target.focus();\n    } else {\n      return;\n    }\n  }\n\n  function handleFormErrors(errorMessages) {\n    titleInput.blur();\n\n    const components = {\n      title: titleInput,\n      description: descriptionInput,\n      startDate: startDateInput,\n      endDate: endDateInput,\n    };\n    const err = {\n      inputAttr: \"data-form-error-message\",\n      inputClass: \"form-input-error\",\n      svgClass: \"form-input-error__custom-input\",\n      submitbtn: \"form-error__submit-btn\"\n    };\n\n    for (let key in errorMessages) {\n      if (components[key]) {\n        if (key === \"title\" || key === \"description\") {\n          components[key].parentElement.setAttribute(err.inputAttr, errorMessages[key]);\n          components[key].parentElement.classList.add(err.inputClass);\n        } else {\n          components[key].setAttribute(err.inputAttr, errorMessages[key]);\n          components[key].classList.add(err.svgClass);\n          const svg = components[key].parentElement.parentElement.firstElementChild.firstElementChild;\n          svg.style.fill = \"var(--red2)\";\n          setTimeout(() => { svg.style.fill = \"var(--white3)\"; }, 1000);\n        }\n      }\n    }\n\n    formSubmitButton.classList.add(err.submitbtn);\n    setTimeout(() => { formSubmitButton.classList.remove(err.submitbtn); }, 1000);\n  }\n\n  function removeLastFormEntry() {\n    store.removeLastEntry();\n    setViews(currentComponent, context, store, datepickerContext);\n  }\n\n  function undoLastFormEdit(id, entryBefore) {\n    const start = new Date(entryBefore.start);\n    store.updateEntry(\n      id,\n      {\n        category: entryBefore.category,\n        completed: entryBefore.completed,\n        description: entryBefore.description,\n        end: new Date(entryBefore.end),\n        id: id,\n        start: start,\n        title: entryBefore.title,\n      }\n    );\n\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\n    context.setDateSelected(start.getDate());\n    setViews(currentComponent, context, store, datepickerContext);\n  }\n\n  function clearAllErrors() {\n    const inputErrElements = document?.querySelectorAll(\".form-input-error\");\n    if (inputErrElements) {\n      inputErrElements.forEach((el) => {\n        el.classList.remove(\"form-input-error\");\n        el.removeAttribute(\"data-form-error-message\");\n      });\n    }\n  }\n\n  function handleFormClose(e) {\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\n      datepicker.classList.add(\"hide-datepicker\");\n      datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\n    }\n\n    clearAllErrors();\n\n    formOverlay.onclick = null;\n    entriesFormHeader.onmousedown = null;\n    entriesFormWrapper.onclick = null;\n    document.removeEventListener(\"keydown\", delegateFormKeyDown);\n    entriesFormWrapper.classList.add(\"hide-form\");\n    formOverlay.classList.add(\"hide-form-overlay\");\n    store.removeActiveOverlay(\"hide-datepicker-overlay\");\n    store.removeActiveOverlay(\"hide-form-overlay\");\n    entriesForm.reset();\n    descriptionInput.value = \"\";\n    titleInput.value = \"\";\n\n    if (categoryModalWrapper.classList.contains(\"category-modal-open\")) {\n      closeCategoryModal();\n    }\n\n    const resetCurrentView = store.getFormResetHandle(currentComponent);\n    if (resetCurrentView !== null) {\n      resetCurrentView();\n      store.setFormResetHandle(currentComponent, null);\n    } else {\n      return;\n    }\n  }\n\n  function handleSubmissionRender(start, type, id, entryBefore) {\n    context.setDate(start.getFullYear(), start.getMonth(), start.getDate());\n    context.setDateSelected(start.getDate());\n    setViews(currentComponent, context, store, datepickerContext);\n\n    if (store.getDayEntriesArray(context.getDate()).length <= 1) {\n      renderSidebarDatepickerForm();\n    }\n\n    handleFormClose();\n\n    if (type === \"create\") {\n      setTimeout(() => {\n        createToast(\"Event created\", removeLastFormEntry);\n      }, 4);\n    } else {\n  \n      const shouldCreateToast = store.compareEntries(\n        entryBefore,\n        store.getEntry(id)\n      );\n\n      if (!shouldCreateToast) {\n        const handleUndoLastEdit = () => {\n          undoLastFormEdit(id, entryBefore);\n        };\n        setTimeout(() => {\n          createToast(\"Event updated\", handleUndoLastEdit);\n        }, 4);\n      }\n    }\n  }\n\n  function handleFormSubmission(e) {\n    e.preventDefault();\n    const title = titleInput.value;\n    const description = descriptionInput.value;\n    const [startDate, endDate] = configDatesForStore();\n    const category = categoryModalWrapper.getAttribute(\"data-form-category\");\n\n    const validityStatus = checkFormValidity(\n      title, description, category, startDate, endDate,\n    );\n\n    if (validityStatus !== true) {\n      handleFormErrors(validityStatus);\n      return;\n    } else {\n      // submission : edit\n      if (formSubmitButton.getAttribute(\"data-form-action\") === \"edit\") {\n        const id = formSubmitButton.getAttribute(\"data-form-entry-id\");\n        const entryBefore = JSON.parse(JSON.stringify(store.getEntry(id)));\n\n        store.updateEntry(\n          id,\n          {\n            category: category,\n            completed: false,\n            description: description,\n            end: endDate,\n            id: id,\n            start: startDate,\n            title: title,\n          }\n        );\n\n        handleSubmissionRender(\n          startDate, 'edit', id, entryBefore\n        );\n        return;\n      } else {\n        // submission : create\n        store.createEntry(\n          category, false, description, endDate, startDate, title\n        );\n        handleSubmissionRender(\n          startDate, 'create', store.getLastEntryId(), null\n        );\n      }\n    }\n  }\n\n  function handleCategorySelection(e) {\n    const title = e.target.getAttribute(\"data-form-category-title\");\n    const color = e.target.getAttribute(\"data-form-category-color\");\n    categoryModalWrapper.setAttribute(\"data-form-category\", title);\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", color);\n\n    selectedCategoryWrapper.style.backgroundColor = color;\n    selectedCategoryColor.style.backgroundColor = color;\n    selectedCategoryTitle.textContent = title;\n    closeCategoryModal();\n  }\n\n  function closeCategoryModal() {\n    closeCategoryModalBtn.style.display = \"none\";\n    categoryModalWrapper.classList.remove(\"category-modal-open\");\n    categoryModal.classList.add(\"hide-form-category-modal\");\n    selectedCategoryWrapper.classList.remove(\"hide-form-category-selection\");\n    formModalOverlay.classList.add(\"hide-form-overlay\");\n    categoryModalWrapper.removeAttribute(\"style\");\n    categoryModal.innerText = \"\";\n  }\n\n  function createCategoryOptions(parent, categories) {\n    const currentCategory = categoryModalWrapper.getAttribute(\"data-form-category\");\n\n    categories.forEach(([key, value]) => {\n      const color = value.color;\n      const categoryWrapper = document.createElement(\"div\");\n      categoryWrapper.classList.add(\"category-modal--category\");\n      categoryWrapper.style.width = \"200px\";\n\n      categoryWrapper.style.backgroundColor = color;\n      categoryWrapper.setAttribute(\"data-form-category-title\", key);\n      categoryWrapper.setAttribute(\"data-form-category-color\", color);\n\n      const categoryDisplayColor = document.createElement(\"div\");\n      categoryDisplayColor.classList.add(\"category-modal--category-color\");\n      categoryDisplayColor.style.backgroundColor = color;\n\n      const categoryTitle = document.createElement(\"div\");\n      categoryTitle.classList.add(\"category-modal--category-title\");\n      categoryTitle.textContent = key;\n\n      if (key === currentCategory) {\n        const checkIcon = createCheckIcon(\"var(--white4)\");\n        const checkIconWrapper = document.createElement(\"div\");\n        checkIconWrapper.classList.add(\"category-modal--category-check\");\n        checkIconWrapper.appendChild(checkIcon);\n\n        categoryWrapper.append(\n          categoryDisplayColor,\n          categoryTitle,\n          checkIconWrapper\n        );\n\n      } else {\n        categoryWrapper.append(categoryDisplayColor, categoryTitle);\n      }\n\n      parent.appendChild(categoryWrapper);\n    });\n  }\n\n  function openCategoryModal(e, categories) {\n    const length = categories.length;\n    if (length === 1) return;\n\n    closeCategoryModalBtn.removeAttribute(\"style\");\n    setTimeout(() => {\n      entriesFormBody.scrollTo({\n        top: entriesFormBody.scrollHeight,\n        behavior: \"smooth\"\n      });\n    }, 5);\n\n    if (length >= 5) {\n      closeCategoryModalBtn.setAttribute(\"style\", `top: -100px`);\n    } else {\n      closeCategoryModalBtn.setAttribute(\"style\", `top: ${(length * 20) * -1}px`);\n    }\n\n    categoryModalWrapper.classList.add(\"category-modal-open\");\n    if (length < 5) {\n      categoryModalWrapper.style.height = `${length * 32}px`;\n    } else {\n      categoryModalWrapper.style.height = \"160px\";\n    }\n\n    selectedCategoryWrapper.classList.add(\"hide-form-category-selection\");\n    categoryModal.classList.remove(\"hide-form-category-modal\");\n    categoryModal.style.height = `${length * 32}px`;\n    categoryModal.innerText = \"\";\n    createCategoryOptions(categoryModal, categories);\n    formModalOverlay.classList.remove(\"hide-form-overlay\");\n  }\n\n  function dragFormAnywhere(e) {\n    const closeBtn = document.querySelector(\".form--header__icon-close\");\n    const rect = entriesFormWrapper.getBoundingClientRect();\n\n    // get current left / top form position\n    const [currleft, currtop] = [\n      parseInt(rect.left),\n      parseInt(rect.top),\n    ];\n\n    entriesFormWrapper.style.margin = \"0\";\n    entriesFormWrapper.style.opacity = \"0.8\";\n    entriesFormWrapper.style.userSelect = \"none\";\n    entriesFormWrapper.style.top = currtop + \"px\";\n    entriesFormWrapper.style.left = currleft + \"px\";\n    entriesFormWrapper.style.bottom = \"0\";\n    entriesFormWrapper.style.right = \"0\";\n    closeBtn.style.pointerEvents = \"none\";\n    entriesForm.style.pointerEvents = \"none\";\n\n    let [leftBefore, topBefore] = [e.clientX, e.clientY];\n    const [winH, winW] = [window.innerHeight, window.innerWidth];\n\n    function mousemove(e) {\n      let [leftAfter, topAfter] = [\n        leftBefore - e.clientX, topBefore - e.clientY\n      ];\n\n      leftBefore = e.clientX;\n      topBefore = e.clientY;\n\n      if (entriesFormWrapper.offsetTop < 0) {\n        entriesFormWrapper.style.top = \"0px\";\n      }\n\n      if (entriesFormWrapper.offsetLeft < 0) {\n        entriesFormWrapper.style.left = \"0px\";\n      }\n\n      if ((entriesFormWrapper.offsetLeft + entriesFormWrapper.offsetWidth) > winW) {\n        entriesFormWrapper.style.left = winW - entriesFormWrapper.offsetWidth + \"px\";\n      }\n\n      if ((entriesFormWrapper.offsetTop + entriesFormWrapper.offsetHeight) > winH) {\n        entriesFormWrapper.style.top = winH - entriesFormWrapper.offsetHeight + \"px\";\n      }\n\n      entriesFormWrapper.style.top = entriesFormWrapper.offsetTop - topAfter + \"px\";\n      entriesFormWrapper.style.left = entriesFormWrapper.offsetLeft - leftAfter + \"px\";\n    }\n\n    const throttlemove = throttle(mousemove, 10);\n\n    function mouseup() {\n      entriesFormWrapper.style.opacity = \"1\";\n      entriesFormWrapper.style.userSelect = \"all\";\n      closeBtn.removeAttribute(\"style\");\n      entriesForm.removeAttribute(\"style\");\n      document.removeEventListener(\"mousemove\", throttlemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n\n    document.addEventListener(\"mousemove\", throttlemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function handleTimepickerSetup(target) {\n    const rect = target.getBoundingClientRect();\n    let [x, y] = placePopup(\n      180,\n      200,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight],\n      false,\n    );\n    return [x, y];\n  }\n\n  function delegateEntryHeader(e) {\n    const dragHeader = getClosest(e, \".form-header--dragarea\");\n    const closeicon = getClosest(e, \".form--header__icon-close\");\n    if (dragHeader) {\n      if (window.innerWidth < 500 || window.innerHeight < 500) {\n        return;\n      } else\n        dragFormAnywhere(e);\n      return;\n    }\n\n    if (closeicon) {\n      handleFormClose(e);\n      return;\n    }\n  }\n\n  function delegateEntryFormEvents(e) {\n    // date / time inputs\n    const startdate = getClosest(e, \".form--body-start__date\");\n    const starttime = getClosest(e, \".form--body-start__time\");\n    const enddate = getClosest(e, \".form--body-end__date\");\n    const endtime = getClosest(e, \".form--body-end__time\");\n\n    // category selection\n    const getCategoryModal = getClosest(e, \".form--body__category-modal\");\n    const category = getClosest(e, \".form--body__category-modal--wrapper-selection\");\n    const getcloseCategoryModalBtn = getClosest(e, \".close-options-floating__btn\");\n    const getCategoryModalOverlay = getClosest(e, \".form-modal-overlay\");\n\n    // error msg : <input> / <textarea>\n    const inputError = getClosest(e, \".form-input-error\");\n\n    // error msg : custom inputs (date / time)\n    const customInputError = getClosest(e, \".form-input-error__custom-input\");\n\n    // form footer buttons\n    const resetbtn = getClosest(e, \".form--footer__button-cancel\");\n    const submitbtn = getClosest(e, \".form--footer__button-save\");\n\n    if (startdate) {\n      handleSetDate(e, \"start\");\n      return;\n    }\n\n    if (starttime) {\n      e.target.classList.add(\"active-form-time\");\n      createTimepicker(\n        handleTimepickerSetup(e.target),\n        startTimeInput.getAttribute(\"data-form-time\"),\n        false,\n        null\n      );\n      return;\n    }\n\n    if (enddate) {\n      handleSetDate(e, \"end\");\n      return;\n    }\n\n    if (endtime) {\n      e.target.classList.add(\"active-form-time\");\n      createTimepicker(\n        handleTimepickerSetup(e.target),\n        endTimeInput.getAttribute(\"data-form-time\"),\n        true,\n        startTimeInput.getAttribute(\"data-form-time\"),\n      );\n      return;\n    }\n\n    if (getCategoryModal) {\n      if (categoryModal.childElementCount > 0) {\n        handleCategorySelection(e);\n      }\n      return;\n    }\n\n    if (category) {\n      openCategoryModal(e, categories);\n      return;\n    }\n\n    if (getcloseCategoryModalBtn) {\n      closeCategoryModal();\n      return;\n    }\n\n    if (getCategoryModalOverlay) {\n      closeCategoryModal();\n      return;\n    }\n\n    if (inputError) {\n      removeErrorMessages(e);\n      return;\n    }\n\n    if (customInputError) {\n      removeErrorMessages(e);\n      return;\n    }\n\n    if (resetbtn) {\n      entriesForm.reset();\n      clearAllErrors();\n      setFormInitialValues();\n      closeCategoryModal();\n      return;\n    }\n\n    if (submitbtn) {\n      handleFormSubmission(e);\n      return;\n    }\n  }\n\n  function delegateFormKeyDown(e) {\n    if (!datepicker.classList.contains(\"hide-datepicker\")) {\n      return;\n    } else {\n      const timep = document?.querySelector(\".timepicker\");\n      const catsAct = document?.querySelector(\".hide-form-category-modal\");\n\n      if (e.key === \"Escape\") {\n        if (timep !== null) {\n          closetimepicker();\n        } else if (catsAct === null) {\n          closeCategoryModal();\n        } else {\n          handleFormClose(e);\n        }\n      }\n\n      if (e.key === \"Enter\") {\n        if (timep !== null) {\n          closetimepicker();\n        } else if (catsAct === null) {\n          closeCategoryModal();\n        } else {\n          handleFormSubmission(e);\n        }\n      }\n    }\n  }\n\n  function setFormInitialValues() {\n    // variable setup\n    categories = Object.entries(store.getAllCtg());\n    activeCategories = store.getActiveCategoriesKeyPair();\n    currentComponent = context.getComponent();\n    year = context.getYear();\n    month = context.getMonth();\n    day = context.getDay();\n\n    // ****************************************** //\n    // title / description\n    descriptionInput.value = \"\";\n    titleInput.blur();\n    titleInput.value = \"\";\n    setTimeout(() => {\n      titleInput.focus();\n    }, 10);\n\n    // ****************************************** //\n    // category setup \n    setInitialFormCategory();\n\n    // ****************************************** // \n    // date picker setup\n    datepickerContext.setDate(year, month, day);\n    context.setDateSelected(day);\n\n    // ****************************************** // \n    // date inputs setup\n    const dateSelected = `${context.getMonthName().slice(0, 3)} ${day}, ${year}`;\n    // DATES : START/END\n    startDateInput.textContent = dateSelected;\n    startDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\n    // startDateInput.setAttribute(\"tabindex\", \"1\")\n    endDateInput.textContent = dateSelected;\n    endDateInput.setAttribute(\"data-form-date\", getDateForStore(context.getDate()));\n    // endDateInput.setAttribute(\"tabindex\", \"2\")\n\n    // TIME : START/END \n    const temphours = new Date().getHours();\n    startTimeInput.setAttribute(\"data-form-time\", `${temphours}:00`);\n    endTimeInput.setAttribute(\"data-form-time\", `${temphours}:30`);\n    const getTimeAndMd = (hour, min) => {\n      return `${+hour === 0 || +hour === 12 ? 12 : hour % 12}:${min}${hour < 12 ? \"am\" : \"pm\"}`;\n    };\n    startTimeInput.textContent = getTimeAndMd(temphours, \"00\");\n    endTimeInput.textContent = getTimeAndMd(temphours, \"30\");\n\n    // ****************************************** // \n    // submit button setup \n    formSubmitButton.setAttribute(\"data-form-action\", \"create\");\n    formSubmitButton.setAttribute(\"data-form-id\", \"\");\n\n    // ****************************************** // \n    // approve form event delegation\n    entriesFormHeader.onmousedown = delegateEntryHeader;\n    formOverlay.onclick = handleFormClose;\n    entriesFormWrapper.onclick = delegateEntryFormEvents;\n    document.addEventListener(\"keydown\", delegateFormKeyDown);\n    // ****************************************** // \n  }\n\n  function getDefaultCategory() {\n    if (activeCategories.length === 0) {\n      return [categories[0][0], categories[0][1].color];\n    } else {\n      return [activeCategories[0][0], activeCategories[0][1].color];\n    }\n  }\n\n  function setInitialFormCategory() {\n    let [categoryTitle, categoryColor] = getDefaultCategory();\n    categoryModalWrapper.setAttribute(\"data-form-category\", categoryTitle);\n\n    selectedCategoryWrapper.style.backgroundColor = categoryColor;\n    selectedCategoryTitle.textContent = categoryTitle;\n    selectedCategoryColor.style.backgroundColor = categoryColor;\n    categoryModalIcon.firstElementChild.setAttribute(\"fill\", categoryColor);\n  }\n\n  setFormInitialValues();\n}","import locales from \"../../locales/en\";\nimport { placePopup } from \"../../utilities/helpers\";\nclass FormConfig {\n  constructor () {\n    this.monthNames = locales.labels.monthsShort;\n    this.headerOffset = document.querySelector(\".header\");\n    this.form = document.querySelector(\".entries__form\");\n    this.formBody = document.querySelector(\".entries__form--body\");\n    this.formTitleDescription = document.querySelectorAll(\".form-body-single\");\n    this.formStartEndCtg = document.querySelectorAll(\".form-body-double\");\n    this.formsubmitbtn = document.querySelector(\".form--footer__button-save\");\n    this.formCategoryWrapper = document.querySelector(\".form--body__category-modal--wrapper\");\n    this.formCategorySelect = document.querySelector(\".form--body__category-modal--wrapper-selection\");\n    this.formCategoryWrapperIcon = document.querySelector(\".form--body__category-modal--wrapper__color\");\n    this.formCategoryTitle = document.querySelector(\".form--body__category-modal--wrapper__title\");\n    this.formCatgoryIcon = document.querySelector(\".form--body__category-icon\");\n  }\n\n \n  setFormStyle(eX, eY, shouldCenter, centerOffset) {\n    if (!shouldCenter) {\n      shouldCenter = false;\n    }\n    if (!centerOffset) {\n      centerOffset = null;\n    }\n    let [x, y] = placePopup(\n      this.form.offsetWidth,\n      this.form.offsetHeight,\n      [eX, eY],\n      [window.innerWidth, window.innerHeight],\n      shouldCenter,\n      centerOffset\n    );\n    this.form.style.left = `${x}px`;\n    this.form.style.top = `${y}px`;\n    this.form.style.margin = \"0\";\n  }\n\n  setFormSubmitType(type, id) {\n    this.formsubmitbtn.setAttribute(\"data-form-action\", type);\n    this.formsubmitbtn.setAttribute(\n      \"data-form-entry-id\",\n      id === null ? id = \"\" : id\n    );\n  }\n\n  configFormTitleDescriptionInput(title, description) {\n    this.formTitleDescription.forEach((input, idx) => {\n      input.firstElementChild.value = [title, description][idx];\n    });\n  }\n\n  setFormDateInput(input, date, minutes, dateFormatted) {\n    const [dateinput, timeinput] = [\n      input.firstElementChild,\n      input.lastElementChild\n    ];\n\n    const timeformatted = `${date.getHours()}:${minutes}`;\n    timeinput.setAttribute(\n      \"data-form-time\",\n      timeformatted\n    );\n\n    timeinput.textContent = `${+date.getHours() === 0 || +date.getHours() === 12 ? 12 : date.getHours() % 12}:${minutes}${date.getHours() < 12 ? \"am\" : \"pm\"}`;\n\n    dateinput.setAttribute(\"data-form-date\", dateFormatted);\n    dateinput.textContent = `${this.monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;\n  }\n\n  setFormDatepickerDate(context, datepickerContext, start) {\n    start = new Date(start);\n    context.setDateSelected(start.getDate());\n    datepickerContext.setDate(\n      context.getYear(),\n      context.getMonth(),\n      context.getDay(),\n    );\n    datepickerContext.setDateSelected(start.getDate());\n  }\n\n  configFormDateInputs(dates) {\n    for (let i = 0; i < 2; i++) {\n      this.setFormDateInput(\n        this.formStartEndCtg[i].lastElementChild,\n        dates.dateObj[i],\n        dates.minutes[i],\n        dates.formatted[i],\n      );\n    }\n  }\n\n  configFormCategoryInput(categoryData) {\n    const [title, color] = categoryData;\n    this.formCategoryWrapper.setAttribute(\"data-form-category\", title);\n    this.formCategorySelect.style.backgroundColor = color;\n    this.formCategoryWrapperIcon.style.backgroundColor = color;\n    this.formCatgoryIcon.firstChild.setAttribute(\"fill\", color);\n    this.formCategoryTitle.textContent = title;\n  }\n\n  getConfig(data) {\n    this.setFormSubmitType(\n      data.submission.type,\n      data.submission.id\n    );\n\n    this.configFormCategoryInput([\n      data.category.name,\n      data.category.color,\n    ]);\n\n    this.configFormDateInputs(\n      data.dates.object\n    );\n\n    if (data.submission.type === \"edit\") {\n      this.configFormTitleDescriptionInput(\n        data.submission.title,\n        data.submission.description\n      );\n    }\n  }\n}\n\nconst fullFormConfig = new FormConfig();\nexport default fullFormConfig;","import locales from \"../../locales/en\";\nimport setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nconst monthsArray = locales.labels.monthsShortLower;\nconst monthsArrayLong = locales.labels.monthsLongLower;\nconst gotoOverlay = document.querySelector(\".go-to-date-overlay\");\nconst goto = document.querySelector(\".go-to-date\");\nconst gotoInput = document.querySelector(\".go-to-input\");\nconst inputErrMessage = document.querySelector(\".go-to-err\");\nconst cancelGoto = document.querySelector(\".cancel-go-to\");\nconst submitGoto = document.querySelector(\".submit-go-to\");\nexport default function createGoTo(context, store, datepickerContext) {\n  function validateDate(date) {\n    let arr;\n    let haserr = false;\n\n    if (date.includes(\"/\")) {\n      arr = date.split(\"/\");\n    } else {\n      arr = date.split(\" \");\n    }\n\n    if (arr.length !== 3) {\n      haserr = true;\n    }\n\n\n    const [month, day, year] = arr.map((date, idx) => {\n      let dateInt = parseInt(date);\n      let tempMonth = null; \n\n      if (isNaN(dateInt)) {\n        if (date.length > 3) {\n          tempMonth = monthsArrayLong.indexOf(date.toLowerCase());\n        } else {\n          tempMonth = monthsArray.indexOf(date.toLowerCase());\n        }\n      }\n\n      if (idx === 0 && tempMonth === null) {\n        dateInt -= 1;\n        if (dateInt === -1) {\n          dateInt = 0;\n        }\n      }\n\n      if (tempMonth === -1) {\n        haserr = true;\n      }\n\n     \n      if (idx === 2) {\n        if (dateInt < 100) {\n          dateInt += 2000;\n        } else if (dateInt > 2100) {\n          haserr = true;\n        } else if (dateInt > 100 && dateInt < 1901) {\n          haserr = true;\n        }\n      }\n\n      return tempMonth === null ? dateInt : tempMonth;\n    });\n\n\n    // form date object and check if valid\n    const dateObj = new Date(year, month, day);\n    if (dateObj.toString() === \"Invalid Date\") {\n      haserr = true;\n    }\n\n    return haserr ? false : dateObj;\n  }\n\n  function removeError() {\n    inputErrMessage.style.display = \"none\";\n    inputErrMessage.onmousedown = null;\n  }\n\n  function handleError() {\n    inputErrMessage.style.display = \"block\";\n    inputErrMessage.onmousedown = removeError;\n  }\n\n  function handleGoTo() {\n    const newdate = validateDate(gotoInput.value);\n    if (newdate instanceof Date) {\n      context.setDate(\n        newdate.getFullYear(),\n        newdate.getMonth(),\n        newdate.getDate()\n      );\n\n      context.setDateSelected(newdate.getDate());\n      if (context.getSidebarState() !== \"hide\") {\n        setSidebarDatepicker(context, store, datepickerContext);\n      }\n\n      let component = context.getComponent();\n      if (component === 'list') {\n        component = 'day';\n      }\n\n      closeGoTo();\n      setViews(component, context, store, datepickerContext);\n    } else {\n      handleError();\n    }\n  }\n\n  function closeGoToOnEscape(e) {\n    const key = e.key.toLowerCase();\n    if (key === \"escape\") {\n      if (inputErrMessage.style.display === \"block\") {\n        removeError();\n      } else {\n        closeGoTo();\n      }\n      return;\n    }\n\n    if (key === \"enter\") {\n      handleGoTo();\n      return;\n    }\n  }\n\n  function closeGoTo() {\n    document.removeEventListener(\"keydown\", closeGoToOnEscape);\n    cancelGoto.onclick = null;\n    submitGoto.onclick = null;\n    store.removeActiveOverlay(\"hide-gotodate\");\n    gotoOverlay.classList.add(\"hide-gotodate\");\n    goto.classList.add(\"hide-gotodate\");\n    gotoInput.value = \"\";\n  }\n\n  function formatStart() {\n    const [year, month, day] = [\n      context.getYear(),\n      context.getMonth(),\n      context.getDay(),\n    ];\n    return `${monthsArray[month]} ${day} ${year}`;\n  }\n\n  function openGoTo() {\n    removeError();\n    setTimeout(() => {\n      gotoInput.focus();\n      gotoInput.value = formatStart();\n    }, 10); \n    gotoOverlay.classList.remove(\"hide-gotodate\");\n    goto.classList.remove(\"hide-gotodate\");\n    store.addActiveOverlay(\"hide-gotodate\");\n    document.addEventListener(\"keydown\", closeGoToOnEscape);\n    cancelGoto.onclick = closeGoTo;\n    submitGoto.onclick = handleGoTo;\n  }\n\n  openGoTo();\n}","export default class FormSetup {\n  constructor () {\n    this.submission;\n    this.category;\n    this.dates;\n  }\n\n\n  setSubmission(type, id, title, description) {\n    this.submission = {\n      type: type,\n      id: id || null,\n      title: title || null,\n      description: description || null,\n    };\n  }\n\n \n  setCategory(name, color) {\n    this.category = {\n      name: name,\n      color: color,\n    };\n  }\n\n\n  setDates(object) {\n    this.dates = { object: object };\n  }\n\n  getSetup() {\n    return {\n      submission: this.submission,\n      category: this.category,\n      dates: this.dates,\n    };\n  }\n}","import { getClosest, throttle } from \"../../utilities/helpers\";\nimport {\n  getDateForStore,\n  compareDates,\n  getDateFromAttribute,\n  isBeforeDate\n} from \"../../utilities/dateutils\";\nimport setViews from \"../../config/setViews\";\n\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\nconst datepickerBody = document.querySelector(\".datepicker__body--dates\");\nconst datepickerTitle = document.querySelector(\".datepicker-title\");\nconst datepickerChangeDate = document.querySelector(\".datepicker-change-date\");\n\n// prev and next buttons aside from main app header datewrapper\nconst headerPrevBtn = document.querySelector(\".prev\");\nconst headerNextBtn = document.querySelector(\".next\");\n\nconst yearpickerTitle = document.querySelector(\".yearpicker-title\");\nconst monthpickerMonths = document.querySelectorAll(\".monthpicker__month\");\n\nexport default function setDatepicker(context, store, datepickerContext, type) {\n  let montharray = datepickerContext.getMonthArray();\n  let count = 0;\n  let hasweek;\n  let testDateSelected = type === \"form\" ? datepickerContext.getDateSelected() : context.getDateSelected();\n  let [checkmonth, checkyear] = [null, null];\n  const datepickerKeypressThrottle = throttle(handleKeydownNav, 100);\n\n  function setDatepickerHeader() {\n    const y = datepickerContext.getYear();\n    const m = datepickerContext.getMonthName();\n    datepickerTitle.textContent = `${m} ${y}`;\n  }\n\n  function createCells(montharray) {\n    datepickerBody.innerText = \"\";\n    let groupedEntries = store.getMonthEntryDates(montharray);\n    let currentWeekStart = context.getWeek();\n    let isDaySelected = false;\n\n    for (let i = 0; i < montharray.length; i++) {\n      const cell = document.createElement(\"div\");\n      const datename = document.createElement(\"div\");\n      cell.classList.add(\"datepicker__body--dates-cell\");\n      datename.classList.add(\"datepicker__body--datename\");\n\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\n        datename.classList.add(\"datepicker__body--datename-disabled\");\n      }\n\n      if (compareDates(montharray[i], currentWeekStart) && context.getComponent() === \"week\") {\n        hasweek = true;\n      }\n\n      if (hasweek) {\n        count++;\n        if (count <= 7) {\n          cell.classList.add(\"datepicker__body--dates-week\");\n        }\n      } else {\n        cell.classList.remove(\"datepicker__body--dates-week\");\n      }\n\n      if (montharray[i].getDate() === testDateSelected && montharray[i].getMonth() === datepickerContext.getMonth()) {\n        if (!datename.classList.contains(\"datepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\n          datename.classList.add(\"datepicker__body--datename-selected\");\n        }\n      }\n\n      if (context.isToday(montharray[i])) {\n        datename.setAttribute(\"class\", \"datepicker__body--datename\");\n        datename.classList.add(\"datepicker__body--datename-today\");\n      }\n\n      datename.innerText = montharray[i].getDate();\n      const formattedDate = getDateForStore(montharray[i]);\n\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\n      if (groupedEntries.includes(formattedDate)) {\n        if (!datename.classList.contains(\"datepicker__body--datename-today\") && !datename.classList.contains(\"datepicker__body--datename-selected\")) {\n          datename.setAttribute(\"class\", \"datepicker__body--datename\");\n          datename.classList.add(\"datepicker__body--datename-entries\");\n        }\n      } else {\n        datename.classList.remove(\"datepicker__body--datename-entries\");\n      }\n\n      cell.appendChild(datename);\n      datepickerBody.appendChild(cell);\n    }\n\n    currentWeekStart = null;\n    groupedEntries = [];\n  }\n\n  function renderpicker(y, m, d) {\n    context.setDate(y, m, d);\n    context.setDateSelected(d);\n    setViews(context.getComponent(), context, store, datepickerContext);\n    datepickerContext.setDate(y, m, d);\n    closeDatepicker();\n  }\n\n  function handleFormDate(y, m, d) {\n    datepickerContext.setDate(y, m, d);\n    context.setDateSelected(d);\n    const datepickerDate = datepickerContext.getDate();\n\n    const activeFormDate = document.querySelector(\".active-form-date\");\n    activeFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\n    activeFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\n\n    const inactiveFormDate = document?.querySelector(\".inactive-form-date\");\n    const inactiveValue = inactiveFormDate.getAttribute(\"data-form-date\").split(\"-\").map(x => parseInt(x));\n    const inactiveDate = new Date(inactiveValue[0], inactiveValue[1], inactiveValue[2]);\n    const inactiveDateType = inactiveFormDate.getAttribute(\"data-form-date-type\");\n\n    \n    if ((isBeforeDate(inactiveDate, datepickerDate) && inactiveDateType === \"end\") || (isBeforeDate(datepickerDate, inactiveDate) && inactiveDateType === \"start\")) {\n      inactiveFormDate.setAttribute(\"data-form-date\", `${y}-${m}-${d}`);\n      inactiveFormDate.textContent = `${datepickerContext.getMonthName().slice(0, 3)} ${d}, ${y}`;\n    }\n  }\n\n  function setNewDate(e, data) {\n    let [y, m, d] = [null, null, null];\n    if (e === null) {\n      y = data[0];\n      m = data[1];\n      d = data[2];\n    } else {\n      let temp = getDateFromAttribute(e.target, \"data-datepicker-date\");\n      y = temp[0];\n      m = temp[1];\n      d = temp[2];\n    }\n    if (type === \"form\") {\n      handleFormDate(y, m, d);\n      closeDatepicker();\n    } else {\n      renderpicker(y, m, d);\n    }\n  }\n\n  function setCheckMonthYear() {\n    checkmonth = datepickerContext.getMonth();\n    checkyear = datepickerContext.getYear();\n  }\n\n  function getMonthYearCheck() {\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\n  }\n\n  function renderNextMonth() {\n    datepickerContext.setNextMonth();\n    montharray = datepickerContext.getMonthArray();\n    createCells(montharray);\n    setDatepickerHeader();\n  }\n\n  function renderPrevMonth() {\n    datepickerContext.setPrevMonth();\n    montharray = datepickerContext.getMonthArray();\n    createCells(montharray);\n    setDatepickerHeader();\n  }\n\n  function setSelectedToNextDay() {\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\n    const parent = curr.parentElement;\n    const next = parent?.nextElementSibling?.firstElementChild;\n\n    if (!next || next === undefined || next === null) {\n      renderNextMonth();\n      datepickerContext.setDateSelected(1);\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      let frst = document.querySelectorAll(\".datepicker__body--datename\");\n      frst[0].classList.add(\"datepicker__body--datename-selected\");\n      return;\n    } else {\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      next.classList.add(\"datepicker__body--datename-selected\");\n      let attr = next.getAttribute(\"data-datepicker-date\");\n      let newDateSelected = parseInt(attr.split(\"-\")[2]);\n      datepickerContext.setDateSelected(newDateSelected);\n      return;\n    }\n  }\n\n  function setSelectedToPrevDay() {\n    let curr = document.querySelector(\".datepicker__body--datename-selected\");\n    const parent = curr.parentElement;\n    const prev = parent?.previousElementSibling?.firstElementChild;\n\n    if (!prev || prev === undefined || prev === null) {\n      renderPrevMonth();\n      const lastday = datepickerContext.getDaysInMonth();\n      datepickerContext.setDateSelected(+lastday);\n      curr = document.querySelector(\".datepicker__body--datename-selected\");\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      let last = document.querySelectorAll(\".datepicker__body--datename\");\n      last[last.length - 1].classList.add(\"datepicker__body--datename-selected\");\n      return;\n    } else {\n      curr.classList.remove(\"datepicker__body--datename-selected\");\n      prev.classList.add(\"datepicker__body--datename-selected\");\n      return;\n    }\n  }\n\n  function monthpickerSetMonth(val, init) {\n    const newmonth = val;\n\n    if (!init && newmonth === datepickerContext.getMonth()) return;\n    datepickerContext.setMonth(newmonth);\n    monthpickerMonths.forEach((month, idx) => {\n      if (idx === newmonth) {\n        month.classList.add(\"monthpicker__active-month\");\n      } else {\n        month.classList.remove(\"monthpicker__active-month\");\n      }\n    });\n  }\n\n  function yearpickerSetYear(increment, init) {\n    if (init) {\n      yearpickerTitle.textContent = datepickerContext.getYear();\n      return;\n    }\n\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\n    if (newyear == +datepickerContext.getYear()) return;\n    datepickerContext.setYear(newyear);\n    yearpickerTitle.textContent = newyear;\n  }\n\n  function handleMonthpicker(dir) {\n    const target = document.querySelector(\".monthpicker__active-month\");\n    let attr = parseInt(target.getAttribute(\"data-dp-month\"));\n    if (dir === \"next\") {\n      monthpickerSetMonth((attr + 1) % 12);\n    } else {\n      if (attr === 0) {\n        monthpickerSetMonth(11);\n      } else {\n        monthpickerSetMonth(attr - 1);\n      }\n    }\n  }\n\n  function openChangeDateModal() {\n    setCheckMonthYear();\n    datepickerChangeDate.classList.add(\"show-dpcd\");\n    yearpickerSetYear(null, true);\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\n  }\n\n  function closeChangeDateModal() {\n    // check if date has changed;\n    if (!getMonthYearCheck()) {\n      montharray = datepickerContext.getMonthArray();\n      createCells(montharray);\n      setDatepickerHeader();\n    }\n    datepickerChangeDate.classList.remove(\"show-dpcd\");\n  }\n\n  function closeDatepicker() {\n    datepicker.classList.add(\"hide-datepicker\");\n    datepickeroverlay.classList.add(\"hide-datepicker-overlay\");\n    closeChangeDateModal();\n    const formOpen = store.getActiveOverlay().has(\"hide-form-overlay\");\n    const listOpen = context.getComponent() !== \"list\";\n    if (listOpen || !formOpen) {\n      headerPrevBtn.removeAttribute(\"style\");\n      headerNextBtn.removeAttribute(\"style\");\n    }\n\n    if (type === \"form\") {\n      document.querySelector(\".active-form-date\")?.classList.remove(\"active-form-date\");\n    }\n\n    datepickerBody.innerText = \"\";\n    datepicker.removeAttribute(\"tabindex\");\n    count = 0;\n    checkmonth = null;\n    checkyear = null;\n    montharray = [];\n\n    datepickeroverlay.onclick = null;\n    datepicker.onclick = null;\n    document.removeEventListener(\"keydown\", datepickerKeypressThrottle);\n  }\n\n  function delegateDatepickerEvents(e) {\n    const datenumber = getClosest(e, \".datepicker__body--datename\");\n    const navnext = getClosest(e, \".datepicker-nav--next\");\n    const navprev = getClosest(e, \".datepicker-nav--prev\");\n    const title = getClosest(e, \".datepicker-title\");\n    const closeChangeDateBtn = getClosest(e, \".close-change-date\");\n    const ypNext = getClosest(e, \".yearpicker-next\");\n    const ypPrev = getClosest(e, \".yearpicker-prev\");\n    const mpMonth = getClosest(e, \".monthpicker__month\");\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (navnext) {\n      renderNextMonth();\n      return;\n    }\n\n    if (navprev) {\n      renderPrevMonth();\n      return;\n    }\n\n    if (title) {\n      openChangeDateModal();\n      return;\n    }\n\n    if (closeChangeDateBtn) {\n      closeChangeDateModal();\n      return;\n    }\n\n    if (ypNext) {\n      yearpickerSetYear(1, false);\n      return;\n    }\n\n    if (ypPrev) {\n      yearpickerSetYear(-1, false);\n      return;\n    }\n\n    if (mpMonth) {\n      const newmonth = parseInt(e.target.getAttribute(\"data-dp-month\"));\n      monthpickerSetMonth(newmonth, false);\n      return;\n    }\n  }\n\n  function handleKeydownNav(e) {\n    const flag = datepickerChangeDate.classList.contains(\"show-dpcd\");\n    switch (e.key) {\n\n      case \"ArrowDown\":\n        flag ? yearpickerSetYear(-1, false) : renderPrevMonth();\n        break;\n\n      case \"ArrowUp\":\n        flag ? yearpickerSetYear(1, false) : renderNextMonth();\n        break;\n\n      case \"ArrowRight\":\n        flag ? handleMonthpicker(\"next\") : setSelectedToNextDay();\n        break;\n\n      case \"ArrowLeft\":\n        flag ? handleMonthpicker(\"prev\") : setSelectedToPrevDay();\n        break;\n\n      case \"Enter\":\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\n          closeChangeDateModal();\n        } else {\n          const target = document.querySelector(\".datepicker__body--datename-selected\");\n          if (target === null || !target) {\n            setNewDate(null, [\n              datepickerContext.getYear(),\n              datepickerContext.getMonth(),\n              28\n            ]);\n          } else {\n            let attr = getDateFromAttribute(target, \"data-datepicker-date\");\n            setNewDate(null, attr);\n          }\n        }\n        break;\n\n      case \"Escape\":\n        if (datepickerChangeDate.classList.contains(\"show-dpcd\")) {\n          closeChangeDateModal();\n        } else {\n          closeDatepicker();\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  function initDatepicker() {\n    setDatepickerHeader();\n    createCells(montharray);\n    store.setResetDatepickerCallback(closeDatepicker);\n    datepickeroverlay.onclick = closeDatepicker;\n    datepicker.onclick = delegateDatepickerEvents;\n    document.addEventListener(\"keydown\", datepickerKeypressThrottle);\n    montharray = [];\n  };\n\n  initDatepicker();\n}\n","import locales from \"../../locales/en\";\nimport { createCheckIcon } from \"../../utilities/svgs\";\nimport { isNumeric, placePopup } from \"../../utilities/helpers\";\nconst checkIcon = createCheckIcon('var(--taskcolor');\nconst colors = Object.values(locales.colors);\n\nclass CatFormHelper {\n  constructor (catname, catcolor) {\n    this.catname = catname;\n    this.catcolor = catcolor;\n    this.errMsg = '';\n    this.prevColorIdx = catcolor;\n    this.originalName = catname;\n    this.originalColor = catcolor;\n  }\n  setName(name) { this.catname = name; }\n  setColor(color) { this.catcolor = color; }\n  setPrevColor(color) { this.prevColorIdx = color; }\n  getName() { return this.catname; }\n  getColor() { return this.catcolor; }\n  prevColor() { return this.prevColorIdx; }\n  setErrMsg(msg) { this.errMsg = msg; }\n  getErrMsg() { return this.errMsg; }\n  getOriginalName() { return this.originalName; }\n  getOriginalColor() { return this.originalColor; }\n}\n\nconst ctgform = document.querySelector(\".category__form\");\nconst ctgformoverlay = document.querySelector(\".category__form-overlay\");\nconst ctgformInput = document.querySelector(\".category__form-input\");\nconst colorPickerTitle = document.querySelector(\".color-picker__title\");\nconst colorPickerOptions = document.querySelector(\".color-picker__options\");\nconst ctgErrMsg = document.querySelector(\".ctg-input--err\");\n\nexport default function createCategoryForm(store, selectedCategory, editing, resetParent) {\n\n  const formhelper = new CatFormHelper(\n    selectedCategory.name,\n    selectedCategory.color\n  );\n\n  function createColorOption(color, selected) {\n    const colorOption = document.createElement(\"div\");\n    colorOption.classList.add(\"color-picker--option\");\n    colorOption.style.backgroundColor = color;\n    colorOption.setAttribute(\"data-color-hex\", color);\n\n    if (color === selected) {\n      colorOption.append(checkIcon);\n      formhelper.setColor(color);\n    }\n\n    return colorOption;\n  }\n\n  function createPickerOptions(currentColor) {\n    colorPickerOptions.innerText = \"\";\n    colors.forEach((color) => {\n      for (let i = 1; i < 8; i++) {\n        colorPickerOptions.append(\n          createColorOption(color[i], currentColor)\n        );\n      }\n    });\n  }\n\n  function handleColorSelection(e, current) {\n    const target = e.target;\n    const color = target.getAttribute(\"data-color-hex\");\n\n    if (color === current) return;\n\n    const colorOptions = document.querySelectorAll(\".color-picker--option\");\n    colorOptions.forEach((option) => {\n      option.innerText = \"\";\n    });\n    target.appendChild(checkIcon);\n    colorPickerTitle.style.background = color;\n    formhelper.setColor(color);\n  }\n\n  function handleInputErr() {\n    const removeInputErr = () => {\n      ctgErrMsg.classList.add(\"hide-ctg-err\");\n      ctgformInput.focus();\n    };\n    ctgErrMsg.textContent = formhelper.getErrMsg();\n    ctgErrMsg.onclick = removeInputErr;\n  }\n\n  function validateNewCategory(categoryName, color) {\n    let trimName = categoryName.trim().replace(/[^a-zA-Z0-9\\s]+|\\s{2,}/g, ' ').trim();\n\n    if (isNumeric(trimName)) {\n      trimName = `category ${trimName}`;\n    }\n\n    const origName = formhelper.getOriginalName();\n\n    let errormsg = false;\n    if (trimName.length < 1) {\n      formhelper.setErrMsg(\"Category name is required\");\n      errormsg = true;\n    } else if (store.hasCtg(trimName)) {\n      if (!editing || (editing && origName !== trimName)) {\n        formhelper.setErrMsg(\"Category already exists\");\n        errormsg = true;\n      }\n    }\n\n    if (errormsg) {\n      ctgErrMsg.classList.remove(\"hide-ctg-err\");\n      handleInputErr(errormsg);\n      return;\n    } else {\n      if (editing) {\n        if (origName === trimName && formhelper.getOriginalColor() === color) {\n          closeCategoryForm();\n          return;\n        } else {\n          if (origName !== trimName) {\n            store.updateCtg(trimName, color, formhelper.getName());\n          } else {\n            store.updateCtgColor(origName, color);\n          }\n        }\n      } else {\n        store.addNewCtg(trimName, color);\n      }\n\n      const fullrenderCtg = store.getRenderCategoriesCallback();\n      closeCategoryForm();\n      fullrenderCtg();\n    }\n  }\n\n  function closeCategoryForm() {\n    if (resetParent !== null) {\n      resetParent.removeAttribute(\"style\");\n    }\n    colorPickerOptions.innerText = \"\";\n    ctgform.classList.add(\"hide-ctg-form\");\n    ctgformoverlay.classList.add(\"hide-ctg-form\");\n    ctgformInput.value = \"\";\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\n    store.removeActiveOverlay('hide-ctg-form');\n    ctgform.onmousedown = null;\n    ctgformoverlay.onclick = null;\n    document.removeEventListener(\"keydown\", closeCategoryFormOnEsc);\n  }\n\n  function closeCategoryFormOnEsc(e) {\n    const val = e.key.toLowerCase();\n    if (val === \"escape\") {\n      if (!ctgErrMsg.classList.contains(\"hide-ctg-err\")) {\n        ctgErrMsg.classList.add(\"hide-ctg-err\");\n        ctgformInput.focus();\n        return;\n      } else {\n        closeCategoryForm();\n        return;\n      }\n    }\n    if (val === \"enter\") {\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\n      return;\n    }\n  }\n\n  function openCtgForm(editing) {\n    store.addActiveOverlay(\"hide-ctg-form\");\n    ctgformoverlay.classList.remove(\"hide-ctg-form\");\n    ctgform.classList.remove(\"hide-ctg-form\");\n    ctgform.removeAttribute(\"style\");\n\n    if (resetParent !== null) {\n      const rect = resetParent.getBoundingClientRect();\n      const getright = parseInt(rect.right);\n      const gettop = parseInt(rect.top);\n      const [x, y] = placePopup(\n        280,\n        352,\n        [getright - 20, gettop - 28],\n        [window.innerWidth, window.innerHeight],\n        false,\n        null\n      );\n      ctgform.setAttribute(\"style\", `left:${x}px;top:${y}px;`);\n    } else {\n      ctgform.setAttribute(\"style\", \"left:5%;top:5%;right:5%;margin:auto;\");\n    }\n\n    ctgErrMsg.classList.add(\"hide-ctg-err\");\n    colorPickerTitle.style.backgroundColor = formhelper.getColor();\n    setTimeout(() => {\n      if (editing) {\n        ctgformInput.value = formhelper.getName();\n      } else {\n        ctgformInput.placeholder = \"Create new category\";\n      }\n      ctgformInput.focus();\n    }, 4);\n  }\n\n  function gc(e, element) {\n    return e.target.closest(element);\n  }\n\n  function delegateCtgForm(e) {\n    const cancelctgBtn = gc(e, \".category__form--cancel\");\n    const colorOption = gc(e, \".color-picker--option\");\n    const submitctgBtn = gc(e, \".category__form--submit\");\n\n    if (cancelctgBtn) {\n      closeCategoryForm(e);\n      return;\n    }\n\n    if (colorOption) {\n      handleColorSelection(e, formhelper.getColor());\n      return;\n    }\n\n    if (submitctgBtn) {\n      validateNewCategory(ctgformInput.value, formhelper.getColor());\n      return;\n    }\n  }\n\n  const initCtgForm = () => {\n    createPickerOptions(formhelper.getColor());\n    openCtgForm(editing);\n    ctgform.onmousedown = delegateCtgForm;\n    ctgformoverlay.onclick = closeCategoryForm;\n    document.addEventListener(\"keydown\", closeCategoryFormOnEsc);\n  };\n\n  initCtgForm();\n}","import setViews from \"../../config/setViews\";\nimport { getClosest } from \"../../utilities/helpers\";\n\nimport {\n  formatEntryOptionsDate,\n  compareDates,\n} from \"../../utilities/dateutils\";\n\nconst entryOptionsOverlay = document.querySelector(\".entry__options--overlay\");\nconst entryOptionsWrapper = document.querySelector('.entry__options');\nconst entryOptionsHeaderWrapper = document.querySelector(\".entry__options--header\")\nconst entryOptionsDateHeader = document.querySelector('.entry__options-date');\nconst entryOptionsTimeHeader = document.querySelector('.entry__options-time');\nconst entryOptionTitle = document.querySelector(\".eob-title\");\nconst entryOptionDescription = document.querySelector('.eob-description');\nconst entryOptionCategoryIcon = document.querySelector(\".eob-category--icon\");\nconst entryOptionCategory = document.querySelector('.eob-category');\n\nexport default function getEntryOptionModal(context, store, entry, datepickerContext, finishSetup) {\n\n  function openEditForm() {\n    const openForm = store.getRenderFormCallback();\n    openForm();\n    finishSetup();\n    closeEntryOptions();\n  }\n\n  function proceedDelete(entry) {\n    store.deleteEntry(entry.id);\n    closeEntryOptions();\n    setViews(context.getComponent(), context, store, datepickerContext);\n  }\n\n  function openDeleteWarning() {\n    const deletepopup = document.createElement(\"div\");\n    deletepopup.classList.add(\"delete-popup\");\n\n    const deletebtns = document.createElement(\"div\");\n    deletebtns.classList.add(\"delete-popup__btns\");\n\n    const deletepopupCancel = document.createElement(\"button\");\n    deletepopupCancel.classList.add(\"delete-popup__cancel\");\n    deletepopupCancel.textContent = \"Cancel\";\n\n    const deletepopupConfirm = document.createElement(\"button\");\n    deletepopupConfirm.classList.add(\"delete-popup__confirm\");\n    deletepopupConfirm.textContent = \"Delete\";\n\n    const deletepopupText = document.createElement(\"p\");\n    deletepopupText.classList.add(\"delete-popup__text\");\n    deletepopupText.textContent = \"Are you sure you want to delete this entry?\";\n\n    deletebtns.append(deletepopupCancel, deletepopupConfirm);\n    deletepopup.append(deletepopupText, deletebtns);\n    entryOptionsWrapper.append(deletepopup);\n\n    const removeDeletePopup = () => { deletepopup.remove(); };\n    const submitDelete = () => {\n      proceedDelete(entry);\n      removeDeletePopup();\n      const resetCurrentView = store.getFormResetHandle(context.getComponent());\n      if (resetCurrentView !== null) {\n        resetCurrentView();\n      }\n    };\n\n    deletepopupCancel.onclick = removeDeletePopup;\n    deletepopupConfirm.onclick = submitDelete;\n  }\n\n\n\n  function formNegated() {\n    const resetCurrentView = store.getFormResetHandle(context.getComponent());\n    closeEntryOptions();\n    resetCurrentView();\n  }\n\n  function closeEntryOptions() {\n    [\n      entryOptionsDateHeader,\n      entryOptionsTimeHeader,\n      entryOptionTitle,\n      entryOptionDescription,\n      entryOptionCategory,\n    ].forEach(el => el.innerText = \"\");\n\n    entryOptionsWrapper.classList.add(\"entry__options--hidden\");\n    entryOptionsOverlay.classList.add(\"entry__options--hidden\");\n    store.removeActiveOverlay(\"entry__options--hidden\");\n    entryOptionDescription.parentElement.removeAttribute(\"style\");\n    entryOptionsWrapper.onclick = null;\n    entryOptionsOverlay.onclick = null;\n    entryOptionsHeaderWrapper.focus();\n    document.removeEventListener(\"keydown\", handleEntryOptionKD);\n  }\n\n  function setEntryDefaults() {\n    entryOptionsWrapper.classList.remove(\"entry__options--hidden\");\n    entryOptionsOverlay.classList.remove(\"entry__options--hidden\");\n    store.addActiveOverlay(\"entry__options--hidden\");\n\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\n    let istoday = false;\n    if (compareDates(start, new Date())) {\n      istoday = true;\n    }\n\n    const getDateTime = formatEntryOptionsDate(start, end);\n    entryOptionsDateHeader.textContent = getDateTime.date;\n    if (getDateTime.time !== null) {\n      if (getDateTime.time === undefined) {\n        let tempdate = new Date();\n        let secondsDiff = tempdate.getTime() - end.getTime();\n        let daysSince = Math.floor(secondsDiff / (1000 * 60 * 60 * 24));\n        let timeheadertitle;\n\n    \n        if (daysSince === 0) {\n          let hourSince = Math.floor(secondsDiff / (1000 * 60 * 60));\n          let minSince = Math.floor((secondsDiff - (hourSince * 1000 * 60 * 60)) / (1000 * 60));\n          if (hourSince === 0) {\n            if (minSince === 1) {\n              timeheadertitle = `ended ${minSince} minute ago`;\n            } else {\n              timeheadertitle = `ended ${minSince} minutes ago`;\n            }\n          } else if (hourSince === 1) {\n            timeheadertitle = `ended ${hourSince} hour ago`;\n          } else if (hourSince > 1) {\n            timeheadertitle = `ended ${hourSince} hours ago`;\n          }\n        } else if (daysSince === 1) {\n          timeheadertitle = \"ended yesterday\";\n        } else {\n          timeheadertitle = `ended ${daysSince} days ago`;\n        }\n        entryOptionsTimeHeader.textContent = timeheadertitle;\n      } else {\n        if (istoday) {\n          entryOptionsTimeHeader.textContent = \"ending in \" + getDateTime.time;\n        } else {\n          entryOptionsTimeHeader.textContent = getDateTime.time;\n        }\n      }\n    }\n\n    entryOptionTitle.textContent = entry.title;\n\n    entry.description.length === 0 ? entryOptionDescription.parentElement.style.display = \"none\" : entryOptionDescription.textContent = entry.description;\n\n    entryOptionCategoryIcon.setAttribute(\"fill\", store.getCtgColor(entry.category));\n    entryOptionCategory.textContent = entry.category;\n\n    entryOptionsWrapper.onclick = delegateEntryOptions;\n    entryOptionsOverlay.onclick = formNegated;\n    // entryOptionsWrapper.focus();\n    document.addEventListener(\"keydown\", handleEntryOptionKD);\n  }\n\n  function handleEntryOptionKD(e) {\n    const deletepopup = document?.querySelector(\".delete-popup\");\n\n    if (e.key === \"Escape\") {\n      if (deletepopup) {\n        deletepopup.remove();\n        return;\n      } else {\n        formNegated();\n      }\n    }\n\n    if (e.key.toLowerCase() === \"e\") {\n      openEditForm();\n    }\n\n    if (e.key === \"Delete\") {\n      openDeleteWarning();\n    }\n  }\n\n  function delegateEntryOptions(e) {\n    const editBtn = getClosest(e, \".eoi__edit\");\n    const deleteBtn = getClosest(e, \".eoi__delete\");\n    const closeBtn = getClosest(e, \".eoi__close\");\n\n    if (editBtn) {\n      openEditForm();\n      return;\n    }\n\n    if (deleteBtn) {\n      openDeleteWarning();\n      return;\n    }\n\n    if (closeBtn) {\n      formNegated();\n      return;\n    }\n  }\n\n  setEntryDefaults();\n}","import locales from \"../../locales/en\";\n\nexport default function setHeader(context, component, store) {\n  let temp = new Date();\n  const btntoday = document.querySelector(\".btn-today\");\n  btntoday.setAttribute(\"data-tooltip\", `${locales.labels.weekdaysLong[temp.getDay()]}, ${locales.labels.monthsLong[temp.getMonth()]} ${temp.getDate()}`);\n\n  const dateTimeTitle = document.querySelector(\".datetime-content--title\");\n  const header = document.querySelector(\".header\");\n  const selectElement = document.querySelector(\".select__modal\");\n  const btnprev = document.querySelector('.prev');\n  const btnnext = document.querySelector('.next');\n  const datetimeWrapper = document.querySelector(\".h-col-2\");\n  const datetimeContent = document.querySelector(\".datetime-content\");\n  const prevnext = document.querySelector(\".prev-next\");\n\n  const configHeader = (borderstyle, componentTitle) => {\n    header.style.borderBottom = borderstyle;\n    dateTimeTitle.textContent = componentTitle;\n    datetimeWrapper.classList.remove(\"datetime-inactive\");\n    datetimeWrapper.style.paddingRight = \"0\";\n    datetimeContent.removeAttribute(\"style\");\n    prevnext.removeAttribute(\"style\");\n  };\n\n  const setHeaderAttributes = (view) => {\n    if (view !== \"list\") {\n      btnprev.setAttribute(\"data-tooltip\", `prev ${view}`);\n      btnnext.setAttribute(\"data-tooltip\", `next ${view}`);\n    }\n    selectElement.textContent = view[0].toUpperCase() + view.slice(1);\n    selectElement.setAttribute(\"data-value\", view.slice(0, 1).toUpperCase());\n  };\n\n  switch (component) {\n    case \"day\":\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getDay()}, ${context.getYear()}`);\n      setHeaderAttributes(\"day\");\n      break;\n    case \"week\":\n      configHeader(\"1px solid transparent\", context.getWeekRange());\n      setHeaderAttributes(\"week\");\n      break;\n    case \"month\":\n      configHeader(\"1px solid transparent\", `${context.getMonthName()} ${context.getYear()}`);\n      setHeaderAttributes(\"month\");\n      break;\n    case \"year\":\n      configHeader(\"1px solid transparent\", context.getYear());\n      setHeaderAttributes(\"year\");\n      break;\n    case \"list\":\n      setHeaderAttributes(\"list\");\n      header.style.borderBottom = \"1px solid var(--mediumgrey1)\";\n      prevnext.setAttribute(\"style\", \"pointer-events:none;\");\n      // prevnext.setAttribute(\"style\", \"opacity: 0; pointer-events:none;\");\n      datetimeWrapper.classList.add(\"datetime-inactive\");\n      break;\n    default:\n      break;\n  }\n}\n","const shortcutsModalOverlay = document.querySelector(\".shortcuts-modal-overlay\");\nconst shortcutsModal = document.querySelector(\".shortcuts__modal\");\nconst shortcutsModalContent = document.querySelector(\".shortcuts-modal-content\");\nconst shortcutsModalClose = document.querySelector(\".close-shortcuts-modal\");\nconst notifyShortcutsStatus = document.querySelector(\".keyboard-disabled-sm-two\");\n\nexport default function handleShortCutsModal(store) {\n  function createShortcut(key, description) {\n    const shortcut = document.createElement(\"div\");\n    shortcut.classList.add(\"sm-item\");\n\n    const shortcutKey = document.createElement(\"div\");\n    shortcutKey.classList.add(\"sm-key\");\n    const keyone = document.createElement(\"span\");\n    if (Array.isArray(key)) {\n      const or = document.createElement(\"span\");\n      or.textContent = \" or \";\n      const keytwo = document.createElement(\"span\");\n      keyone.textContent = key[0].toUpperCase();\n      keytwo.textContent = key[1].toUpperCase();\n      shortcutKey.append(keyone, or, keytwo);\n    } else {\n      if (key == \"ENTER\" || key == \"ESCAPE\" || key == \"DELETE\") {\n        keyone.classList.add(\"key-full\");\n      }\n      keyone.textContent = key.toUpperCase();\n      shortcutKey.appendChild(keyone);\n    }\n\n    const shortcutDescription = document.createElement(\"div\");\n    shortcutDescription.classList.add(\"sm-description\");\n    if (Array.isArray(description)) {\n      shortcut.classList.add(\"sm-item--full\");\n      shortcutDescription.classList.add(\"sm-description--full\");\n      const descriptionOne = document.createElement(\"span\");\n      const descriptionTwo = document.createElement(\"span\");\n      descriptionOne.textContent = description[0];\n      descriptionTwo.textContent = description[1];\n      shortcutDescription.append(descriptionOne, descriptionTwo);\n    } else {\n      shortcutDescription.textContent = description;\n    }\n    shortcut.append(shortcutKey, shortcutDescription);\n    return shortcut;\n  }\n\n  function handleShortcutsModalClose() {\n    shortcutsModalContent.innerText = \"\";\n    shortcutsModalOverlay.classList.add(\"hide-shortcuts\");\n    shortcutsModal.classList.add(\"hide-shortcuts\");\n    store.removeActiveOverlay(\"hide-shortcuts\");\n    document.removeEventListener(\"keydown\", closeShortcutsOnKeydown);\n  }\n\n  function closeShortcutsOnKeydown(e) {\n    let inp = e.key.toLowerCase();\n    if (inp === \"escape\" || inp === \"/\" || inp === \"?\") {\n      handleShortcutsModalClose();\n    }\n  }\n\n  function setStatusIcon(status) {\n    if (status) {\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\n\n    } else {\n      notifyShortcutsStatus.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\n      notifyShortcutsStatus.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\n    }\n  }\n\n  function handleShortcutsModalOpen() {\n    shortcutsModalOverlay.classList.remove(\"hide-shortcuts\");\n    shortcutsModal.classList.remove(\"hide-shortcuts\");\n    store.addActiveOverlay(\"hide-shortcuts\");\n\n    const status = store.getShortcutsStatus();\n    setStatusIcon(status);\n\n    const shortcuts = store.getShortcuts();\n    for (let i = 0; i < Object.values(shortcuts).length; i++) {\n      const value = Object.values(shortcuts)[i];\n      shortcutsModalContent.appendChild(createShortcut(\n        value.shortcut,\n        value.action,\n      ));\n    }\n\n    function toggleShortcutsStatus() {\n      const status = store.getShortcutsStatus() === false ? true : false;\n      setStatusIcon(status);\n      store.setShortcutsStatus(status);\n    }\n\n    shortcutsModalOverlay.onclick = handleShortcutsModalClose;\n    shortcutsModalClose.onclick = handleShortcutsModalClose;\n    notifyShortcutsStatus.onclick = toggleShortcutsStatus;\n    document.addEventListener(\"keydown\", closeShortcutsOnKeydown);\n  }\n\n  handleShortcutsModalOpen();\n}","import setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\n\nimport {\n  createCheckIcon,\n  createEditIcon,\n  createCloseIcon,\n  createTrashIcon,\n} from \"../../utilities/svgs\";\n\nimport {\n  getClosest,\n  placePopup\n} from \"../../utilities/helpers\";\n\nimport createCategoryForm from \"./editCategory\";\n\nconst sidebarColTwo = document.querySelector(\".sb__categories\");\nconst cWrapper = document.querySelector(\".sb__categories--body\");\nconst categoriesContainer = document.querySelector(\".sb__categories--body-form\");\nconst categoriesHeader = document.querySelector(\".sb__categories--header\");\nconst categoryHeaderCaret = document.querySelector(\".sbch-caret\");\n// renders via menu click -- see ./renderViews.js\n\nexport default function handleSidebarCategories(context, store, datepickerContext) {\n  const defaultCtg = store.getDefaultCtg()[0];\n\n  function updateComponent() {\n    setViews(context.getComponent(), context, store, datepickerContext);\n  }\n\n  function renderSidebarDatepickerCtg() {\n    setSidebarDatepicker(context, store, datepickerContext);\n  }\n\n  function renderCategories() {\n    categoriesContainer.innerText = \"\";\n    const ctg = store.getAllCtg();\n    const keys = Object.keys(ctg);\n    for (let i = 0; i < keys.length; i++) {\n      let [ctgname, color, status] = [\n        keys[i],\n        ctg[keys[i]].color,\n        ctg[keys[i]].active\n      ];\n      createCategoryListItem(ctgname, color, status);\n    }\n  }\n\n  /**\n   * \n   * @param {string} ctgname - category name\n   * @param {string} ctgcolor - hex color\n   * @param {Boolean} status - checked or not\n   */\n  function createCategoryListItem(ctgname, ctgcolor, status) {\n    const row = document.createElement('div');\n    row.classList.add('sbch-form--item');\n    const colone = document.createElement('div');\n    colone.classList.add('sbch-form--item__col');\n    const checkboxWrapper = document.createElement('div');\n    checkboxWrapper.classList.add('sbch-form--item__checkbox--wrapper');\n    const checkbox = document.createElement('button');\n    checkbox.classList.add('sbch-form--item__checkbox');\n    checkbox.setAttribute(\"data-sbch-checked\", `${status}`);\n    checkbox.setAttribute(\"data-sbch-category\", ctgname);\n    \n    let checkIcon;\n    if (status) {\n      checkbox.style.backgroundColor = ctgcolor;\n      checkIcon = createCheckIcon(\"var(--taskcolor0)\");\n    } else {\n      checkbox.style.backgroundColor = \"var(--black1)\";\n      checkIcon = createCheckIcon(\"none\");\n    }\n\n    checkbox.style.border = `2px solid ${ctgcolor}`;\n    checkbox.appendChild(checkIcon);\n    checkboxWrapper.appendChild(checkbox);\n\n    const label = document.createElement('span');\n    label.classList.add('sbch-form--item__label');\n    label.textContent = ctgname;\n    colone.append(checkboxWrapper, label);\n\n    const coltwo = document.createElement('div');\n    coltwo.classList.add('sbch-form--item__col--actions');\n    const deleteicon = document.createElement('button');\n    deleteicon.classList.add('sbch-col--actions__delete-icon');\n    deleteicon.setAttribute(\"data-sbch-category\", ctgname);\n    deleteicon.setAttribute(\"data-sbch-color\", ctgcolor);\n    const editicon = document.createElement('button');\n    editicon.classList.add(\"sbch-col--actions__edit-icon\");\n    editicon.setAttribute(\"data-sbch-category\", ctgname);\n    editicon.setAttribute(\"data-sbch-color\", ctgcolor);\n\n    // must have at least one category, so default cannot be deleted\n    if (ctgname.toLowerCase() === defaultCtg) {\n      editicon.classList.add(\"sbch-col--actions__edit-icon--immutable\");\n    } else {\n      deleteicon.appendChild(createCloseIcon(\"var(--white2)\"));\n      coltwo.appendChild(deleteicon);\n    }\n\n\n    editicon.appendChild(createEditIcon(\"var(--white2)\"));\n    coltwo.appendChild(editicon);\n    row.append(colone, coltwo);\n    categoriesContainer.appendChild(row);\n  }\n\n  function handleCategoryModalToggle() {\n    cWrapper.classList.toggle(\"toggle-category--modal\");\n    if (!cWrapper.classList.contains(\"toggle-category--modal\")) {\n      categoryHeaderCaret.classList.add(\"sbch-caret--open\");\n    } else {\n      categoryHeaderCaret.classList.remove(\"sbch-caret--open\");\n    }\n    categoriesHeader.style.backgroundColor = \"var(--black0)\";\n    setTimeout(() => {\n      categoriesHeader.style.backgroundColor = \"var(--black1)\";\n    }, 200);\n  }\n\n  function createDeleteCategoryPopup(e) {\n    const ctgname = e.target.getAttribute(\"data-sbch-category\");\n    const ctgcolor = store.getCtgColor(ctgname);\n    const offsetColor = ctgcolor;\n    const categoryLength = store.getCtgLength(ctgname);\n    let noEntries = false;\n\n    // POPUP OVERLAY\n    const popupBoxOverlay = document.createElement(\"aside\");\n    popupBoxOverlay.classList.add(\"popup-delete-ctg__overlay\");\n\n    // POPUP BOX\n    const popupBox = document.createElement(\"aside\");\n    popupBox.classList.add(\"popup-delete-ctg\");\n    if (categoryLength === 0) {\n      noEntries = true;\n      popupBox.classList.add(\"popup-delete-ctg__no-entries\");\n    }\n    const ord = categoryLength === 1 ? \"entry\" : \"entries\";\n\n    /* **************************** */\n    // POPUP HEADER\n    const popupHeader = document.createElement(\"div\");\n    popupHeader.classList.add(\"popup-delete-ctg__header\");\n\n    const popupTitle = document.createElement(\"div\");\n    popupTitle.classList.add(\"popup-delete-ctg__title\");\n    popupTitle.style.border = `2px solid ${ctgcolor}`;\n    popupTitle.style.backgroundColor = offsetColor;\n    popupTitle.textContent = `removing – \"${ctgname}\"`;\n\n    const popupCategoryStats = document.createElement(\"div\");\n    popupCategoryStats.classList.add(\"popup-delete-ctg__stats\");\n    popupCategoryStats.textContent = `(${categoryLength} total ${ord} in this category)`;\n    /* **************************** */\n    popupHeader.append(popupTitle, popupCategoryStats);\n    popupBox.appendChild(popupHeader);\n\n\n    // category has entries -- provide options to move entries to another category or delete them\n    // const setChecked = (inp) => {\n    //   inp.checked = true;\n    // }\n    if (!noEntries) {\n      // POPUP BODY\n      const popupBody = document.createElement(\"div\");\n      popupBody.classList.add(\"popup-delete-ctg__body\");\n\n      // OPTION ONE : MOVE ENTRIES TO ANOTHER CATEGORY\n      const optionsWrapperOne = document.createElement(\"div\");\n      const categoryNames = store.getAllCtgNames();\n      optionsWrapperOne.classList.add(\"popup-delete-ctg__options\");\n      optionsWrapperOne.classList.add(\"popup-delete-act\");\n      optionsWrapperOne.style.backgroundColor = offsetColor;\n      optionsWrapperOne.style.border = `2px solid ${ctgcolor}`;\n      const optionMoveRadio = document.createElement(\"input\");\n      optionMoveRadio.setAttribute(\"type\", \"radio\");\n      optionMoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\n      optionMoveRadio.setAttribute(\"id\", \"ctg-move\");\n      optionMoveRadio.setAttribute(\"checked\", \"true\");\n\n      const optionMove = document.createElement(\"div\");\n      const optionMoveTitle = document.createElement(\"span\");\n      const optionMoveSelect = document.createElement(\"select\");\n      optionMove.classList.add(\"popup-delete-ctg__option--move\");\n      optionMoveTitle.textContent = `Move \"${ctgname}\" ${ord} to `;\n      optionMoveSelect.classList.add(\"popup-delete-ctg__option--move-select\");\n      for (let i = 0; i < categoryNames.length; i++) {\n        if (categoryNames[i] === ctgname) continue;\n        const option = document.createElement(\"option\");\n        option.value = categoryNames[i];\n        option.textContent = categoryNames[i];\n        optionMoveSelect.appendChild(option);\n      }\n      optionMove.append(optionMoveTitle, optionMoveSelect);\n      optionsWrapperOne.append(optionMoveRadio, optionMove);\n\n\n      /* ************ */\n      // OPTION TWO : REMOVE CATEGORY AND ENTRIES\n      const optionsWrapperTwo = document.createElement(\"div\");\n      optionsWrapperTwo.classList.add(\"popup-delete-ctg__options\");\n      optionsWrapperTwo.style.border = `2px solid ${ctgcolor}`;\n\n      const optionRemoveRadio = document.createElement(\"input\");\n      optionRemoveRadio.setAttribute(\"type\", \"radio\");\n      optionRemoveRadio.setAttribute(\"name\", \"popup-delete-ctg__option\");\n      optionRemoveRadio.setAttribute(\"id\", \"ctg-delete\");\n\n      const optionRemove = document.createElement(\"div\");\n      optionRemove.classList.add(\"popup-delete-ctg__option--remove\");\n      const optionRemoveTitle = document.createElement(\"span\");\n\n      optionRemoveTitle.textContent = `Delete \"${ctgname}\" and ${categoryLength} ${ord} (irreversible)`;\n      const optionRemoveIcon = createTrashIcon(ctgcolor);\n      const handleWrapperClick = (e) => {\n        if (e.target.id === \"ctg-delete\" || e.target.id === \"ctg-move\" || e.target.classList.contains(\"popup-delete-ctg__option--move\") || e.target.classList.contains(\"popup-delete-ctg__option--move-select\")) {\n          return;\n        } else {\n          e.target.closest(\".popup-delete-ctg__options\").querySelector(\"input\").checked = true;\n          document.querySelectorAll(\".popup-delete-ctg__options\").forEach((el) => {\n            // el.style.backgroundColor = \"transparent\";\n            el.setAttribute(\"style\", `background-color: transparent; border: 2px solid ${ctgcolor};`);\n            el.classList.remove(\"popup-delete-act\");\n          });\n          // popup-delete-act\n          e.target.closest(\".popup-delete-ctg__options\").setAttribute(\"style\", `background-color: ${offsetColor}; border: 2px solid ${ctgcolor};`);\n\n          e.target.closest(\".popup-delete-ctg__options\").classList.add(\"popup-delete-act\");\n        }\n      };\n\n      optionRemove.append(optionRemoveTitle, optionRemoveIcon);\n      optionsWrapperTwo.append(optionRemoveRadio, optionRemove);\n\n      popupBody.append(optionsWrapperOne, optionsWrapperTwo);\n      popupBox.appendChild(popupBody);\n      optionsWrapperOne.onclick = handleWrapperClick;\n      optionsWrapperTwo.onclick = handleWrapperClick;\n    }\n\n\n    /* **************************** */\n    // POPUP FOOTER\n    const popupFooter = document.createElement(\"div\");\n    popupFooter.classList.add(\"popup-delete-ctg__footer\");\n    const btncancel = document.createElement(\"button\");\n    btncancel.textContent = \"cancel\";\n    btncancel.classList.add(\"popup-delete-ctg__btn--cancel\");\n    btncancel.style.backgroundColor = offsetColor;\n    const btnproceed = document.createElement(\"button\");\n    btnproceed.classList.add(\"popup-delete-ctg__btn--proceed\");\n    btnproceed.textContent = \"proceed\";\n    /* **************************** */\n    popupFooter.append(btncancel, btnproceed);\n    popupBox.appendChild(popupFooter);\n    document.body.append(popupBoxOverlay, popupBox);\n\n    // EVENT LISTENERS\n    store.addActiveOverlay(\"popup-delete-ctg__overlay\");\n    const closeDeletePopupOnEscape = (e) => {\n      if (e.key === \"Escape\") closeDeletePopup();\n    };\n\n    const closeDeletePopup = () => {\n      popupBox.remove();\n      popupBoxOverlay.remove();\n      store.removeActiveOverlay(\"popup-delete-ctg__overlay\");\n      document.removeEventListener(\"keydown\", closeDeletePopupOnEscape);\n    };\n\n    const proceedDeletePopup = () => {\n      if (!noEntries) {\n        const selectedOption = document?.querySelector(\"input[name='popup-delete-ctg__option']:checked\").id;\n        const selectedCategory = document.querySelector(\".popup-delete-ctg__option--move-select\").value;\n        if (selectedOption === \"ctg-move\") {\n          store.moveCategoryEntriesToNewCategory(\n            ctgname, selectedCategory\n          );\n        } else if (selectedOption === \"ctg-delete\") {\n          store.removeCategoryAndEntries(ctgname);\n        }\n      } else {\n        store.deleteCategory(ctgname);\n      }\n\n      closeDeletePopup();\n      updateComponent();\n      renderSidebarDatepickerCtg();\n      renderCategories();\n    };\n\n    btnproceed.onclick = proceedDeletePopup;\n    popupBoxOverlay.onclick = closeDeletePopup;\n    btncancel.onclick = closeDeletePopup;\n    document.addEventListener(\"keydown\", closeDeletePopupOnEscape);\n  }\n\n  function handleCategorySelection(e) {\n    let checkbox = e.target.children[0].children[0];\n    let status = checkbox.getAttribute(\"data-sbch-checked\");\n    let cat = checkbox.getAttribute(\"data-sbch-category\");\n    let color = store.getCtgColor(cat);\n    if (status === \"true\") {\n      checkbox.setAttribute(\"data-sbch-checked\", \"false\");\n      store.setCategoryStatus(cat, false);\n      checkbox.style.backgroundColor = \"var(--black1)\";\n      checkbox.firstChild.setAttribute(\"fill\", \"none\");\n    } else {\n      checkbox.setAttribute(\"data-sbch-checked\", \"true\");\n      store.setCategoryStatus(cat, true);\n      checkbox.style.backgroundColor = color;\n      checkbox.firstChild.setAttribute(\"fill\", \"var(--taskcolor0)\");\n    }\n    renderSidebarDatepickerCtg();\n    updateComponent();\n  }\n\n  function openCategoryOptionsMenu(e, data) {\n    const [targetCtg, targetElement] = data;\n    let [x, y] = placePopup(\n      192,\n      128,\n      [\n        e.clientX,\n        parseInt(targetElement.getBoundingClientRect().top) - 8\n      ],\n      [window.innerWidth, window.innerHeight],\n      false,\n      null\n    );\n\n    const popupBox = document.createElement(\"div\");\n    popupBox.classList.add(\"popup-ctg-options\");\n    popupBox.style.top = `${y}px`;\n    popupBox.style.left = `${x}px`;\n    const popupBoxOverlay = document.createElement(\"div\");\n    popupBoxOverlay.classList.add(\"popup-ctg-options__overlay\");\n    store.addActiveOverlay(\"popup-ctg-options__overlay\");\n\n    const optionEdit = document.createElement(\"div\");\n    optionEdit.classList.add(\"option__open-ctg-edit\");\n    optionEdit.textContent = \"Edit category (name, color)\";\n    const optionTurnOff = document.createElement(\"div\");\n    optionTurnOff.classList.add(\"option__close-other-ctg\");\n    optionTurnOff.textContent = \"Display this only\";\n    const optionTurnOn = document.createElement(\"div\");\n    optionTurnOn.classList.add(\"option__open-other-ctg\");\n    optionTurnOn.textContent = \"Display all but this\";\n\n    function closeCategoryOptionsMenu(flag, chckbox) {\n      document.querySelector(\".popup-ctg-options\").remove();\n      document.querySelector(\".popup-ctg-options__overlay\").remove();\n      store.removeActiveOverlay(\"popup-ctg-options__overlay\");\n      if (flag) { chckbox.removeAttribute(\"style\"); }\n      document.removeEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\n    }\n\n    function handleOpenEditCtg(e) {\n      createCategoryForm(store, targetCtg, true, targetElement);\n      closeCategoryOptionsMenu();\n    }\n\n    function rerender() {\n      renderSidebarDatepickerCtg();\n      updateComponent();\n      renderCategories();\n    }\n\n    function closeAndRemoveStyle() {\n      closeCategoryOptionsMenu(true, targetElement);\n    }\n\n    function turnoff() {\n      store.setAllCategoryStatusExcept(targetCtg.name, false);\n      closeAndRemoveStyle();\n      rerender();\n    }\n\n    function turnon() {\n      store.setAllCategoryStatusExcept(targetCtg.name, true);\n      closeAndRemoveStyle();\n      rerender();\n    }\n\n    function handleCloseOnEscapeCtgOptionsMenu(e) {\n      if (e.key === \"Escape\") { closeAndRemoveStyle(); }\n    }\n\n    popupBox.append(optionEdit, optionTurnOff, optionTurnOn);\n    document.body.prepend(popupBoxOverlay, popupBox);\n    document.addEventListener(\"keydown\", handleCloseOnEscapeCtgOptionsMenu);\n    optionEdit.onclick = handleOpenEditCtg;\n    popupBoxOverlay.onclick = closeAndRemoveStyle;\n    optionTurnOff.onclick = turnoff;\n    optionTurnOn.onclick = turnon;\n  }\n\n  function delegateCategoryEvents(e) {\n    const ctgtoggleModal = getClosest(e, \".sbch-col__one\");\n    const editctgBtn = getClosest(e, \".sbch-col--actions__edit-icon\");\n    const deletectgBtn = getClosest(e, \".sbch-col--actions__delete-icon\");\n    const ctgChck = getClosest(e, \".sbch-form--item__col\");\n    const ctgPlus = getClosest(e, \".sbch-plus\");\n\n    if (ctgtoggleModal) {\n      handleCategoryModalToggle();\n      return;\n    }\n\n    // open category options menu (edit, turn others off, turn others on)\n    if (editctgBtn) {\n      const targetcat = {\n        name: e.target.getAttribute(\"data-sbch-category\"),\n        color: e.target.getAttribute(\"data-sbch-color\"),\n      };\n      const targetparent = e.target.parentElement.parentElement;\n      targetparent.style.borderBottom = `2px solid ${targetcat.color}`;\n      openCategoryOptionsMenu(\n        e, [targetcat, targetparent]\n      );\n      return;\n    }\n\n    if (deletectgBtn) {\n      createDeleteCategoryPopup(e);\n      return;\n    }\n\n    // toggle category checkbox and display entries\n    if (ctgChck) {\n      handleCategorySelection(e);\n      return;\n    }\n\n    // create popup with category creation form\n    if (ctgPlus) {\n      const targetcat = {\n        name: \"new category\",\n        color: \"#2C52BA\",\n      };\n      createCategoryForm(store, targetcat, false, e.target);\n      return;\n    }\n  }\n\n  const initSidebarCategories = () => {\n    renderCategories();\n    const fullCtgRender = () => {\n      renderCategories();\n      updateComponent();\n    };\n    store.setRenderCategoriesCallback(fullCtgRender);\n    sidebarColTwo.onmousedown = delegateCategoryEvents;\n  };\n  initSidebarCategories();\n}","import { getDateForStore } from \"../../utilities/dateutils\";\nimport setViews from \"../../config/setViews\";\nimport { getClosest } from \"../../utilities/helpers\";\n\n\nconst sbdatepicker = document.querySelector(\".datepicker-sidebar\");\nconst sbdatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\nconst sbdatepickerTitle = document.querySelector(\".sbdatepicker-title\");\n\nconst sbdatepickerChangeDate = document.querySelector(\".sb-datepicker-change-date\");\n\nconst sbyearpickerTitle = document.querySelector(\".sb-yearpicker-title\");\nconst sbmonthpickerMonths = document.querySelectorAll(\".sb-monthpicker__month\");\n\nexport default function setSidebarDatepicker(context, store, datepickerContext) {\n\n  datepickerContext.setDate(\n    context.getYear(),\n    context.getMonth(),\n    context.getDay()\n  );\n\n  let montharray = datepickerContext.getMonthArray();\n  let groupedEntries = store.getMonthEntryDates(montharray);\n  let currentWeekStart = context.getWeek();\n  let hasweek = false;\n  let count = 0;\n  let [checkmonth, checkyear] = [null, null];\n\n  function setDatepickerHeader() {\n    const month = datepickerContext.getMonthName();\n    const year = datepickerContext.getYear();\n    sbdatepickerTitle.textContent = `${month} ${year}`;\n  }\n\n  function createCells(montharray) {\n    sbdatepickerBody.innerText = \"\";\n    const component = context.getComponent();\n\n    for (let i = 0; i < montharray.length; i++) {\n      const cell = document.createElement(\"div\");\n      const datename = document.createElement(\"div\");\n      cell.classList.add(\"sbdatepicker__body--dates-cell\");\n      datename.classList.add(\"sbdatepicker__body--datename\");\n\n      if (montharray[i].getMonth() !== datepickerContext.getMonth()) {\n        datename.classList.add(\"sbdatepicker__body--datename-disabled\");\n      }\n\n      if (component === \"week\") {\n        if (currentWeekStart.getDate() === montharray[i].getDate()) {\n          if (currentWeekStart.getMonth() === montharray[i].getMonth()) {\n            if (currentWeekStart.getFullYear() === montharray[i].getFullYear()) {\n              hasweek = true;\n            }\n          }\n        }\n      }\n\n      if (hasweek) {\n        count++;\n        if (count <= 7) {\n          cell.classList.add(\"sbdatepicker__body--dates-week\");\n        }\n      } else {\n        cell.classList.remove(\"sbdatepicker__body--dates-week\");\n      }\n\n      if (context.isToday(montharray[i])) {\n        datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n        datename.classList.add(\"sbdatepicker__body--datename-today\");\n      }\n\n      if (montharray[i].getDate() === context.getDateSelected() && montharray[i].getMonth() === datepickerContext.getMonth()) {\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n          datename.classList.add(\"sbdatepicker__body--datename-selected\");\n        }\n      }\n\n      datename.textContent = montharray[i].getDate();\n      const formattedDate = getDateForStore(montharray[i]);\n      datename.setAttribute(\"data-datepicker-date\", formattedDate);\n      if (groupedEntries.includes(formattedDate)) {\n        if (!datename.classList.contains(\"sbdatepicker__body--datename-selected\") && !datename.classList.contains(\"sbdatepicker__body--datename-today\")) {\n          datename.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n          datename.classList.add(\"sbdatepicker__body--datename-entries\");\n        }\n      } else {\n        datename.classList.remove(\"sbdatepicker__body--datename-entries\");\n      }\n\n      cell.appendChild(datename);\n      sbdatepickerBody.appendChild(cell);\n    }\n  }\n\n  function resetpickerData() {\n    montharray = datepickerContext.getMonthArray();\n    groupedEntries = store.getMonthEntryDates(montharray);\n    currentWeekStart = context.getWeek();\n    count = 0;\n    hasweek = false;\n  }\n\n  function renderpicker(y, m, d) {\n    context.setDate(y, m, d);\n    context.setDateSelected(d);\n    datepickerContext.setDate(y, m, d);\n    setViews(\n      context.getComponent(),\n      context,\n      store,\n      datepickerContext,\n    );\n\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  function renderSelectedDay(e, d) {\n    context.setDateSelected(d);\n    const selected = document.querySelectorAll(\".sbdatepicker__body--datename-selected\");\n    selected.forEach((x) => {\n      x.classList.remove(\"sbdatepicker__body--datename-selected\");\n    });\n    e.target.setAttribute(\"class\", \"sbdatepicker__body--datename\");\n    e.target.classList.add(\"sbdatepicker__body--datename-selected\");\n  }\n\n  function renderprevMonth() {\n    datepickerContext.setPrevMonth();\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  function rendernextMonth() {\n    datepickerContext.setNextMonth();\n    resetpickerData();\n    createCells(montharray);\n    setDatepickerHeader();\n    montharray = [];\n  }\n\n  /**\n   * \n   * @param {*} e \n   * @description some extra steps required for the sidebar datepicker \n   * vs any other datepicker due to the fact that the sidebar datepicker will stay open after a date is selected.\n   * These extra steps include:\n   *  1. do not re render datepicker if the selected date is in the current month, just update the selected date\n   *  2. the one exception to above rule is if the component is the week view and the selected date is not in the current week, then re render the datepicker\n   *  3. if the component is in the list view (schedule), do not re render the view, just update the selected date\n   */\n  function setNewDate(e) {\n    const target = e.target;\n    let [y, m, d] = target.getAttribute(\"data-datepicker-date\").split('-').map(x => parseInt(x));\n\n    const component = context.getComponent();\n\n    if (component === \"list\") {\n      renderSelectedDay(e, d);\n      return;\n    }\n\n    if (component === \"year\") {\n      if (context.getYear() !== y) {\n        renderpicker(y, m, d);\n        return;\n      } else {\n        renderSelectedDay(e, d);\n        return;\n      }\n    }\n\n    if (component === \"month\") {\n      if (context.getMonth() !== m) {\n        renderpicker(y, m, d);\n        return;\n      } else {\n        renderSelectedDay(e, d);\n        return;\n      }\n    }\n\n    if (component === \"week\") {\n      if (e.target.parentElement.classList.contains(\"sbdatepicker__body--dates-week\")) {\n        renderSelectedDay(e, d);\n        return;\n      } else {\n        renderpicker(y, m, d);\n      }\n      return;\n    }\n\n    if (component === \"day\") {\n      if (context.isToday(new Date(y, m, d))) {\n        renderSelectedDay(e, d);\n        return;\n      } else {\n        renderpicker(y, m, d);\n        return;\n      }\n    }\n  }\n\n  function setCheckMonthYear() {\n    checkmonth = datepickerContext.getMonth();\n    checkyear = datepickerContext.getYear();\n  }\n\n  function getMonthYearCheck() {\n    return checkmonth === datepickerContext.getMonth() && checkyear === datepickerContext.getYear();\n  }\n\n  function openChangeDateModal() {\n    setCheckMonthYear();\n    sbdatepickerChangeDate.classList.add(\"show-sbdpcd\");\n    yearpickerSetYear(null, true);\n    monthpickerSetMonth(datepickerContext.getMonth(), true);\n  }\n\n  function closeChangeDateModal() {\n    // check if date has changed;\n    if (!getMonthYearCheck()) {\n      resetpickerData();\n      createCells(montharray);\n      setDatepickerHeader();\n      montharray = [];\n    }\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\n  }\n\n  function monthpickerSetMonth(val, init) {\n    const newmonth = val;\n\n    if (!init && newmonth === datepickerContext.getMonth()) return;\n    datepickerContext.setMonth(newmonth);\n    sbmonthpickerMonths.forEach((month, idx) => {\n      if (idx === newmonth) {\n        month.classList.add(\"monthpicker__active-month\");\n      } else {\n        month.classList.remove(\"monthpicker__active-month\");\n      }\n    });\n  }\n\n  function yearpickerSetYear(increment, init) {\n    if (init) {\n      sbyearpickerTitle.textContent = datepickerContext.getYear();\n      return;\n    }\n\n    const newyear = parseInt(datepickerContext.getYear()) + increment;\n    if (newyear == +datepickerContext.getYear()) return;\n    datepickerContext.setYear(newyear);\n    sbyearpickerTitle.textContent = newyear;\n  }\n\n  function delegateDatepickerEvents(e) {\n    const datenumber = getClosest(e, \".sbdatepicker__body--datename\");\n    const navnext = getClosest(e, \".sbdatepicker-nav--next\");\n    const navprev = getClosest(e, \".sbdatepicker-nav--prev\");\n    const title = getClosest(e, \".sbdatepicker-title\");\n    const closeChangeDateBtn = getClosest(e, \".sb-close-change-date\");\n    const ypNext = getClosest(e, \".sb-yearpicker-next\");\n    const ypPrev = getClosest(e, \".sb-yearpicker-prev\");\n    const mpMonth = getClosest(e, \".sb-monthpicker__month\");\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (navnext) {\n      rendernextMonth();\n      return;\n    }\n\n    if (navprev) {\n      renderprevMonth();\n      return;\n    }\n\n    if (datenumber) {\n      setNewDate(e);\n      return;\n    }\n\n    if (title) {\n      openChangeDateModal();\n      return;\n    }\n\n    if (closeChangeDateBtn) {\n      closeChangeDateModal();\n      return;\n    }\n\n    if (ypNext) {\n      yearpickerSetYear(1, false);\n      return;\n    }\n\n    if (ypPrev) {\n      yearpickerSetYear(-1, false);\n      return;\n    }\n\n    if (mpMonth) {\n      const newmonth = parseInt(e.target.getAttribute(\"data-sbdp-month\"));\n      monthpickerSetMonth(newmonth, false);\n      return;\n    }\n  }\n\n  function initsbdatepicker() {\n    sbdatepickerChangeDate.classList.remove(\"show-sbdpcd\");\n    setDatepickerHeader();\n    createCells(montharray);\n    sbdatepicker.onclick = delegateDatepickerEvents;\n    montharray = null;\n    groupedEntries = null;\n  };\n  \n  initsbdatepicker();\n}","import { getClosest } from \"../../utilities/helpers\";\n\nconst sidebarFooter = document.querySelector(\".sb__info\");\n\n// popup containing : project notes, privacy policy, & terms of use\nconst sbInfoPopup = document.querySelector(\".sb__info-popup\");\nconst sbInfoPopupOverlay = document.querySelector(\".sb__info-popup-overlay\");\nconst selectInfo = document.querySelector(\".select-popup-info\");\nconst closePopupButton = document.querySelector(\".close-sb-info\");\nconst infopopupTitle = document.querySelector(\".sbip-title\");\nconst infopopupBody = document.querySelector(\".sbip-content\");\n\n\nexport default function handleSidebarFooter(store) {\n\n  const infoContent = {\n    notes: {\n      title: \"Breakdown of project & current status\",\n      content: \"These are my project notes\",\n    },\n    privacy: {\n      title: \"Cookies and Data Privacy\",\n      content: \"This project uses an open source license\",\n    },\n    terms: {\n      title: \"Code license and terms of use\",\n      content: \"All data is stored locally meaning no data is sent to a server.\"\n    },\n  };\n\n  function closeInfoPopup() {\n    store.removeActiveOverlay(\"hide-sb-info-popup\");\n    sbInfoPopup.classList.add(\"hide-sb-info-popup\");\n    sbInfoPopupOverlay.classList.add(\"hide-sb-info-popup\");\n    document.removeEventListener(\"keydown\", closeInfoPopupOnEscape);\n    sbInfoPopupOverlay.onclick = null;\n    closePopupButton.onclick = null;\n  }\n\n  function setInfoContent(selection) {\n    infopopupTitle.innerText = infoContent[selection].title;\n    infopopupBody.innerText = infoContent[selection].content;\n  }\n\n  function handleSelectInfoChange(e) {\n    const selection = e.target.value;\n    setInfoContent(selection);\n  }\n\n  function closeInfoPopupOnEscape(e) {\n    if (e.key === \"Escape\") {\n      closeInfoPopup();\n    }\n  }\n\n  function setUpInfoPopup() {\n    setInfoContent(selectInfo.value);\n    selectInfo.onchange = handleSelectInfoChange;\n    sbInfoPopupOverlay.onclick = closeInfoPopup;\n    closePopupButton.onclick = closeInfoPopup;\n    document.addEventListener(\"keydown\", closeInfoPopupOnEscape);\n  }\n\n  function openInfoPopup(selection) {\n    const selections = ['notes', 'privacy', 'terms'];\n    const idx = selections.indexOf(selection);\n    selectInfo.selectedIndex = idx;\n\n    store.addActiveOverlay(\"hide-sb-info-popup\");\n    sbInfoPopup.classList.remove(\"hide-sb-info-popup\");\n    sbInfoPopupOverlay.classList.remove(\"hide-sb-info-popup\");\n    setUpInfoPopup();\n  }\n\n  function delegateSidebarFooterEvents(e) {\n    const projectNotes = getClosest(e, \".sb__project-notes\");\n    const privacy = getClosest(e, \".sb__privacy\");\n    const terms = getClosest(e, \".sb__terms\");\n\n    if (projectNotes) {\n      openInfoPopup(\"notes\");\n      return;\n    }\n\n    if (privacy) {\n      openInfoPopup(\"privacy\");\n      return;\n    }\n\n    if (terms) {\n      openInfoPopup(\"terms\");\n      return;\n    }\n  }\n\n  sidebarFooter.onmousedown = delegateSidebarFooterEvents;\n}","import { getClosest, setTheme } from \"../../utilities/helpers\";\nimport { createTimestamp } from \"../../utilities/dateutils\";\nimport handleShortCutsModal from \"./shortcutsModal\";\n\nconst sidebarSubMenuOverlay = document.querySelector('.sidebar-sub-menu__overlay');\nconst sidebarSubMenu = document.querySelector('.sidebar-sub-menu');\nconst closeSubMenuBtn = document.querySelector('.close-sub-menu');\nconst closemenu = \"hide-sidebar-sub-menu\";\nconst appBody = document.querySelector(\".body\");\n\n// dark, light, contrast\nconst themeRadioBtns = document.querySelectorAll(\".theme-radio__input\");\nconst themeRadioOptions = [\"dark\", \"light\", \"contrast\"];\n\n// keyboard shortcut toggle on/off | open modal\nconst shortcutSwitch = document.querySelector(\".smia-toggle-shortcuts-checkbox\");\nconst animationsSwitchBtn = document.querySelector(\".smdt-toggle-checkbox\");\nconst notifyDisabledShortcutsIcon = document.querySelector(\".keyboard-disabled-sm\");\n\nexport default function getSidebarSubMenu(store, context) {\n\n  function closeSubOnEscape(e) {\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (e.key === \"Escape\") {\n      if (popup) {\n        popup.remove();\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n        return;\n      } else {\n        closeSubMenu();\n        sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n      }\n    }\n    if (e.key.toLowerCase() === \"a\") {\n      if (popup) {\n        return;\n      } else {\n        closeSubMenu();\n      }\n    }\n  }\n\n  function createUploadConfirmationPopup() {\n    const popup = document.createElement(\"div\");\n    popup.classList.add(\"sb-sub-popup-confirm\");\n    const [totalEntries, totalCategories] = store.getStoreStats();\n\n    // let totals;\n    let [hasEntries, hasCategories] = [false, false];\n    let titleEntries;\n    if (totalEntries > 0) {\n      hasEntries = `Overwriting ${totalEntries} entries`;\n    }\n    if (totalCategories > 1) {\n      if (totalCategories === 2) {\n        hasCategories = \"1 category.\";\n      } else {\n        hasCategories = `${+totalCategories - 1} categories.`;\n      }\n    }\n\n    if (hasEntries && hasCategories) {\n      titleEntries = `${hasEntries} and ${hasCategories}`;\n    } else if (hasEntries && !hasCategories) {\n      titleEntries = `${hasEntries}.`;\n    } else if (!hasEntries && hasCategories) {\n      titleEntries = `No entries. Overwriting ${hasCategories}`;\n    } else {\n      titleEntries = \"Current calendar has no entries or categories.\";\n    }\n\n    const subtitle = document.createElement(\"div\");\n    subtitle.classList.add(\"sb-sub-popup-subtitle\");\n    subtitle.textContent = titleEntries;\n    const subtitle2 = document.createElement(\"div\");\n    subtitle2.classList.add(\"sb-sub-popup-subtitle\");\n    subtitle2.textContent = 'This action is irreversible.';\n    const subtitle3 = document.createElement(\"div\");\n    subtitle3.classList.add(\"sb-sub-popup-title\");\n    subtitle3.textContent = 'Please ensure you have a valid backup before proceeding. Use the \"validate .json\" button next to \"upload .json\" to check that everything is in order.';\n\n    const btns = document.createElement(\"div\");\n    btns.classList.add(\"sb-sub-popup-btns\");\n    const cancelBtn = document.createElement(\"button\");\n    cancelBtn.classList.add(\"sb-sub-popup-btn--cancel\");\n    cancelBtn.textContent = \"Cancel\";\n    const proceedBtn = document.createElement(\"button\");\n    proceedBtn.classList.add(\"sb-sub-popup-btn--proceed\");\n    proceedBtn.textContent = \"Proceed\";\n\n    btns.append(cancelBtn, proceedBtn);\n    console.log(popup);\n    popup.append(\n      subtitle,\n      subtitle2,\n      subtitle3,\n      btns\n    );\n    return popup;\n  }\n\n  function closeSubMenu() {\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (popup) {\n      popup.remove();\n      sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n      return;\n    } else {\n      store.removeActiveOverlay(closemenu);\n      sidebarSubMenu.classList.add(closemenu);\n      sidebarSubMenuOverlay.classList.add(closemenu);\n      document.removeEventListener(\"keydown\", closeSubOnEscape);\n      sidebarSubMenuOverlay.onclick = null;\n    }\n  }\n\n  function setStatusIcon(status) {\n    if (status) {\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts enabled\");\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--primary1)\");\n    } else {\n      notifyDisabledShortcutsIcon.setAttribute(\"data-tooltip\", \"Keyboard shortcuts disabled\");\n      notifyDisabledShortcutsIcon.firstElementChild.setAttribute(\"fill\", \"var(--red1)\");\n    }\n  }\n\n  function openSubMenu() {\n    // configure current active status of theme radio btns\n    const themeIdx = themeRadioOptions.indexOf(context.getColorScheme());\n    themeRadioBtns[themeIdx].checked = true;\n\n    const shortcutStatus = store.getShortcutsStatus();\n    setStatusIcon(shortcutStatus);\n    shortcutSwitch.checked = shortcutStatus;\n\n    const animationStatus = store.getAnimationStatus();\n    setAnimationsIcons(animationStatus);\n    animationsSwitchBtn.checked = animationStatus;\n\n    store.addActiveOverlay(closemenu);\n    sidebarSubMenu.classList.remove(closemenu);\n    sidebarSubMenuOverlay.classList.remove(closemenu);\n\n    document.addEventListener(\"keydown\", closeSubOnEscape);\n    sidebarSubMenuOverlay.onclick = closeSubMenu;\n    // closeSubMenuBtn.onclick = closeSubMenu;\n  }\n\n  function getJSONUpload(e) {\n    const file = document.createElement(\"input\");\n    file.type = \"file\";\n    file.accept = \"application/json\";\n    file.onchange = (e) => {\n      const file = e.target.files[0];\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const json = JSON.parse(e.target.result);\n        store.setUserUpload(json);\n        closeSubMenu();\n      };\n      reader.readAsText(file);\n      reader = null;\n    };\n    document.body.appendChild(file);\n    file.click();\n    document.body.removeChild(file);\n    closeSubMenu();\n    return;\n  }\n\n  function getJSONDownload() {\n    const json = JSON.stringify(localStorage);\n    const [totalEntries, totalCategories] = store.getStoreStats();\n    const filename = `ENT_${totalEntries}_CAT_${totalCategories}_${createTimestamp()}`;\n    const blob = new Blob([json], { type: \"application/json\" });\n    const href = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.download = filename + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    URL.revokeObjectURL(href);\n    document.body.removeChild(link);\n  }\n\n  function removePopup() {\n    sidebarSubMenuOverlay.classList.remove(\"sub-overlay-vis\");\n    const popup = document.querySelector(\".sb-sub-popup-confirm\");\n    if (popup) {\n      popup.remove();\n    }\n  }\n\n  function handleCalendarJSON(action) {\n    if (action === \"download\") {\n      getJSONDownload();\n      return;\n    }\n\n    if (action === \"upload\") {\n      // create popup to warn user that they are about to overwrite all calendar data\n      const popup = createUploadConfirmationPopup();\n      document.body.appendChild(popup);\n      sidebarSubMenuOverlay.classList.add(\"sub-overlay-vis\");\n      // cancel will close popup but keep open sidebar sub menu\n      // \"Escape\" key will also close popup but keep open sidebar sub menu\n      // \"a\" key will be temporarily disabled while popup is open\n      const cancelBtn = popup.querySelector(\".sb-sub-popup-btn--cancel\");\n      const proceedBtn = popup.querySelector(\".sb-sub-popup-btn--proceed\");\n      cancelBtn.onclick = removePopup;\n      proceedBtn.onclick = getJSONUpload;\n    }\n  }\n\n  function handleThemeChange(e) {\n    const target = e.target;\n    const targetinput = target.firstElementChild;\n    const value = targetinput.value;\n    targetinput.checked = true;\n    const currentTheme = context.getColorScheme();\n    if (value === currentTheme) {\n      return;\n    }\n    context.setColorScheme(value);\n    setTheme(context);\n  }\n\n  function openKbShortcutMenu() {\n    closeSubMenu();\n    handleShortCutsModal(store);\n  }\n\n  function toggleShortcuts() {\n    const status = shortcutSwitch.checked ? false : true;\n    store.setShortcutsStatus(status);\n    setStatusIcon(status);\n  }\n\n  function toggleShortcutsIcon() {\n    let status = store.getShortcutsStatus();\n\n    status = !status;\n    store.setShortcutsStatus(status);\n    setStatusIcon(status);\n    shortcutSwitch.checked = status ? true : false;\n  }\n\n  function setAnimationsIcons(val) {\n    const parenticonwrapper = document.querySelector(\".toggle-animations-icon__sm\");\n    const icons = {\n      on: document.querySelector(\".tai-on\"),\n      off: document.querySelector(\".tai-off\"),\n    };\n\n    if (val) {\n      icons.on.classList.remove(\"hide-tai\");\n      icons.off.classList.add(\"hide-tai\");\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Enabled\");\n    } else {\n      icons.on.classList.add(\"hide-tai\");\n      icons.off.classList.remove(\"hide-tai\");\n      parenticonwrapper.setAttribute(\"data-tooltip\", \"Animations Disabled\");\n    }\n  }\n\n  function toggleAnimations(fromicon) {\n    const status = animationsSwitchBtn.checked ? false : true;\n    store.setAnimationStatus(status);\n    setAnimationsIcons(status);\n    if (fromicon) {\n      animationsSwitchBtn.checked = status ? true : false;\n    }\n    if (status) {\n      appBody.classList.remove(\"disable-transitions\");\n    } else {\n      appBody.classList.add(\"disable-transitions\");\n    }\n  }\n\n  function delegateSubMenuEvents(e) {\n    const downloadjsonBtn = getClosest(e, \".down-json\");\n    const uploadjsonBtn = getClosest(e, \".upload-json\");\n    const themebtn = getClosest(e, \".theme-option\");\n    const kbShortcutMenu = getClosest(e, \".toggle-kb-shortcuts-btn__smia\");\n    const shortcutSwitch = getClosest(e, \".smia-disable-shortcuts__btn\");\n    const shortcutSwitchNotifyIcon = getClosest(e, \".keyboard-disabled-sm\");\n    const animationsSwitch = getClosest(e, \".smdt-toggle\");\n    const animationsIcon = getClosest(e, \".toggle-animations-icon__sm\");\n    const getCloseSubMenuBtn = getClosest(e, \".close-sub-menu\");\n\n    if (downloadjsonBtn) {\n      handleCalendarJSON(\"download\");\n      return;\n    }\n\n    if (uploadjsonBtn) {\n      handleCalendarJSON(\"upload\");\n      return;\n    }\n\n    if (themebtn) {\n      handleThemeChange(e);\n      return;\n    }\n\n    if (kbShortcutMenu) {\n      openKbShortcutMenu();\n      return;\n    }\n\n    if (shortcutSwitch) {\n      toggleShortcuts();\n      return;\n    }\n\n    if (shortcutSwitchNotifyIcon) {\n      toggleShortcutsIcon();\n      return;\n    }\n\n    if (animationsSwitch) {\n      toggleAnimations();\n      return;\n    }\n\n    if (animationsIcon) {\n      toggleAnimations(true);\n      return;\n    }\n\n    if (getCloseSubMenuBtn) {\n      closeSubMenu();\n      return;\n    }\n  }\n\n  function setSidebarSubMenu() {\n    openSubMenu();\n    sidebarSubMenu.onmousedown = delegateSubMenuEvents;\n  }\n  setSidebarSubMenu();\n}","import {\n  createCloseIcon,\n} from \"../../utilities/svgs\";\n\nimport { getClosest } from \"../../utilities/helpers\";\nimport store from \"../../context/store\";\n\nconst body = document.querySelector(\".body\");\nconst toast = document.querySelector(\".toast\");\n\nexport default function createToast(message, undoCallback) {\n\n  function closetoast() {\n    toast.classList.remove(\"show-toast\");\n    toast.innerText = \"\";\n    document.onmousedown = null;\n    document.onkeydown = null;\n    store.removeActiveOverlay(\"toast\");\n  }\n\n  function createToast() {\n    toast.innerText = \"\";\n\n    const toastMessage = document.createElement(\"div\");\n    toastMessage.classList.add(\"toast-message\");\n    toastMessage.textContent = message;\n\n    const closeIconWrapper = document.createElement(\"div\");\n    closeIconWrapper.classList.add(\"close-toast-icon-wrapper\");\n    closeIconWrapper.appendChild(createCloseIcon(\"var(--white4)\"));\n\n    const undoToastWrapper = document.createElement(\"div\");\n    undoToastWrapper.classList.add(\"undo-toast-wrapper\");\n    const undoToastMessage = document.createElement(\"div\");\n    undoToastMessage.classList.add(\"undo-toast-message\");\n    undoToastMessage.textContent = \"Undo\";\n    undoToastWrapper.appendChild(undoToastMessage);\n\n    function delegateToast(e) {\n      const gettoast = getClosest(e, \".toast\");\n      if (!gettoast) {\n        closetoast();\n        return;\n      }\n\n      const getundo = getClosest(e, \".undo-toast-wrapper\");\n      const getclose = getClosest(e, \".close-toast-icon-wrapper\");\n\n      if (getundo) {\n        undoCallback();\n        closetoast();\n        return;\n      }\n\n      if (getclose) {\n        closetoast();\n        return;\n      }\n    }\n\n    function handleToastKeydown(e) {\n      if (e.key) {\n        closetoast();\n      }\n    }\n\n    toast.append(toastMessage, undoToastWrapper, closeIconWrapper);\n    toast.classList.add(\"show-toast\");\n    store.addActiveOverlay(\"toast\");\n\n\n    document.onkeydown = handleToastKeydown;\n    document.onmousedown = delegateToast;\n  }\n  createToast();\n}","import fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\n\nimport { Day } from \"../../factory/entries\";\n\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\n\nimport {\n  formatStartEndTime,\n  getTempDates,\n  getFormDateObject,\n  formatEntryOptionsDate,\n} from \"../../utilities/dateutils\";\n\nimport { createCloseIcon } from \"../../utilities/svgs\";\n\nimport handleOverlap, {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  calcNewHourFromCoords,\n  calcNewMinuteFromCoords,\n  getOriginalBoxObject,\n  resetOriginalBox,\n} from \"../../utilities/dragutils\";\n\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\n\nimport locales from \"../../locales/en\";\n\n// day view header (row 1)\nconst dvHeaderDayNumber = document.querySelector(\".dayview--header-day__title\");\nconst dvHeaderDayOfWeek = document.querySelector(\n  \".dayview--header-day__number\"\n);\nconst dvHeaderInfo = document.querySelector(\".dayview--header-day__info\");\n\n// day view on top container (row 2)\nconst dvOnTop = document.querySelector(\".dayview--ontop-container\");\n\n// main grid wrapper (row 3) (scroll wrapper) (offsettop)\nconst dvContainer = document.querySelector(\".calendar__dayview\");\nconst dvGrid = document.querySelector(\".dayview__grid\");\nconst dvMainGrid = document.querySelector(\".dayview--main-grid\");\n\nconst dvSideGridWrapper = document.querySelector(\".dayview--side-grid\");\n\nexport default function setDayView(context, store, datepickerContext) {\n  // let entries = store.getDayEntries(context.getDate());\n  // let boxes = new Day(entries.day, entries.allDay);\n  let entries = null;\n  let boxes = null;\n  let firstY = null;\n\n  function firstLastDates(bxs) {\n    let longest = 0;\n    let shortest = 100;\n    for (let i = 0; i < bxs.length; i++) {\n      let [tempshort, templong] = [bxs[i].coordinates.y, bxs[i].coordinates.e];\n      if (templong > longest) {\n        longest = templong;\n      }\n      if (tempshort < shortest) {\n        shortest = tempshort;\n      }\n    }\n    let [h1, h2] = [Math.floor(shortest / 4), Math.floor(longest / 4)];\n    let [m1, m2] = [(shortest % 4) * 15, (longest % 4) * 15];\n    let [tempdate1, tempdate2] = [\n      new Date(bxs[0].start),\n      new Date(bxs[0].start),\n    ];\n    tempdate1.setHours(h1);\n    tempdate1.setMinutes(m1);\n    tempdate2.setHours(h2);\n    tempdate2.setMinutes(m2);\n    return formatStartEndTime(tempdate1, tempdate2);\n  }\n\n  function getDayviewHeaderEntryCount() {\n    let allboxes = boxes.getAllBoxes();\n    if (allboxes.length === 0) {\n      return \"no entries\";\n    }\n    let [endingToday, startingToday] = [0, 0];\n    let tempEndCase1;\n\n    for (let i = 0; i < allboxes.length; i++) {\n      const [start, end, current] = [\n        new Date(allboxes[i].start),\n        new Date(allboxes[i].end),\n        context.getDate(),\n      ];\n\n      if (start.getDate() === current.getDate()) {\n        startingToday++;\n      }\n\n      if (end.getDate() === current.getDate()) {\n        endingToday++;\n        tempEndCase1 = allboxes[i];\n      }\n    }\n\n    if (startingToday === 1 && endingToday === 1) {\n      return `1 entry ( ${formatStartEndTime(\n        new Date(allboxes[0].start),\n        new Date(allboxes[0].end)\n      )} )`;\n    }\n\n    if (startingToday > 1 && startingToday === endingToday) {\n      return `${startingToday} entries starting & ending today ( ${firstLastDates(\n        boxes.boxes\n      )} )`;\n    }\n\n    let fulltitle = \"\";\n    if (startingToday > 0) {\n      if (startingToday === 1) {\n        fulltitle += `${startingToday} entry starting today`;\n      } else {\n        fulltitle += `${startingToday} entries started`;\n      }\n    } else {\n      fulltitle += `no entries started`;\n    }\n\n    if (endingToday > 0) {\n      if (endingToday === 1) {\n        fulltitle += ` – ${endingToday} ending ( ${formatStartEndTime(\n          new Date(tempEndCase1.start),\n          new Date(tempEndCase1.end)\n        )} )`;\n      } else {\n        fulltitle += ` – ${endingToday} ending ( ${firstLastDates(\n          boxes.boxes\n        )} )`;\n      }\n    } else {\n      fulltitle += ` – no entries ending today`;\n    }\n    return fulltitle;\n  }\n\n  function createDVSideGridCells() {\n    for (let i = 0; i < 24; i++) {\n      let hour;\n      let md;\n\n      if (i === 0) {\n        hour = \"\";\n        md = \"\";\n      } else {\n        hour = i;\n        md = \"AM\";\n      }\n\n      if (hour > 12) {hour -= 12;}\n      if (i >= 12) {md = \"PM\";}\n\n      const dvSideGridCell = document.createElement(\"span\");\n      dvSideGridCell.classList.add(\"dv-sidegrid--cell\");\n      dvSideGridCell.textContent = `${hour} ${md}`;\n      dvSideGridWrapper.appendChild(dvSideGridCell);\n    }\n  }\n\n  function configHeader() {\n    [dvHeaderDayNumber, dvHeaderDayOfWeek, dvHeaderInfo].forEach((el) => {\n      el.innerText = \"\";\n    });\n\n    let gmtOffset = new Date().getTimezoneOffset() / 60;\n    if (gmtOffset < 0) {\n      gmtOffset = `+${Math.abs(gmtOffset)}`;\n    }\n\n    document.querySelector(\".dv-gmt\").textContent = `UTC ${context.getGmt()}`;\n    let day = context.getDay();\n    dvHeaderDayOfWeek.textContent = day;\n\n    if (context.isToday()) {\n      dvHeaderDayOfWeek.classList.add(\"dayview--header-day__number--today\");\n      dvHeaderDayNumber.style.color = \"var(--primary1)\";\n    } else {\n      dvHeaderDayOfWeek.classList.remove(\"dayview--header-day__number--today\");\n      dvHeaderDayNumber.removeAttribute(\"style\");\n    }\n    dvHeaderDayNumber.textContent =\n      locales.labels.weekdaysShort[context.getWeekday()].toUpperCase();\n    dvHeaderInfo.textContent = getDayviewHeaderEntryCount();\n  }\n\n  function resetDayview() {\n    dvMainGrid.innerText = \"\";\n    dvOnTop.innerText = \"\";\n    dvSideGridWrapper.innerText = \"\";\n    dvHeaderInfo.innerText = \"\";\n    dvContainer.onmousedown = null;\n    entries = null;\n    boxes = null;\n    firstY = null;\n  }\n\n  function openDvMore(entr) {\n    store.addActiveOverlay(\"morepopup\");\n    const morepopupoverlay = document.createElement(\"aside\");\n    morepopupoverlay.classList.add(\"dv--morepopup__overlay\");\n\n    const morepopup = document.createElement(\"aside\");\n    morepopup.classList.add(\"dv--morepopup\");\n    morepopup.style.left = `${dvOnTop.offsetLeft}px`;\n    morepopup.style.top = `${dvOnTop.offsetTop}px`;\n\n    const morepopupHeader = document.createElement(\"div\");\n    morepopupHeader.classList.add(\"dv--morepopup__header\");\n    const morepopupTitle = document.createElement(\"span\");\n    morepopupTitle.classList.add(\"dv--morepopup__title\");\n    morepopupTitle.textContent = \"Events spanning multiple days\";\n    const morepopupClose = document.createElement(\"span\");\n    morepopupClose.classList.add(\"dv--morepopup__close\");\n    morepopupClose.appendChild(createCloseIcon(\"var(--white3)\"));\n    morepopupHeader.append(morepopupTitle, morepopupClose);\n    const morepopupBody = document.createElement(\"div\");\n    morepopupBody.classList.add(\"dv--morepopup__body\");\n\n    const createMorePopupEntry = (entry) => {\n      const morepopupEntry = document.createElement(\"div\");\n      morepopupEntry.classList.add(\"dv--morepopup__entry\");\n      morepopupEntry.style.backgroundColor = `${store.getCtgColor(\n        entry.category\n      )}`;\n      morepopupEntry.setAttribute(\"data-sdvt-id\", entry.id);\n      const morepopupEntryTitle = document.createElement(\"span\");\n      morepopupEntryTitle.classList.add(\"dv--morepopup__entry-title\");\n      morepopupEntryTitle.textContent = entry.title;\n      const morepopupCategory = document.createElement(\"span\");\n      morepopupCategory.classList.add(\"dv--morepopup__entry-category\");\n      morepopupCategory.textContent = entry.category;\n      const morepopupEntryTime = document.createElement(\"span\");\n      morepopupEntryTime.classList.add(\"dv--morepopup__entry-time\");\n      morepopupEntryTime.textContent = formatEntryOptionsDate(\n        new Date(entry.start),\n        new Date(entry.end)\n      ).date;\n      morepopupEntry.append(\n        morepopupEntryTitle,\n        morepopupCategory,\n        morepopupEntryTime\n      );\n      return morepopupEntry;\n    };\n\n    entr.forEach((entry) => {\n      const morepopupEntry = createMorePopupEntry(entry);\n      morepopupBody.appendChild(morepopupEntry);\n    });\n\n    const closemp = () => {\n      morepopupoverlay.remove();\n      morepopup.remove();\n      store.removeActiveOverlay(\"morepopup\");\n      document.removeEventListener(\"keydown\", closeMpOnEsc);\n      morepopupoverlay.onclick = null;\n      morepopupClose.onclick = null;\n      morepopupBody.onclick = null;\n    };\n\n    const closeMpOnEsc = (e) => {\n      if (e.key === \"Escape\") {\n        closemp();\n        return;\n      }\n    };\n\n    function getEntrItem(e) {\n      if (getClosest(e, \".dv--morepopup__entry\")) {\n        openStackEntryOnTop(e, closemp);\n        return;\n      }\n    }\n\n    morepopup.append(morepopupHeader, morepopupBody);\n    document.body.prepend(morepopupoverlay, morepopup);\n    // document.body.appendChild(morepopup);\n    morepopupoverlay.onclick = closemp;\n    morepopupClose.onclick = closemp;\n    morepopupBody.onclick = getEntrItem;\n    // document.querySelector(\".dv--ontop__more\").onclick = null;\n    document.addEventListener(\"keydown\", closeMpOnEsc);\n  }\n\n  function openStackEntryOnTop(e, closearg) {\n    const target = e.target;\n    const id = target.getAttribute(\"data-sdvt-id\");\n    const setResetDv = () => {\n      console.log(\"reset\");\n    };\n\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const rect = target.getBoundingClientRect();\n\n    let [x, y] = placePopup(\n      400,\n      165,\n      [parseInt(rect.left), parseInt(rect.top) + 24],\n      [window.innerWidth, window.innerHeight],\n      false\n    );\n\n    closearg\n      ? store.setFormResetHandle(\"day\", closearg)\n      : store.setFormResetHandle(\"day\", setResetDv);\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = +y + \"px\";\n    modal.style.left = +x + \"px\";\n  }\n\n  function createStackableEntriesOnTop(entr) {\n    const dvOnTopGrid = document.createElement(\"div\");\n    dvOnTopGrid.classList.add(\"dayview--ontop__grid\");\n    entr.forEach((ent) => {\n      const dvOnTopEntry = document.createElement(\"div\");\n      dvOnTopEntry.classList.add(\"dayview--ontop__grid-item\");\n      dvOnTopEntry.textContent = ent.title;\n      dvOnTopEntry.style.backgroundColor = store.getCtgColor(ent.category);\n      dvOnTopEntry.setAttribute(\"data-sdvt-id\", ent.id);\n      dvOnTopGrid.appendChild(dvOnTopEntry);\n    });\n    dvOnTop.appendChild(dvOnTopGrid);\n  }\n\n  function createDvTop(entr) {\n    const dvtopgrid = document.createElement(\"div\");\n    dvtopgrid.classList.add(\"dv--ontop__grid\");\n\n    if (entr.length > 6) {\n      const moremessage = document.createElement(\"div\");\n      moremessage.classList.add(\"dv--ontop__more\");\n      moremessage.textContent = `${entr.length} more...`;\n      dvOnTop.appendChild(moremessage);\n      return;\n    } else {\n      createStackableEntriesOnTop(entr);\n    }\n  }\n\n  function renderBoxes() {\n    dvMainGrid.innerText = \"\";\n    dvOnTop.innerText = \"\";\n    createDvTop(boxes.getBoxesTop());\n    boxes.getBoxes().forEach((entry) => {\n      const y = entry.coordinates.y;\n      firstY == null || y < firstY ? (firstY = y) : null;\n      createBox(\n        dvMainGrid, // column\n        entry, // entry object\n        \"day\", // current view\n        store.getCtgColor(entry.category) // background color\n      );\n    });\n  }\n\n  /** RESIZE NORTH/SOUTH */\n  function resizeBoxNSDay(e, box) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    document.body.style.cursor = \"move\";\n    const col = box.parentElement;\n\n    let boxhasOnTop = false;\n    const boxorig = getOriginalBoxObject(box);\n    if (box.classList.contains(\"dv-box-ontop\")) {\n      boxhasOnTop = true;\n      resetStyleOnClick(\"day\", box);\n    }\n\n    box.classList.add(\"dv-box-resizing\");\n    const boxTop = box.offsetTop;\n    const headerOffset = parseInt(dvGrid.offsetTop);\n    createTemporaryBox(box, col, boxhasOnTop, \"day\");\n\n    let amountScrolled = parseInt(dvGrid.scrollTop);\n    const mousemove = (e) => {\n      let newHeight =\n        Math.round((e.pageY + amountScrolled - boxTop - headerOffset) / 12.5) *\n        12.5;\n\n      if (newHeight <= 12.5) {\n        box.style.height = \"12.5px\";\n        return;\n      } else if (newHeight + boxTop > 1188) {\n        return;\n      } else {\n        box.style.height = `${newHeight}px`;\n      }\n    };\n\n    function mouseup() {\n      document.querySelector(\".dv-temporary-box\").remove();\n      box.classList.remove(\"dv-box-resizing\");\n      if (boxhasOnTop) {\n        box.classList.add(\"dv-box-ontop\");\n      }\n\n      if (boxorig.height === box.offsetHeight) {\n        resetOriginalBox(box, boxorig);\n      } else {\n        setBoxTimeAttributes(box, \"day\");\n        const start = +box.getAttribute(\"data-dv-start-time\");\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\n        const time = calcTime(start, length);\n        box.setAttribute(\"data-dv-time\", time);\n        box.firstChild.nextSibling.firstElementChild.textContent = time;\n\n        updateBoxCoordinates(box, \"day\", boxes);\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\n        // check if new position overlaps with other boxes and handle\n        if (boxes.getBoxes().length > 1) {\n          handleOverlap(null, \"day\", boxes);\n        } else {\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\n        }\n      }\n\n      configHeader();\n      setStylingForEvent(\"dragend\", dvGrid, store);\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** DRAG NORTH/ SOUTH, EAST/ WEST */\n  function dragEngineDay(e, box) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    const col = box.parentElement;\n    let boxhasOnTop = false;\n\n    const startTop = +box.style.top.split(\"px\")[0];\n    const boxHeight = +box.style.height.split(\"px\")[0];\n    const startCursorY = e.pageY - parseInt(dvGrid.offsetTop);\n    const headerOffset = +dvGrid.getBoundingClientRect().top.toFixed(2);\n    let [tempX, tempY] = [e.pageX, e.pageY];\n    let [sX, sY] = [0, 0];\n    let hasStyles = false;\n\n    /** DRAG NORTH SOUTH */\n    const mousemove = (e) => {\n      sX = Math.abs(e.clientX - tempX);\n      sY = Math.abs(e.clientY - tempY);\n      if (!hasStyles) {\n        if (sX > 3 || sY > 3) {\n          hasStyles = true;\n          document.body.style.cursor = \"move\";\n          if (box.classList.contains(\"dv-box-ontop\")) {\n            boxhasOnTop = true;\n            resetStyleOnClick(\"day\", box);\n          }\n          box.classList.add(\"dv-box-dragging\");\n          createTemporaryBox(box, col, boxhasOnTop, \"day\");\n          sX = 0;\n          sY = 0;\n        }\n      }\n\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\n      if (newTop < 0 || currentCursorY < 0) {\n        newTop = 0;\n        return;\n      } else if (newTop + boxHeight > 1188) {\n        return;\n      }\n      box.style.top = `${newTop}px`;\n    };\n\n    const mouseup = () => {\n      const tempbox = document?.querySelector(\".dv-temporary-box\");\n      // if box did not move, no render needed\n      // click event to open form\n      if (tempbox === null) {\n        const setResetDv = () => {\n          setStylingForEvent(\"dragend\", dvGrid, store);\n          box.classList.remove(\"dv-box-clicked\");\n        };\n\n        box.classList.add(\"dv-box-clicked\");\n        const id = box.getAttribute(\"data-dv-box-id\");\n        const entry = store.getEntry(id);\n        const start = entry.start;\n        const color = box.style.backgroundColor;\n        const rect = box.getBoundingClientRect();\n\n        let [x, y] = placePopup(\n          400,\n          165,\n          [parseInt(rect.left) + 32, parseInt(rect.top) + 32],\n          [window.innerWidth, window.innerHeight],\n          false\n        );\n        store.setFormResetHandle(\"day\", setResetDv);\n        const setup = new FormSetup();\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\n        setup.setCategory(entry.category, color);\n        setup.setDates(getFormDateObject(start, entry.end));\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n        getEntryOptionModal(\n          context,\n          store,\n          entry,\n          datepickerContext,\n          finishSetup\n        );\n\n        const modal = document.querySelector(\".entry__options\");\n        if (window.innerWidth > 580) {\n          modal.style.top = +y + \"px\";\n          modal.style.left = x + \"px\";\n        } else {\n          modal.style.top = \"64px\";\n        }\n        // ******************\n      } else {\n        tempbox.remove();\n        box.classList.remove(\"dv-box-dragging\");\n        if (boxhasOnTop) {\n          box.classList.add(\"dv-box-ontop\");\n        }\n\n        setBoxTimeAttributes(box, \"day\");\n        const start = +box.getAttribute(\"data-dv-start-time\");\n        const length = +box.getAttribute(\"data-dv-time-intervals\");\n        const time = calcTime(start, length);\n        box.setAttribute(\"data-dv-time\", time);\n\n        box.children[1].children[0].textContent = time;\n        updateBoxCoordinates(box, \"day\", boxes);\n        boxes.updateStore(store, box.getAttribute(\"data-dv-box-id\"));\n        // check if new position overlaps with other boxes and handle\n        if (boxes.getBoxes().length > 1) {\n          handleOverlap(null, \"day\", boxes);\n        } else {\n          box.setAttribute(\"data-dv-box-index\", \"box-one\");\n        }\n\n        configHeader();\n        setStylingForEvent(\"dragend\", dvGrid, store);\n      }\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function handleDayviewClose() {\n    document.querySelector(\".dayview-temp-box\")?.remove();\n  }\n\n  function openDayviewForm(box, category, dates, type) {\n    store.setFormResetHandle(\"day\", handleDayviewClose);\n\n    const openForm = store.getRenderFormCallback();\n    const setup = new FormSetup();\n\n    const [submitType, id, title, description] = type;\n    setup.setSubmission(submitType, id, title, description);\n    if (submitType === \"create\") {\n      box.style.opacity = 0.9;\n    }\n\n    const [categoryName, color] = category;\n    setup.setCategory(categoryName, color);\n\n    const [start, end] = dates;\n    setup.setDates(getFormDateObject(start, end));\n\n    openForm();\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    fullFormConfig.getConfig(setup.getSetup());\n  }\n\n  /** CREATE BOX ON DRAG */\n  function createBoxOnDragDay(e) {\n    setStylingForEvent(\"dragstart\", dvGrid, store);\n    document.body.style.cursor = \"move\";\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\n\n    const box = document.createElement(\"div\");\n    box.setAttribute(\"class\", \"dv-box dv-box-dragging dayview-temp-box\");\n\n    // boxheader is static - create from template\n    const boxheader = createTempBoxHeader(\"day\");\n    const boxcontent = document.createElement(\"div\");\n    const boxtime = document.createElement(\"span\");\n    const boxtimeend = document.createElement(\"span\");\n    boxcontent.classList.add(\"dv-box__content\");\n    boxtime.classList.add(\"dv-box-time\");\n    boxtimeend.classList.add(\"dv-box-time\");\n\n    const headerOffset = parseInt(dvGrid.offsetTop);\n    const scrolled = parseInt(dvGrid.scrollTop);\n    const startCursorY = e.pageY - headerOffset;\n\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\n\n    let coords = { y: +y / 12.5, x: 1, h: 1, e: 2 };\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\n    let movedY = 0;\n\n    function mousemove(e) {\n      movedY += e.movementY;\n      let newHeight =\n        Math.round((e.pageY + scrolled - y - headerOffset) / 12.5) * 12.5;\n      if (newHeight <= 12.5) {\n        newHeight = 12.5;\n      }\n      if (newHeight + y > 1188) {\n        newHeight = 1187.5 - y;\n      }\n\n      box.style.height = `${newHeight}px`;\n      coords.h = +newHeight / 12.5;\n      coords.e = +coords.y + coords.h;\n\n      endhour = calcNewHourFromCoords(newHeight, y);\n      endmin = calcNewMinuteFromCoords(newHeight, y);\n\n      boxtime.style.wordBreak = \"break-word\";\n      boxtime.textContent = `${formatTime(starthour, startmin)} – `;\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n    }\n\n    // append content to temporary box\n    boxcontent.append(boxtime, boxtimeend);\n    box.append(boxheader, boxcontent);\n    e.target.appendChild(box);\n\n    function mouseup() {\n      if (movedY <= 20) {\n        if (+coords.y >= 92) {\n          coords.y = 92;\n          coords.e = 95;\n          coords.h = 3;\n          box.style.height = \"37.5px\";\n          box.style.top = \"1150px\";\n          [starthour, startmin] = [23, 0];\n          [endhour, endmin] = [23, 45];\n          boxtime.textContent = `${formatTime(starthour, startmin)} – `;\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n        } else {\n          coords.y = starthour * 4;\n          coords.e = +coords.y + 4;\n          coords.h = 4;\n          box.style.height = \"50px\";\n          box.style.top = `${+coords.y * 12.5}px`;\n          [starthour, startmin] = [starthour, 0];\n          [endhour, endmin] = [starthour + 1, 0];\n          boxtime.textContent = `${formatTime(starthour, startmin)} – `;\n          boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n        }\n      }\n\n      const datesData = getTempDates(\n        new Date(context.getDate()),\n        [starthour, endhour],\n        [startmin, endmin]\n      );\n\n      openDayviewForm(\n        box,\n        [tempcategory, color],\n        datesData,\n        [\"create\", null, null, null]\n      );\n\n      setStylingForEvent(\"dragend\", dvGrid, store);\n      document.removeEventListener(\"mouseup\", mouseup);\n      document.removeEventListener(\"mousemove\", mousemove);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  function renderBoxesForGrid() {\n    renderBoxes();\n    handleOverlap(null, \"day\", boxes);\n  }\n\n  function delegateDayView(e) {\n    const dvhresizehandle = getClosest(e, \".dv-box-resize-s\");\n    const dvhbox = getClosest(e, \".dv-box\");\n    const dvhgrid = getClosest(e, \".dayview--main-grid\");\n    const dvhboxTop = getClosest(e, \".dayview--ontop__grid-item\");\n    const dvhGrouped = getClosest(e, \".dv--ontop__more\");\n\n    // resize existing event\n    if (dvhresizehandle) {\n      resizeBoxNSDay(e, e.target.parentElement);\n      return;\n    }\n\n    // drag existing event\n    if (dvhbox) {\n      dragEngineDay(e, e.target);\n      return;\n    }\n\n    // drag empty space to create new event\n    if (dvhgrid) {\n      createBoxOnDragDay(e, e.target);\n      return;\n    }\n\n    // opens stacked all day events (less than 6)\n    if (dvhboxTop) {\n      openStackEntryOnTop(e);\n      return;\n    }\n\n    // opens grouped all day events (more than 6)\n    if (dvhGrouped) {\n      openDvMore(boxes.getBoxesTop());\n      return;\n    }\n  }\n\n  function handleScrollToOnInit() {\n    if (firstY !== null) {\n      let settop = +firstY * 12.5;\n      setTimeout(() => {\n        dvGrid.scrollTo({\n          top: settop,\n          behavior: \"instant\",\n        });\n      }, 4);\n    } else {\n      const hour = new Date().getHours() * 50;\n      setTimeout(() => {\n        dvGrid.scrollTo({\n          top: hour - 25 <= 0 ? 0 : hour - 25,\n          behavior: \"instant\",\n        });\n      }, 4);\n    }\n  }\n\n  const initDayView = () => {\n    dvSideGridWrapper.innerText = \"\";\n    createDVSideGridCells();\n    entries = store.getDayEntries(context.getDate());\n    boxes = new Day(entries.day, entries.allDay);\n    renderBoxesForGrid();\n    configHeader();\n    dvContainer.onmousedown = delegateDayView;\n    store.setResetPreviousViewCallback(resetDayview);\n    handleScrollToOnInit();\n  };\n\n  initDayView();\n}\n","import getEntryOptionModal from \"../menus/entryOptions\";\nimport setViews from \"../../config/setViews\";\nimport FormSetup from \"../forms/setForm\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport {\n  getClosest,\n  hextorgba\n} from '../../utilities/helpers';\nimport {\n  getdatearray,\n  getFormDateObject,\n  getDateFromAttribute,\n  longerThanDay,\n  formatStartEndDate\n} from \"../../utilities/dateutils\";\nimport { formatStartEndTimes } from \"../../utilities/timeutils\";\nimport locales from \"../../locales/en\";\n\nconst dateTimeTitle = document.querySelector(\".datetime-content--title\");\nconst listview = document.querySelector('.listview');\nconst listviewBody = document.querySelector('.listview__body');\n\nexport default function setListView(context, store, datepickerContext) {\n\n  let monthNames = locales.labels.monthsShort.map(x => x.toUpperCase());\n  let weekDayNames = locales.labels.weekdaysShort.map(x => x.toUpperCase());\n  let [todayYear, todayMonth, todayDay] = getdatearray(new Date());\n  /*************************************** */\n\n  function createRowGroups(entries) {\n    // use count to check for first rowgroup\n    let count = 1;\n    for (let [key, value] of Object.entries(entries)) {\n\n      const tempdate = new Date(\n        key.split(\"-\").map(x => parseInt(x, 10))\n      );\n      // {mumber} month, {number} day of month, {number} day of week\n      const [month, day, dow] = [\n        tempdate.getMonth(),\n        tempdate.getDate(),\n        tempdate.getDay(),\n      ];\n\n      const [wn, mn] = [weekDayNames[dow], monthNames[month]];\n\n      const rgheader = createRowGroupHeader(\n        wn,\n        mn,\n        day,\n        key,\n        count === 1 ? true : false\n      );\n      count = null;\n\n      // sort entries by end time if there are more than one per day\n      if (value.length > 1) {\n        value.sort((a, b) => {\n          return new Date(a.end) - new Date(b.end);\n        });\n      }\n\n      const rgContent = document.createElement(\"div\");\n      rgContent.classList.add(\"rowgroup-content\");\n      value.forEach((entry) => {\n        rgContent.append(createRowGroupCell(entry));\n      });\n\n      const rg = document.createElement('div');\n      rg.classList.add('listview__rowgroup');\n      rg.append(rgheader, rgContent);\n      listviewBody.appendChild(rg);\n    }\n  }\n\n\n  function createRowGroupHeader(weekname, monthname, day, date, settop) {\n    const rgHeader = document.createElement('div');\n    rgHeader.classList.add('rowgroup-header');\n    const rgHeaderDateNumber = document.createElement('div');\n\n    rgHeaderDateNumber.classList.add('rowgroup--header__datenumber');\n    rgHeaderDateNumber.textContent = day;\n    rgHeaderDateNumber.setAttribute(\"data-rgheader-date\", date);\n    const rgHeaderDate = document.createElement('div');\n    rgHeaderDate.classList.add('rowgroup--header__monthdow');\n    rgHeaderDate.textContent = `${monthname}, ${weekname}`;\n    \n    if (settop) {\n      rgHeaderDateNumber.classList.add(\"top-datenumber\");\n      rgHeaderDate.classList.add(\"top-monthdow\");\n    }\n\n    rgHeader.append(rgHeaderDateNumber, rgHeaderDate);\n    return rgHeader;\n  }\n\n  function createRowGroupCell(entry) {\n    const color = store.getCtgColor(entry.category);\n    const [start, end] = [new Date(entry.start), new Date(entry.end)];\n    let datetitle;\n    if (longerThanDay(start, end)) {\n      let tempyear;\n      if (start.getFullYear() !== end.getFullYear()) {\n        tempyear = +end.getFullYear() - 2000;\n      }\n\n      datetitle = `${monthNames[end.getMonth()]} ${end.getDate()} ${tempyear ? tempyear : \"\"}`;\n    } else {\n      datetitle = `${formatStartEndTimes(\n        [start.getHours(), end.getHours()],\n        [start.getMinutes(), end.getMinutes()]\n      )}`;\n    }\n\n    const rgCell = document.createElement('div');\n    rgCell.classList.add('rowgroup--cell');\n    rgCell.setAttribute('data-rgcell-id', entry.id);\n    const rgCellColor = document.createElement(\"div\");\n    rgCellColor.classList.add(\"rowgroup--cell__color\");\n    rgCellColor.style.backgroundColor = color;\n    const rgCellTime = document.createElement(\"div\");\n    rgCellTime.classList.add(\"rowgroup--cell__time\");\n    rgCellTime.textContent = datetitle;\n    const rgCellTitle = document.createElement(\"div\");\n    rgCellTitle.classList.add(\"rowgroup--cell__title\");\n    rgCellTitle.textContent = entry.title;\n    rgCell.append(rgCellColor, rgCellTime, rgCellTitle);\n    return rgCell;\n  }\n  /*************************************** */\n\n  function resetCellActive() {\n    const activeCell = document?.querySelector(\".rowgroup--cell-active\");\n    if (activeCell) {\n      activeCell.classList.remove(\"rowgroup--cell-active\");\n      activeCell.removeAttribute(\"style\");\n    }\n  }\n\n \n  function getRgContextMenu(cell) {\n    console.log(cell);\n    const id = cell.getAttribute(\"data-rgcell-id\");\n    cell.classList.add(\"rowgroup--cell-active\");\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    cell.style.backgroundColor = hextorgba(color, 0.7);\n\n    const rect = cell.getBoundingClientRect();\n    const height = cell.offsetHeight;\n    const rectTop = parseInt(rect.top) + height;\n    const rectLeft = parseInt(rect.left);\n    const modalHeight = 165;\n\n    let y = rectTop + 12;\n    if (rectTop + modalHeight > window.innerHeight) {\n      y = rectTop - modalHeight - height - 12;\n    }\n\n    let x = rectLeft;\n    if (rectLeft + 150 > window.innerWidth) {\n      x = window.innerWidth - 150;\n    }\n\n    // *** config & open form ***\n    store.setFormResetHandle(\"list\", resetCellActive);\n\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n  }\n\n  function setDayViewLV(target) {\n    let [year, month, day] = getDateFromAttribute(target, 'data-rgheader-date', \"month\");\n    context.setDate(year, month, day);\n    context.setDateSelected(day);\n    if (context.getSidebarState() === \"open\") {\n      datepickerContext.setDate(year, month, day);\n      datepickerContext.setDateSelected(day);\n    }\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n  }\n\n  function delegateListview(e) {\n    const headerNum = getClosest(e, \".rowgroup--header__datenumber\");\n    const rgCell = getClosest(e, \".rowgroup--cell\");\n\n    if (headerNum) {\n      setDayViewLV(e.target);\n      return;\n    }\n\n    if (rgCell) {\n      getRgContextMenu(rgCell);\n      return;\n    }\n  }\n\n  function resetListview() {\n    listviewBody.innerText = \"\";\n    listview.onclick = null;\n    monthNames = null;\n    weekDayNames = null;\n  }\n\n  const initListView = () => {\n    listviewBody.innerText = \"\";\n    store.setResetPreviousViewCallback(resetListview);\n\n    let activeEnt = store.getActiveEntries();\n    if (activeEnt.length === 0) {\n      dateTimeTitle.textContent = \"No Entries to Display\";\n      return;\n    } else {\n\n      let entries = store.sortBy(activeEnt, \"start\", \"desc\");\n   \n      let groupedEntries = entries.reduce((acc, curr) => {\n        const date = new Date(curr.start);\n        const [year, month, day] = getdatearray(date);\n        const datestring = `${year}-${month}-${day}`;\n\n        if (year < todayYear) {\n          return acc;\n        } else if (year === todayYear) {\n          if (month < todayMonth) {\n            return acc;\n          } else if (month === todayMonth && day < todayDay) {\n            return acc;\n          }\n        }\n\n        if (!acc[datestring]) { acc[datestring] = []; }\n        acc[datestring].push(curr);\n        return acc;\n      }, {});\n     let keys = Object.keys(groupedEntries);\n      const length = keys.length;\n      if (length === 0) {\n        dateTimeTitle.textContent = \"Schedule Clear\";\n      } else {\n        const earliestDate = new Date(keys[0].split(\"-\").map(x => parseInt(x)));\n\n        context.setDate(\n          earliestDate.getFullYear(),\n          earliestDate.getMonth(),\n          earliestDate.getDate()\n        );\n\n        context.setDateSelected(earliestDate.getDate());\n\n        if (context.getSidebarState === \"open\") {\n          datepickerContext.setDate(\n            earliestDate.getFullYear(),\n            earliestDate.getMonth(),\n            earliestDate.getDate()\n          );\n\n          datepickerContext.setDateSelected(earliestDate.getDate());\n        }\n\n        dateTimeTitle.textContent = formatStartEndDate(\n          keys[0],\n          keys[length - 1],\n          true\n        );\n      }\n\n      createRowGroups(groupedEntries);\n      listview.onclick = delegateListview;\n      activeEnt = null;\n      entries = null;\n      groupedEntries = null;\n      keys = null;\n    }\n  };\n\n  initListView();\n}","// rendering\nimport setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\n\n// Box query\nimport MonthBoxQuery from \"../../factory/queries\";\n\n// date utilities\nimport {\n  getDateFormatted,\n  compareDates,\n  createDateFromFormattedString,\n  getDateFromAttribute,\n  getFormDateObject,\n  generateTempStartEnd,\n  getDurationSeconds,\n} from \"../../utilities/dateutils\";\n\nimport { createCloseIcon } from \"../../utilities/svgs\";\n\n// general utilities\nimport {\n  getClosest,\n  hextorgba,\n  placePopup\n} from '../../utilities/helpers';\n\n// drag&drop / resize utilities\nimport { setStylingForEvent } from \"../../utilities/dragutils\";\n\n// naming\nimport locales from \"../../locales/en\";\n\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\nconst sidebar = document.querySelector(\".sidebar\");\nconst monthWrapper = document.querySelector(\".monthview--calendar\");\n\nexport default function setMonthView(context, store, datepickerContext) {\n  const boxquery = new MonthBoxQuery(\n    window.innerWidth <= 530 || window.innerHeight <= 470\n  );\n\n  function renderSidebarDatepickerMonth() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      context.setDateSelected(context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function handleOverlay(type) {\n    if (type === \"hide\") {\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      store.removeActiveOverlay(\"hide-resize-overlay\");\n    } else {\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n      store.addActiveOverlay(\"hide-resize-overlay\");\n    }\n  }\n\n  function setDayViewViaMonth() {\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n    renderSidebarDatepickerMonth();\n  }\n\n  function renderDayViewViaModal(parentDate) {\n    handleOverlay(\"hide\");\n    context.setDate(\n      parentDate.getFullYear(),\n      parentDate.getMonth(),\n      parentDate.getDate()\n    );\n    setDayViewViaMonth();\n  }\n\n  function createBox(id, category, top, title) {\n    const box = document.createElement(\"div\");\n    box.classList.add(\"monthview--box\");\n    box.setAttribute(\"data-monthview-id\", id);\n    box.style.backgroundColor = store.getCtgColor(category);\n    box.style.top = `${top}px`;\n    box.style.height = `${boxquery.getHeight()}px`;\n    box.style.width = \"100%\";\n\n    const boxtitle = document.createElement(\"div\");\n    boxtitle.classList.add(\"monthview--title\");\n    boxtitle.textContent = title;\n    box.appendChild(boxtitle);\n    return box;\n  }\n\n  function createGroupedCell(cellDate, count) {\n    const groupedBxs = document.createElement('div');\n    groupedBxs.classList.add('monthview--daygroup');\n    groupedBxs.setAttribute(\"data-mvgrouped-date\", cellDate);\n    groupedBxs.setAttribute(\"data-mvgrouped-length\", count);\n    const groupedDiv = document.createElement(\"div\");\n    groupedDiv.classList.add(\"monthview--grouped\");\n    const groupedTitle = document.createElement(\"div\");\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\n    groupedTitle.textContent = count + \" \" + \"more...\";\n\n    groupedDiv.appendChild(groupedTitle);\n    groupedBxs.appendChild(groupedDiv);\n    return groupedBxs;\n  }\n\n  function createCellHeader(cell, day) {\n    const daynumberAndMonth = day.getDate() + \" \" + locales.labels.monthsShort[day.getMonth()];\n    const daynumber = document.createElement('span');\n    daynumber.classList.add(\"monthview--daynumber\");\n   \n    if (day.getMonth() !== context.getMonth()) {\n      daynumber.textContent = daynumberAndMonth;\n      daynumber.classList.add(\"monthview--daynumber-prevnext\");\n    } else if (day.getDate() === 1) {\n      daynumber.textContent = daynumberAndMonth;\n    } else if (context.isToday(day)) {\n      daynumber.textContent = day.getDate();\n      daynumber.classList.add(\"monthview--daynumber-today\");\n      cell.classList.add(\"monthview--today\");\n    } else {\n      daynumber.textContent = day.getDate();\n    }\n    return daynumber;\n  }\n\n  function createCell(day, idx, entry, cellDate) {\n    const cellCoordinates = [\n      +day.getDay(),        // (x): day of week\n      Math.floor((idx) / 7) // (y): week of month\n    ];\n\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"monthview--day\");\n    cell.setAttribute(\"data-mv-date\", cellDate);\n    cell.setAttribute(\"data-mv-idx\", idx);\n    cell.setAttribute(\"data-mv-coordinates\", cellCoordinates);\n\n    const dayofmonth = document.createElement('button');\n    dayofmonth.classList.add('monthview--dayofmonth');\n    const cellContent = document.createElement('div');\n    cellContent.classList.add('monthview--daycontent');\n\n    if (day.getMonth() === context.getMonth() && day.getDate() === context.getDateSelected()) {\n      dayofmonth.classList.add(\"monthview--dayofmonth-selected\");\n    }\n    dayofmonth.appendChild(createCellHeader(cell, day));\n\n    let toptotal = 0; // box.style.top = (box index) * boxquery.getTop()\n\n    if (entry !== undefined && entry.length > 0) {\n\n      // handle instances where entries have same day but different month\n      entry = entry.filter((el) => new Date(el.start).getMonth() === day.getMonth());\n\n      if (entry.length >= 6) {\n        // automatically group if there are more than 6 entries on a day\n        cellContent.appendChild(createGroupedCell(cellDate, entry.length));\n        cellContent.classList.add(\"monthview--daycontent-grouped\");\n\n      } else {\n\n        // not grouped (less than 6 entries)\n        entry.forEach((el, idx) => {\n          if (compareDates(new Date(el.start), day)) {\n            if (idx > 0) {\n              toptotal += boxquery.getTop();\n            }\n            cellContent.appendChild(createBox(\n              el.id,        // entry id\n              el.category,  // backgroundColor\n              toptotal,     // style.top\n              el.title      // entry title\n            ));\n          }\n        });\n      }\n    }\n\n    cell.append(dayofmonth, cellContent);\n    monthWrapper.appendChild(cell);\n  }\n\n  function resetMonthview() {\n    monthWrapper.innerText = \"\";\n    monthWrapper.onmousedown = null;\n    monthWrapper.onclick = null;\n  }\n\n  function populateCells() {\n    monthWrapper.innerText = \"\";\n    let montharray = context.getMonthArray();\n    let monthentries = store.getMonthEntries(montharray);\n    let groupedEntries = store.getGroupedMonthEntries(monthentries);\n\n    montharray.length < 42\n      ? monthWrapper.classList.add(\"five-weeks\")\n      : monthWrapper.classList.remove(\"five-weeks\");\n\n    const dayHasEntry = (day) => {\n      const dayEntries = groupedEntries[day.getDate()];\n      return dayEntries !== undefined ? dayEntries : [];\n    };\n\n    montharray.forEach((day, idx) => {\n      createCell(day, idx, dayHasEntry(day), getDateFormatted(day));\n    });\n\n    montharray = null;\n    monthentries = null;\n    groupedEntries = null;\n  }\n\n  function getCoordinatesFromCell(cell) {\n    return cell.getAttribute(\"data-mv-coordinates\").split(\",\").map((x) => {\n      return parseInt(x);\n    });\n  }\n\n  function configureForStorage(newCell, clone) {\n    let [year, month, day] = getDateFromAttribute(newCell, \"data-mv-date\", \"month\");\n    const id = clone.getAttribute(\"data-monthview-id\");\n    let tempEntry = store.getEntry(id);\n\n    let [start, end] = [new Date(tempEntry.start), new Date(tempEntry.end)];\n    let tempdate = new Date(year, month, day);\n    let diff = getDurationSeconds(start, tempdate);\n    let endDay = end.getDate() + Math.floor(diff / 86400) + 1;\n\n    store.updateEntry(id, {\n      start: new Date(\n        year, month, day, start.getHours(), start.getMinutes()\n      ),\n      end: new Date(\n        end.getFullYear(), end.getMonth(), endDay, end.getHours(), end.getMinutes()\n      ),\n    });\n  }\n\n  function createTemporaryBox(box) {\n    const clone = box.cloneNode(true);\n    monthWrapper.prepend(clone);\n    clone.classList.add(\"box-mv-dragactive\");\n    clone.focus();\n  }\n\n  function configGroupedCellOnDrop(groupedCell) {\n    const count = groupedCell.getAttribute(\"data-mvgrouped-length\");\n    groupedCell.setAttribute(\"data-mvgrouped-length\", +count + 1);\n    groupedCell.firstChild.firstChild.textContent = `${groupedCell.getAttribute(\"data-mvgrouped-length\")} more...`;\n  }\n\n  function configClonedBoxForDrop(clone) {\n    clone.classList.remove(\"box-mv-dragactive\");\n    clone.style.top = \"0px\";\n    clone.style.left = \"0px\";\n    clone.style.width = \"100%\";\n    clone.style.height = `${boxquery.getHeight()}px`;\n  }\n\n  function resetCellOnDrop(bxs, transition) {\n    if (bxs.length === 0 || bxs === undefined) return;\n    for (let i = 0; i < bxs.length; i++) {\n\n      if (bxs[i] !== undefined && bxs[i] !== null && !bxs[i].classList.contains(\"monthview--box__form-temp\")) {\n        bxs[i].style.top = `${i * boxquery.getTop()}px`;\n\n        if (transition) {\n          bxs[i].classList.add(\"monthview--box__drop\");\n          setTimeout(() => {\n            bxs[i].classList.remove(\"monthview--box__drop\");\n          }, 200);\n\n        } else {\n          bxs[i].setAttribute(\"class\", \"monthview--box\");\n        }\n      }\n    }\n  }\n\n  function createGroupedCellOnDrop(cell, content, boxes, clone) {\n    const newGroupedCell = document.createElement('div');\n    newGroupedCell.classList.add('monthview--daygroup');\n    newGroupedCell.setAttribute(\"data-mvgrouped-date\", cell.getAttribute(\"data-mv-date\"));\n    newGroupedCell.setAttribute(\"data-mvgrouped-length\", boxes.length);\n\n    const groupedDiv = document.createElement(\"div\");\n    groupedDiv.classList.add(\"monthview--grouped\");\n    const groupedTitle = document.createElement(\"div\");\n    groupedTitle.classList.add(\"monthview--daycontent__grouped-title\");\n    groupedTitle.textContent = boxes.length + \" \" + \"more...\";\n\n    // reset cell content to empty then append grouped cell\n    content.innerText = \"\";\n    newGroupedCell.appendChild(groupedDiv);\n    groupedDiv.appendChild(groupedTitle);\n    content.appendChild(newGroupedCell);\n    content.classList.add(\"monthview--daycontent-grouped\");\n    clone.remove();\n  }\n\n  // the month view drag and drop system differs from the week & day views\n  // see readme for more info (section : drag engine)\n  function dragEngineMonth(e, box) {\n    setStylingForEvent(\"dragstart\", monthWrapper, store);\n    const startDragTime = Date.now();\n    const parent = box.parentElement;\n    const cell = parent.parentElement;\n    cell.classList.add(\"current-drop-zone\");\n    const targetModal = document?.querySelector(\".more-modal\");\n\n    const originalCellLength = parent.childElementCount;\n    const [cellX, cellY] = getCoordinatesFromCell(cell);\n\n    // create cloned box with class box-mv-dragactive\n    createTemporaryBox(box);\n    const clone = document?.querySelector(\".box-mv-dragactive\");\n    clone.setAttribute(\"data-box-mvx\", cellX);\n    clone.setAttribute(\"data-box-mvy\", cellY);\n\n    const cellRect = cell.getBoundingClientRect();\n    const cellWidth = parseFloat(cellRect.width.toFixed(2));\n    const cellHeight = parseFloat(cellRect.height.toFixed(2));\n    const wrapperLeft = parseInt(monthWrapper.offsetLeft);\n    const boxRect = box.getBoundingClientRect();\n    const boxWidth = parseFloat(boxRect.width);\n    const boxHeight = boxquery.getHeight();\n\n    clone.style.top = `${parent.offsetTop}px`;\n    clone.style.width = `${boxWidth}px`;\n    clone.style.height = `${boxHeight}px`;\n    clone.style.left = `${parent.offsetLeft}px`;\n    clone.classList.add(\"hide-mv-clone\")\n\n    let hasFiveWeeks = monthWrapper.classList.contains(\"five-weeks\");\n    let [startcursorx, startcursory] = [e.clientX, e.clientY];\n    let [movedX, movedY] = [0, 0];\n    let [lastX, lastY] = [cellX, cellY];\n    let gaveStyles = false;\n    let changeCursor = false;\n\n    const mousemove = e => {\n      movedX = Math.abs(e.clientX - startcursorx);\n      movedY = Math.abs(e.clientY - startcursory);\n      // Do not apply styles until user has moved the box at least 5px from starting position.\n      if (movedX > 1 || movedY > 1) {\n        if (!changeCursor) {\n          if (targetModal) {\n            targetModal.remove();\n          }\n          document.body.style.cursor = \"move\";\n          changeCursor = true;\n        }\n      }\n      if (movedX > 3 || movedY > 3) {\n        if (!gaveStyles) {\n          box.style.opacity = \"0.5\";\n          clone.classList.remove(\"hide-mv-clone\")\n        }\n        gaveStyles = true;\n      }\n\n      // *********************\n      // DRAG EAST / WEST\n      let newX = Math.floor((e.clientX - monthWrapper.offsetLeft) / cellWidth);\n      // min : first column\n      if (newX < 0) {\n        newX = 0;\n        return;\n      }\n      // max : last column\n      if (newX > 6) {\n        newX = 6;\n        return;\n      }\n\n      // update new left position once\n      if (lastX !== newX) {\n        let multX = (newX * cellWidth) + wrapperLeft;\n        clone.style.left = `${parseFloat(multX.toFixed(2))}px`;\n        lastX = newX;\n      }\n\n\n      // *********************\n      // DRAG NORTH / SOUTH\n      let newY = Math.floor((e.clientY - monthWrapper.offsetTop) / cellHeight);\n      // min : first row\n      if (newY < 0) {\n        newY = 0;\n        return;\n      }\n      // max : last row (5 weeks)\n      if (hasFiveWeeks && newY > 4) {\n        newY = 4;\n        return;\n      }\n      // max : last row (6 weeks)\n      if (!hasFiveWeeks && newY > 5) {\n        newY = 5;\n        return;\n      }\n\n      // ensure new top position is only calculated if the cursor has moved\n      // vertically across a cell border\n      if (lastY !== newY) {\n        let multY = (newY * cellHeight) + monthWrapper.offsetTop + 16;\n        clone.style.top = `${parseFloat(multY.toFixed(2))}px`;\n        lastY = newY;\n      }\n\n      // *********************\n      // .current-drop-zone\n      // Provides a callable reference to the\n      // final drop zone initiated on mouseup. \n      document.querySelector(\".current-drop-zone\")?.classList.remove(\"current-drop-zone\");\n      document.querySelector(`[data-mv-coordinates=\"${newX},${newY}\"]`).classList.add(\"current-drop-zone\");\n    };\n\n    const mouseup = () => {\n      const newCell = document?.querySelector(\".current-drop-zone\");\n      const endDragTime = Date.now();\n      const timeDiff = endDragTime - startDragTime;\n      const [newCellX, newCellY] = getCoordinatesFromCell(newCell);\n      newCell.classList.remove(\"current-drop-zone\");\n      const newCellContent = newCell.children[1];\n      const boxes = newCellContent?.children;\n      let boxmoved = false;\n\n      // newcell not found \n      // edge case, haven't come across this yet\n      if (newCell === undefined || newCell === null) {\n        setStylingForEvent(\"dragend\", monthWrapper, store);\n        box.style.opacity = \"1\";\n        clone.remove();\n        boxmoved = false;\n        document.removeEventListener(\"mousemove\", mousemove);\n        document.removeEventListener(\"mouseup\", mouseup);\n        return;\n      }\n\n      // handle case where box is not moved\n      // treat as click event if quick enough\n      if (newCellX === cellX && newCellY === cellY) {\n        boxmoved = false;\n        box.style.opacity = \"1\";\n        clone.remove();\n        if (targetModal) {\n          targetModal.remove();\n        }\n        if (timeDiff < 200) {\n          openFormOnClickMV(box, newCell);\n        }\n\n        // box was moved\n      } else {\n        // case 1 : cell has 6 or more items (more than 6 items)\n        // case 2 : cell is not empty and not group (1-5 items)\n        // case 3 : cell becomes group (6 items)\n        // case 4 : cell is empty\n        // cases 1-4 : run update after to update styling\n        // (click)     case 5 : box not moved \n        // movedX / movedY : cursor distance, i.e. (dragstart to dragend)\n        boxmoved = true;\n        if (boxes[0] !== undefined) {\n\n          // grouped cell\n          if (boxes[0].classList.contains(\"monthview--daygroup\")) {\n            // (case 1)\n            configGroupedCellOnDrop(boxes[0]);\n            configureForStorage(newCell, clone);\n            clone.remove();\n            box.remove();\n\n          } else {\n            // ***********************\n            // setup for cases 2 & 3 (not grouped/not empty)\n            configClonedBoxForDrop(clone);\n            clone.classList.remove(\"hide-mv-clone\")\n            newCellContent.insertBefore(clone, boxes[0]);\n            configureForStorage(newCell, clone);\n            box.remove();\n            // ***********************\n            if (boxes.length <= 5) {\n              // (case 2)\n              resetCellOnDrop(boxes, true);\n            } else {\n              // (case 3)\n              createGroupedCellOnDrop(newCell, newCellContent, boxes, clone);\n            }\n          }\n        } else {\n          // (case 4)\n          configClonedBoxForDrop(clone);\n          box.remove();\n          clone.classList.remove(\"hide-mv-clone\")\n          newCellContent.appendChild(clone);\n          configureForStorage(newCell, clone);\n          renderSidebarDatepickerMonth();\n        }\n      }\n\n      if (boxmoved) {\n        // & original cell empty \n        if (originalCellLength === 1) {\n          renderSidebarDatepickerMonth();\n        } else {\n          // & original cell not empty --- re calculate styling\n          resetCellOnDrop(parent.children, true);\n        }\n      }\n      /*******************/\n      setStylingForEvent(\"dragend\", monthWrapper, store);\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n      // document.removeEventListener(\"touchmove\", mousemove);\n      // document.removeEventListener(\"touchend\", mouseup);\n    };\n\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n    // document.addEventListener(\"touchmove\", mousemove);\n    // document.addEventListener(\"touchend\", mouseup);\n  }\n\n  function getMoreModalEntries(e) {\n    const [y, m, d] = getDateFromAttribute(\n      e.target.parentElement.parentElement, \"data-mv-date\", \"month\"\n    );\n    return store.getDayEntriesArray(new Date(y, m, d));\n  }\n\n  function closeMoreModalOnEscape(e) {\n    if (e.key === \"Escape\") {\n      closeMoreModal();\n    }\n  }\n\n  function closeMoreModal() {\n    const mm = document?.querySelector(\".more-modal\");\n    if (mm) {\n      mm.remove();\n    }\n    handleOverlay(\"hide\");\n    document.removeEventListener(\"keydown\", closeMoreModalOnEscape);\n  }\n\n  function createMoreModalBox(moreModalEntries) {\n    const modalContent = document.createElement(\"div\");\n    modalContent.classList.add(\"more-modal-content\");\n    for (let i = 0; i < moreModalEntries.length; i++) {\n      const entry = moreModalEntries[i];\n\n      const modalEntry = document.createElement(\"div\");\n      modalEntry.classList.add(\"more-modal-entry\");\n      modalEntry.style.top = `${i * 22}px`;\n\n      modalEntry.style.width = `calc(100% - 16px)`;\n      modalEntry.style.height = \"20px\";\n      modalEntry.setAttribute(\"data-monthview-id\", entry.id);\n      modalEntry.setAttribute(\"data-mvhidden-category\", entry.category);\n      modalEntry.style.backgroundColor = store.getCtgColor(entry.category);\n\n      const modalEntryTitle = document.createElement(\"div\");\n      modalEntryTitle.classList.add(\"more-modal-entry-title\");\n      modalEntryTitle.textContent = entry.title;\n\n      modalEntry.appendChild(modalEntryTitle);\n      modalContent.appendChild(modalEntry);\n    }\n    return modalContent;\n  }\n  // if more than four tasks exist in a cell, group them on next reload\n  function createMoreModal(e) {\n    const moreModalEntries = getMoreModalEntries(e);\n    handleOverlay(\"show\");\n    // parent : month cell\n    const parent = e.target.parentElement.parentElement;\n    const modal = document.createElement(\"div\");\n    modal.classList.add(\"more-modal\");\n    modal.setAttribute(\"data-mv-modal\", parent.getAttribute(\"data-mv-idx\"));\n\n    let modalHeight = (moreModalEntries.length * 28) + 64;\n\n    if (modalHeight > 400) {\n      modalHeight = 400;\n    }\n\n    const rect = parent.getBoundingClientRect();\n    let newleft = parseInt(rect.left);\n    let rectWidth = parseInt(rect.width);\n\n    let [x, y] = placePopup(\n      216,\n      modalHeight,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight],\n      true,\n      rectWidth\n      // parseInt(rect.width)\n    );\n\n    let maxH = +window.innerHeight - +y - 24;\n    modal.setAttribute(\"style\", `top: ${y}px; left: ${x}px; width: 216px; height: ${modalHeight}px; min-height: 120px; max-height: ${maxH}px;`);\n\n    const modalHeader = document.createElement(\"div\");\n    modalHeader.classList.add(\"more-modal-header\");\n    const modalHeaderTitle = document.createElement(\"div\");\n    modalHeaderTitle.classList.add(\"more-modal-header-title\");\n    const parentDate = createDateFromFormattedString(e.target.parentElement.parentElement.getAttribute(\"data-mv-date\"));\n\n    // dayn: daynumber (1, 2, 3, etc)\n    const dowspan = document.createElement(\"span\");\n    dowspan.classList.add(\"more-modal-header-title-dow\");\n    dowspan.textContent = locales.labels.weekdaysShort[parentDate.getDay()].toUpperCase();\n\n    const daynspan = document.createElement(\"span\");\n    daynspan.classList.add(\"more-modal-header-title-dayn\");\n    daynspan.textContent = parentDate.getDate();\n\n    const modalHeaderClose = document.createElement(\"div\");\n    modalHeaderClose.classList.add(\"more-modal-header-close\");\n    modalHeaderClose.appendChild(createCloseIcon(\"var(--white3)\"));\n    modalHeaderClose.setAttribute(\"data-tooltip\", \"Close\");\n\n    modalHeaderTitle.append(modalHeaderClose, dowspan, daynspan);\n    modalHeader.appendChild(modalHeaderTitle);\n    modal.append(modalHeader, createMoreModalBox(moreModalEntries)); //entries\n    monthWrapper.appendChild(modal);\n\n    // open day view (number click)\n    daynspan.addEventListener(\"click\", () => {\n      renderDayViewViaModal(parentDate);\n    }, { once: true });\n\n    // click away from modal to close\n    resizeoverlay.addEventListener(\"click\", (e) => {\n      closeMoreModal();\n    }, { once: true });\n\n    document.addEventListener(\"keydown\", closeMoreModalOnEscape);\n  }\n\n  function dragOutOfModal(e) {\n    const targetModal = document.querySelector(\".more-modal\");\n    const targetCellIdx = parseInt(targetModal.getAttribute(\"data-mv-modal\"));\n    const targetCell = document.querySelector(`[data-mv-idx=\"${targetCellIdx}\"]`);\n\n    const cloned = e.target.cloneNode(true);\n    cloned.setAttribute(\"class\", \"monthview--box\");\n    cloned.firstChild.setAttribute(\"class\", \"monthview--title\");\n    cloned.style.top = `${boxquery.getTop()}px`;\n    cloned.style.left = \"0px\";\n    cloned.style.width = \"100%\";\n    targetCell.lastChild.appendChild(cloned);\n\n    // update title of more modal to reflect one less entry\n    const moreModal = targetCell.lastChild.firstChild;\n    const newLength = parseInt(moreModal.getAttribute(\"data-mvgrouped-length\")) - 1;\n\n    if (newLength < 1) {\n      targetCell.lastChild.classList.remove(\"monthview--daycontent-grouped\");\n      moreModal.remove();\n      cloned.style.top = \"0px\";\n    } else {\n      moreModal.setAttribute(\"data-mvgrouped-length\", newLength);\n      moreModal.firstChild.firstChild.textContent = `${newLength} more...`;\n    }\n\n    // instantiate drag engine on cloned element and destroy the more modal instance\n    // \n    dragEngineMonth(e, cloned);\n    cloned.focus();\n    targetModal.style.opacity = \"0.8\";\n  }\n\n  function openDayView(e) {\n    const [year, month, day] = getDateFromAttribute(\n      e.target.parentElement, \"data-mv-date\", \"month\"\n    );\n    context.setDate(year, month, day);\n    context.setDateSelected(day);\n    setDayViewViaMonth();\n  }\n\n  function handleMonthviewEditFormClose() {\n    const tempcell = document.querySelector(\".monthview--daycontent__form-temp\");\n    if (!tempcell) return;\n\n    tempcell.removeAttribute(\"style\");\n    tempcell.classList.remove(\"monthview--daycontent__form-temp\");\n  }\n\n  // reset cell to original state if form is closed without any action\n  function handleMonthviewFormClose() {\n    const tempbox = document?.querySelector(\".monthview--box__form-temp\");\n    if (!tempbox) return;\n    const cellContent = tempbox.parentElement;\n    const cell = cellContent.parentElement;\n    cell.removeAttribute(\"style\");\n    cell.classList.remove(\"monthview--daycontent__form-temp\");\n    tempbox.remove();\n    resetCellOnDrop(cellContent.children, false);\n  }\n\n  function openFormOnClickMV(box, cell) {\n    const id = box.getAttribute(\"data-monthview-id\");\n    const entry = store.getEntry(id);\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const offsetColor = hextorgba(color, 0.5);\n    cell.classList.add(\"monthview--daycontent__form-temp\");\n    cell.style.backgroundColor = offsetColor;\n\n    const rect = cell.getBoundingClientRect();\n    let [x, y] = placePopup(\n      360,\n      165,\n      [parseInt(rect.left), parseInt(rect.top)],\n      [window.innerWidth, window.innerHeight]\n    );\n    // *** config & open form ***\n    store.setFormResetHandle(\"month\", handleMonthviewEditFormClose);\n\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    // Entry option modal will either trigger or release the above setup\n    // provide callback to finish setup and open form\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n    // *******************\n  }\n\n  function configNewBoxInsertion(cellWrapper, cell, category, color) {\n    const tempBox = createBox(\n      'temp',          // box.id\n      category,        // box.style.backgroundColor \n      0,               // box.style.top\n      \"( New Entry )\"  // box title\n    );\n    cellWrapper.scrollTop = 0;\n    tempBox.classList.add(\"monthview--box__form-temp\");\n    cell.classList.add(\"monthview--daycontent__form-temp\");\n    cell.style.backgroundColor = color;\n    if (cellWrapper.children.length > 0) {\n      cellWrapper.insertBefore(tempBox, cellWrapper.children[0]);\n      resetCellOnDrop(cellWrapper.children, false);\n    } else {\n      cellWrapper.appendChild(tempBox);\n    }\n  }\n\n  function createEntryOnEmptyTarget(e, cellWrapper) {\n    if (e.target.classList.contains(\"monthview--daycontent\")) {\n      // get first active category & create temp box with its color\n      const cell = cellWrapper.parentElement;\n      const rect = cell.getBoundingClientRect();\n      const [start, end] = generateTempStartEnd(\n        getDateFromAttribute(cell, \"data-mv-date\", \"month\")\n      );\n\n      // handle case where no category is active\n      let tempctg;\n      let color;\n      if (store.getActiveCategories() === undefined) {\n        let tempdefaultctg = store.getDefaultCtg();\n        tempctg = tempdefaultctg[0];\n        color = tempdefaultctg[1].color;\n      } else {\n        let tempcurrentctg = store.getFirstActiveCategoryKeyPair();\n        tempctg = tempcurrentctg[0];\n        color = tempcurrentctg[1];\n      }\n      const offsetcolor = hextorgba(color, 0.5);\n\n      configNewBoxInsertion(cellWrapper, cell, tempctg, offsetcolor);\n      store.setFormResetHandle(\"month\", handleMonthviewFormClose);\n      const openForm = store.getRenderFormCallback();\n      const setup = new FormSetup();\n\n      setup.setSubmission(\"create\", null, null, null);\n      setup.setCategory(tempctg, color);\n      setup.setDates(getFormDateObject(start, end));\n\n      openForm();\n      fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n      fullFormConfig.getConfig(setup.getSetup());\n      fullFormConfig.setFormStyle(\n        parseInt(rect.right),\n        parseInt(rect.top),\n        false,\n        null\n      );\n    }\n  }\n\n  function delegateMonthEvents(e) {\n    // delegates via monthview--box (monthWrapper) onmousedown\n    const monthviewBox = getClosest(e, \".monthview--box\");\n    const monthviewBoxHeader = getClosest(e, \".monthview--dayofmonth\");\n    const groupedBox = getClosest(e, \".monthview--daygroup\");\n    const groupedBoxItem = getClosest(e, \".more-modal-entry\");\n    const closeGroupedBox = getClosest(e, \".more-modal-header-close\");\n\n    // target : any box (task/event) within a day\n    // execute : drag and drop\n    if (monthviewBox) {\n      if (window.innerHeight <= 280) return;\n      dragEngineMonth(e, e.target);\n      return;\n    }\n\n    // target : cell day number\n    // execute : open day view of that day \n    if (monthviewBoxHeader) {\n      e.stopPropagation();\n      openDayView(e);\n      return;\n    }\n\n    // target : grouped box (more...)\n    // execute : create popup modal with all grouped entries of that day\n    if (groupedBox) {\n      createMoreModal(e);\n      return;\n    }\n\n    // target : entry within more modal \n    // execute : drag box (e.target) out of the more modal for reassignment, (same day works as well)\n    if (groupedBoxItem) {\n      if (window.innerHeight <= 300) return;\n      dragOutOfModal(e);\n      return;\n    }\n\n    // target : close btn within more modal\n    if (closeGroupedBox) {\n      closeMoreModal();\n      return;\n    }\n  }\n\n  function delegateNewBox(e) {\n    // delegates via monthview--daycontent (cellWrapper) onclick\n    // note that this is the same parent element that delegates mouse down events\n    // second delegation is needed to prevent the scrollbars that exist within the cells (days) from triggering the creation of a new entry on cell click\n    const emptyBoxClick = getClosest(e, \".monthview--daycontent\");\n    if (emptyBoxClick) {\n      if (window.innerHeight <= 300) return;\n      createEntryOnEmptyTarget(e, e.target);\n      return;\n    }\n  }\n\n  // event listener is added & removed @ ./setViews.js\n  // function getMonthviewResize() {\n  //   let lastquery = boxquery.getFlag();\n  //   console.log('ran')\n  //   boxquery.updateFlag();\n  //   // run once per query change\n  //   if (lastquery === boxquery.getFlag()) return;\n  //   const boxes = document.querySelectorAll(\".monthview--box\");\n  //   const querytop = boxquery.getTop();\n  //   const queryHeight = boxquery.getHeight();\n  //   const prevtop = boxquery.getPrevTop(querytop);\n  //   boxes.forEach(box => {\n  //     // always set height \n  //     box.style.height = `${queryHeight}px`;\n  //     let currenttop = parseInt(box.style.top);\n  //     if (currenttop === 0) {\n  //       return;\n  //     } else {\n  //       // get previous query top to find index of curren top then calc\n  //       let idx = currenttop / prevtop;\n  //       box.style.top = `${idx * querytop}px`;\n  //     }\n  //   });\n  // }\n\n  const initMonth = () => {\n    populateCells();\n    monthWrapper.onmousedown = delegateMonthEvents;\n    monthWrapper.onclick = delegateNewBox;\n    store.setResetPreviousViewCallback(resetMonthview);\n    // const handleMVResize = debounce(getMonthviewResize, 40);\n    // store.setResizeHandle(\"month\", handleMVResize);\n  };\n\n  initMonth();\n}","import setViews from \"../../config/setViews\";\nimport setSidebarDatepicker from \"../menus/sidebarDatepicker\";\nimport fullFormConfig from \"../forms/formUtils\";\nimport FormSetup from \"../forms/setForm\";\nimport getEntryOptionModal from \"../menus/entryOptions\";\nimport { Week } from \"../../factory/entries\";\nimport locales from \"../../locales/en\";\nimport calcTime, { formatTime } from \"../../utilities/timeutils\";\n\nimport {\n  createCloseIcon,\n  createMeatballVertIcon,\n  createExpandDownIcon\n} from \"../../utilities/svgs\";\n\nimport {\n  formatStartEndDate,\n  getTempDates,\n  getFormDateObject,\n  getDateFromAttribute,\n  getDayOrdinal\n} from \"../../utilities/dateutils\";\n\nimport handleOverlap, {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  getOriginalBoxObject,\n} from \"../../utilities/dragutils\";\n\nimport { getClosest, placePopup } from \"../../utilities/helpers\";\n\n// main app sidebar\nconst sidebar = document.querySelector('.sidebar');\n// calendar overlay\nconst resizeoverlay = document.querySelector(\".resize-overlay\");\n// weekview main grid wrapper & children\nconst main = document.querySelector(\".weekview\");\nconst container = document.querySelector(\".weekview--calendar\");\nconst weekviewHeader = document.querySelector(\".weekview--header\");\nconst weekviewHeaderDayNumber = document.querySelectorAll(\".weekview--header-day__number\");\n\nconst weekviewGrid = document.querySelector(\".weekview__grid\");\nconst weekviewSideGrid = document.querySelector(\".weekview--sidebar\");\n\nconst topCols = document.querySelectorAll(\".allday--col\");\n\nconst cols = document.querySelectorAll(\".week--col\");\n\nexport default function setWeekView(context, store, datepickerContext) {\n  const weekArray = context.getWeekArray();\n  let entries = store.getWeekEntries(weekArray);\n  let boxes = new Week(entries.day, entries.allDay);\n  let firstY = null;\n\n  function setDayView(e) {\n    let [yr, mo, da] = getDateFromAttribute(e.target, \"data-weekview-date\");\n    context.setDate(yr, mo, da);\n    context.setDateSelected(da);\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n  }\n\n  function createWVSideGridCells() {\n    for (let i = 0; i < 24; i++) {\n      let hour;\n      let md;\n\n      if (i === 0) {\n        hour = \"\";\n        md = \"\";\n      } else {\n        hour = i;\n        md = \"AM\";\n      }\n\n      if (hour > 12) {hour -= 12;}\n      if (i >= 12) {md = \"PM\";}\n\n      const wvSideGridCell = document.createElement(\"span\");\n      wvSideGridCell.classList.add(\"sidegrid-cell\");\n      wvSideGridCell.textContent = `${hour} ${md}`;\n      weekviewSideGrid.appendChild(wvSideGridCell);\n    }\n  }\n\n  function configureDaysOfWeek() {\n    document.querySelector(\".wv-gmt\").textContent = `UTC ${context.getGmt()}`;\n    let hasToday;\n    let hasSelected;\n    let dayNumbers = [];\n    let ymd = [];\n    const today = context.getToday();\n    let [ty, tm, td] = [today.getFullYear(), today.getMonth(), today.getDate()];\n\n    weekArray.forEach((day, idx) => {\n      let [y, m, d] = [\n        day.getFullYear(),\n        day.getMonth(),\n        day.getDate(),\n      ];\n\n      dayNumbers.push(d);\n      ymd.push(`${y}-${m}-${d}`);\n\n      if (d === context.getDateSelected() && m === context.getMonth()) {\n        hasSelected = d;\n      }\n\n      if (d === td && m === tm && y === ty) {\n        hasToday = d;\n      }\n    });\n\n    dayNumbers.forEach((num, idx) => {\n      if (num === hasSelected) {\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--selected\");\n      } else {\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--selected\");\n      }\n\n      if (num === hasToday) {\n        weekviewHeaderDayNumber[idx].classList.add(\"wvh--today\");\n      } else {\n        weekviewHeaderDayNumber[idx].classList.remove(\"wvh--today\");\n      }\n\n      weekviewHeaderDayNumber[idx].textContent = num;\n      weekviewHeaderDayNumber[idx].setAttribute(\"data-weekview-date\", ymd[idx]);\n      topCols[idx].setAttribute(\"data-wvtop-day\", num);\n    });\n  }\n\n  function renderSidebarDatepickerWeek() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function resetWeekviewBoxes() {\n    cols.forEach(col => { col.innerText = \"\"; });\n    topCols.forEach(col => { col.innerText = \"\"; });\n    main.onmousedown = null;\n    weekviewHeader.onclick = null;\n    weekviewSideGrid.innerText = \"\";\n  }\n\n  function renderBoxes() {\n    cols.forEach(col => { col.innerText = \"\"; });\n    topCols.forEach(col => { col.innerText = \"\"; });\n\n    boxes.getBoxes().forEach((entry) => {\n      const y = entry.coordinates.y;\n      firstY == null || y < firstY ? (firstY = y) : null;\n      const col = cols[+entry.coordinates.x];\n      createBox(col, entry, \"week\", store.getCtgColor(entry.category));\n    });\n\n    const boxt = boxes.getBoxesTopLengths();\n    for (const k in boxt) {\n      const col = topCols[+k];\n      createBoxesTop(col, boxt[k]);\n    }\n  }\n\n  function createBoxesTop(col, len) {\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"allday__cell\");\n    cell.classList.add(\"allday__cell--active\");\n\n    const taskicons = document.createElement(\"div\");\n    taskicons.classList.add(\"wv-ad--taskicons\");\n\n    const icon = document.createElement(\"div\");\n    icon.classList.add(\"wv-ad--taskicon\");\n    icon.style.backgroundColor = \"#6F0C2B\";\n    taskicons.appendChild(icon);\n\n    const celltitle = document.createElement(\"div\");\n    celltitle.classList.add(\"wv-ad--celltitle\");\n    celltitle.textContent = `${len} more`;\n    const cellexpand = document.createElement(\"div\");\n    cellexpand.classList.add(\"wv-ad--cellexpand\");\n    cellexpand.appendChild(createExpandDownIcon(\"var(--white3)\"));\n\n    cell.append(taskicons, celltitle, cellexpand);\n    col.appendChild(cell);\n  }\n\n  function createAllDayModalCell(entry, idx, col, handleCloseCallback) {\n    const cell = document.createElement(\"div\");\n    cell.classList.add(\"allday-modal__cell\");\n    cell.setAttribute(\"data-allday-modal-cell\", idx);\n    cell.setAttribute(\"data-allday-modal-cell-id\", entry.id);\n    cell.style.backgroundColor = store.getCtgColor(entry.category);\n\n    const cellcontent = document.createElement(\"div\");\n    cellcontent.classList.add(\"allday-modal__cell-content\");\n\n    const cellIcons = document.createElement(\"div\");\n    cellIcons.classList.add(\"allday-modal__cell-action-icons\");\n\n    const celltitle = document.createElement(\"div\");\n    celltitle.classList.add(\"allday-modal__celltitle\");\n    celltitle.textContent = entry.title;\n\n    const cellendDate = document.createElement(\"div\");\n    cellendDate.classList.add(\"allday-modal__cellend-date\");\n    cellendDate.textContent = formatStartEndDate(\n      new Date(entry.start), new Date(entry.end)\n    );\n\n    const cellcategoryTitle = document.createElement(\"div\");\n    cellcategoryTitle.classList.add(\"allday-modal__cellcategory-title\");\n    cellcategoryTitle.textContent = \"category: \" + entry.category;\n\n    cellcontent.append(celltitle, cellcategoryTitle, cellendDate);\n    cellIcons.appendChild(createMeatballVertIcon(\"var(--taskcolor\"));\n    cell.append(cellcontent, cellIcons);\n    return cell;\n  }\n\n  function createAllDayModal(e, col, entries, idx, cell) {\n    let dayofweek = locales.labels.weekdaysLong[idx];\n    let daynumber = col.getAttribute(\"data-wvtop-day\");\n\n    const modal = document.createElement(\"div\");\n    modal.classList.add(\"allday-modal\");\n\n    const rect = col.getBoundingClientRect();\n    let entriesoffset;\n    if (entries.length < 4) {\n      entriesoffset = parseInt(55 * entries.length) + 60;\n    } else {\n      entriesoffset = parseInt(55 * 4) + 60;\n    }\n\n    let [x, y] = placePopup(\n      240,\n      entriesoffset,\n      [parseInt(rect.left), parseInt(rect.top) + 24],\n      [window.innerWidth, window.innerHeight],\n      true,\n      Math.floor((window.innerWidth - 36 - weekviewGrid.offsetLeft) / 7)\n    );\n\n    if (x + 250 > window.innerWidth) {\n      modal.style.left = window.innerWidth - 246 + \"px\";\n    } else {\n      modal.style.left = x + \"px\";\n    }\n\n    modal.style.top = y + \"px\";\n\n    const modalheader = document.createElement(\"div\");\n    modalheader.classList.add(\"allday-modal__header\");\n\n    const modaltitle = document.createElement(\"div\");\n    modaltitle.classList.add(\"allday-modal-title\");\n    modaltitle.textContent = `${dayofweek}, ${locales.labels.monthsLong[weekArray[idx].getMonth()]} ${daynumber}${getDayOrdinal(daynumber)}`;\n\n    const closeAlldayModalBtn = document.createElement(\"div\");\n    closeAlldayModalBtn.classList.add(\"close-allday-modal\");\n    closeAlldayModalBtn.appendChild(createCloseIcon(\"var(--white4\"));\n\n    const modalcontent = document.createElement(\"div\");\n    modalcontent.classList.add(\"allday-modal__content\");\n\n\n    function closealldayonEsc(e) {\n      if (e.key === \"Escape\") {\n        closealldaymodal();\n      }\n    }\n\n    // remove all listeners / functionality when context menu is opened\n    // do so separately from the closealldaymodal function so that the modal itself will still be visible when form/context menu is open\n    function resetalldaymodal() {\n    }\n    \n    function closealldaymodal() {\n      modal.remove();\n      modal.onmousedown = null;\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      resizeoverlay.onclick = null;\n      document.removeEventListener(\"keydown\", closealldayonEsc);\n      store.removeActiveOverlay(\"allday-modal\");\n      cell.firstChild.firstChild.style.backgroundColor = \"#6F0C2B\";\n      cell.classList.remove(\"allday-modal__cell--open\");\n    }\n\n    entries.forEach((entry, idx) => {\n      const cell = createAllDayModalCell(\n        entry, idx, col, closealldaymodal\n      );\n      modalcontent.appendChild(cell);\n    });\n\n    function delegateAllDayModal(e) {\n      const getCloseAdBtn = getClosest(e, \".close-allday-modal\");\n      const getMeatballBtn = getClosest(e, \".allday-modal__cell-action-icons\");\n\n      if (getCloseAdBtn) {\n        closealldaymodal();\n        return;\n      }\n\n      if (getMeatballBtn) {\n        getWeekViewContextMenu(\n          store.getEntry(e.target.parentElement.getAttribute(\"data-allday-modal-cell-id\")),\n          closealldaymodal,\n          e\n        );\n        return;\n      }\n    }\n\n    modalheader.append(modaltitle, closeAlldayModalBtn);\n    modal.append(modalheader, modalcontent);\n    main.insertBefore(modal, document.querySelector(\".weekview__top\"));\n    store.addActiveOverlay(\"allday-modal\");\n    resizeoverlay.onclick = closealldaymodal;\n    modal.onmousedown = delegateAllDayModal;\n    document.addEventListener(\"keydown\", closealldayonEsc);\n  }\n\n  function openAllDayModal(e, cell) {\n    const col = cell.parentElement;\n    cell.classList.add(\"allday-modal__cell--open\");\n    cell.firstChild.firstChild.style.backgroundColor = \"#01635b\";\n    const colidx = parseInt(col.getAttribute(\"data-allday-column\"));\n    let colentries = boxes.getBoxesByColumnTop(colidx);\n    if (colentries.length > 0) {\n      createAllDayModal(e, col, colentries, colidx, cell);\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n    }\n  }\n\n  function getcol(idx) {\n    return document.querySelector(`[data-column-index=\"${idx}\"]`);\n  }\n\n  function handleWeekviewFormClose() {\n    document.querySelector(\".temp-week-box\")?.remove();\n  }\n\n  function openWeekviewForm(box, coords, category, dates, type) {\n    store.setFormResetHandle(\"week\", handleWeekviewFormClose);\n\n    const openForm = store.getRenderFormCallback();\n    const setup = new FormSetup();\n\n    const [submitType, id, title, description] = type;\n    setup.setSubmission(submitType, id, title, description);\n    if (submitType === \"create\") { box.style.opacity = 0.9; }\n\n    const [categoryName, color] = category;\n    setup.setCategory(\n      categoryName,\n      color,\n    );\n\n    const [start, end] = dates;\n    setup.setDates(getFormDateObject(start, end));\n    openForm();\n\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n    fullFormConfig.getConfig(setup.getSetup());\n  }\n\n  // ***********************\n  // CONTEXT MENU SETUP\n  function getWeekViewContextMenu(entry, handleCloseCallback, e) {\n    const id = entry.id;\n    const start = entry.start;\n    const color = store.getCtgColor(entry.category);\n    const targetrect = e.target.getBoundingClientRect();\n    let [x, y] = placePopup(\n      400,\n      165,\n      [parseInt(targetrect.right), (e.clientY) + 28],\n      [window.innerWidth, window.innerHeight],\n    );\n\n    store.setFormResetHandle(\"week\", handleCloseCallback);\n    const setup = new FormSetup();\n    setup.setSubmission(\"edit\", id, entry.title, entry.description);\n    setup.setCategory(entry.category, color);\n    setup.setDates(getFormDateObject(start, entry.end));\n    fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n    const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n\n    getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n    const modal = document.querySelector(\".entry__options\");\n    modal.style.top = y + \"px\";\n    modal.style.left = x + \"px\";\n  }\n  // ***********************\n\n  /** DRAG NORTH, SOUTH, EAST, WEST */\n  function dragEngineWeek(e, box) {\n    setStylingForEvent(\"dragstart\", main, store);\n    const col = box.parentElement;\n    const originalColumn = col.getAttribute(\"data-column-index\");\n    let currentColumn = col.getAttribute(\"data-column-index\");\n    let boxhasOnTop = false;\n    box.setAttribute(\"data-box-col\", currentColumn);\n\n    const startTop = +box.style.top.split(\"px\")[0];\n    const boxHeight = +box.style.height.split(\"px\")[0];\n    let startCursorY = e.pageY - weekviewGrid.offsetTop;\n    let tempstartY = e.pageY;\n    let startCursorX = e.pageX;\n    let [movedX, movedY] = [0, 0];\n    let [sX, sY] = [0, 0];\n    let hasStyles = false;\n\n    /** DRAG NORTH SOUTH */\n    const mousemove = (e) => {\n      sX = Math.abs(e.clientX - startCursorX);\n      sY = Math.abs(e.clientY - tempstartY);\n      if (!hasStyles) {\n        if (sX > 3 || sY > 3) {\n          hasStyles = true;\n          document.body.style.cursor = \"move\";\n          if (box.classList.contains(\"box-ontop\")) {\n            boxhasOnTop = true;\n            resetStyleOnClick(\"week\", box);\n          }\n          box.classList.add(\"box-dragging\");\n          createTemporaryBox(box, col, boxhasOnTop, \"week\");\n          sX = 0;\n          sY = 0;\n        }\n      }\n\n      const headerOffset = weekviewGrid.offsetTop;\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newTop = Math.round((newOffsetY + startTop) / 12.5) * 12.5;\n\n      if (newTop < 0 || currentCursorY < 0) {\n        newTop = 0;\n        return;\n      } else if (newTop + boxHeight > 1188) {\n        return;\n      }\n\n      box.style.top = `${newTop}px`;\n      /** DRAG EAST/WEST */\n      const direction = e.pageX - startCursorX > 0 ? \"right\" : \"left\";\n      const currentCursorX = e.pageX;\n      let newOffsetX = startCursorX - currentCursorX;\n      let leftColX;\n      let rightColX;\n\n      if (+currentColumn - 1 >= 0) {\n        leftColX = parseInt(getcol(currentColumn - 1).getBoundingClientRect().right);\n      } else {\n        leftColX = null;\n      }\n\n      if (+currentColumn + 1 < cols.length) {\n        rightColX = parseInt(getcol(+currentColumn + 1).getBoundingClientRect().left);\n      } else {\n        rightColX = null;\n      }\n\n      if (direction === \"right\" && rightColX !== null) {\n        if (e.pageX >= rightColX) {\n          getcol(+currentColumn + 1).appendChild(box);\n          startCursorX = e.pageX;\n          currentColumn = +currentColumn + 1;\n          box.setAttribute(\"data-box-col\", +currentColumn);\n        }\n      }\n\n      if (direction === \"left\" && leftColX !== null) {\n        if (e.pageX <= leftColX) {\n          getcol(+currentColumn - 1).appendChild(box);\n          startCursorX = e.pageX;\n          currentColumn = +currentColumn - 1;\n          box.setAttribute(\"data-box-col\", +currentColumn);\n        }\n      }\n\n      movedY = newOffsetY;\n      movedX = newOffsetX;\n    };\n\n    function mouseup() {\n      const tempbox = document.querySelector(\".temporary-box\");\n      box.classList.remove(\"box-dragging\");\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\n\n      if (tempbox === null) {\n        // const reset\n        const setResetWv = () => {\n          setStylingForEvent(\"dragend\", main, store);\n          box.classList.remove(\"wv-box-clicked\");\n        };\n        box.classList.add(\"wv-box-clicked\");\n        const id = box.getAttribute(\"data-box-id\");\n        const entry = store.getEntry(id);\n        const start = entry.start;\n        const color = box.style.backgroundColor;\n        const rect = box.getBoundingClientRect();\n        let [x, y] = placePopup(\n          400,\n          165,\n          [parseInt(rect.left), parseInt(rect.top) + 56],\n          [window.innerWidth, window.innerHeight],\n          false,\n        );\n        store.setFormResetHandle(\"week\", setResetWv);\n\n        const setup = new FormSetup();\n        setup.setSubmission(\"edit\", id, entry.title, entry.description);\n        setup.setCategory(entry.category, color);\n        setup.setDates(getFormDateObject(start, entry.end));\n        fullFormConfig.setFormDatepickerDate(context, datepickerContext, start);\n\n        const finishSetup = () => fullFormConfig.getConfig(setup.getSetup());\n        getEntryOptionModal(context, store, entry, datepickerContext, finishSetup);\n\n        const modal = document.querySelector(\".entry__options\");\n        if (window.innerWidth > 580) {\n          modal.style.top = +y + \"px\";\n          modal.style.left = x + \"px\";\n        } else {\n          modal.style.top = \"64px\";\n        }\n\n      } else {\n        tempbox.remove();\n        setBoxTimeAttributes(box, \"week\");\n        const time = calcTime(\n          +box.getAttribute(\"data-start-time\"),\n          +box.getAttribute(\"data-time-intervals\")\n        );\n\n        box.setAttribute(\"data-time\", time);\n        box.children[1].children[0].textContent = time;\n\n        updateBoxCoordinates(box, \"week\", boxes);\n        boxes.updateStore(\n          store,\n          box.getAttribute(\"data-box-id\"),\n          weekArray\n        );\n        // if box is moved to a new column, update sidebar datepicker\n        if (currentColumn !== +originalColumn) {\n          renderSidebarDatepickerWeek();\n        };\n        // check if new position overlaps with other boxes and handle\n        let droppedCol = +box.getAttribute(\"data-box-col\");\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\n          handleOverlap(droppedCol, \"week\", boxes);\n        } else {\n          box.setAttribute(\"box-idx\", \"box-one\");\n        }\n        setStylingForEvent(\"dragend\", main, store);\n      }\n\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** RESIZE NORTH/SOUTH \n   * resizing will never trigger form\n  */\n  function resizeBoxNS(e, box) {\n    setStylingForEvent(\"dragstart\", main, store);\n    document.body.style.cursor = \"move\";\n\n    const col = box.parentElement;\n    const currentColumn = col.getAttribute(\"data-column-index\");\n    box.setAttribute(\"data-box-col\", currentColumn);\n\n    let boxhasOnTop = false;\n    let boxorig = getOriginalBoxObject(box);\n    if (box.classList.contains(\"box-ontop\")) {\n      boxhasOnTop = true;\n      resetStyleOnClick(\"week\", box);\n    }\n\n    box.classList.add(\"box-resizing\");\n    const boxTop = box.offsetTop;\n    createTemporaryBox(box, col, boxhasOnTop, \"week\");\n\n    const mousemove = (e) => {\n      const headerOffset = weekviewGrid.offsetTop;\n      let amountScrolled = Math.abs(parseInt(container.getBoundingClientRect().top));\n      if (amountScrolled == headerOffset) {\n        amountScrolled -= headerOffset;\n      } else if (container.getBoundingClientRect().top > 0) {\n        amountScrolled = headerOffset - amountScrolled;\n      } else {\n        amountScrolled += headerOffset;\n      }\n\n      const newHeight = Math.round(((e.pageY - boxTop - headerOffset) + amountScrolled) / 12.5) * 12.5;\n\n      if (newHeight <= 12.5) {\n        box.style.height = '12.5px';\n        return;\n      } else if (newHeight + parseInt(box.style.top) > 1188) {\n        return;\n      } else {\n        box.style.height = `${newHeight}px`;\n      }\n    };\n\n    const mouseup = (e) => {\n      document.querySelector(\".temporary-box\").remove();\n      box.classList.remove(\"box-resizing\");\n      if (boxhasOnTop) { box.classList.add(\"box-ontop\"); }\n\n      if (box.style.height === boxorig.height) {\n        if (boxhasOnTop) {\n          box.setAttribute(\"class\", boxorig.class);\n          box.style.left = boxorig.left;\n          box.style.width = boxorig.width;\n        }\n      } else {\n        setBoxTimeAttributes(box, \"week\");\n        const start = +box.getAttribute(\"data-start-time\");\n        const length = +box.getAttribute(\"data-time-intervals\");\n        const time = calcTime(start, length);\n        box.children[1].children[0].textContent = time;\n        updateBoxCoordinates(box, \"week\", boxes);\n\n        let droppedCol = +box.getAttribute(\"data-box-col\");\n        if (boxes.getBoxesByColumn(droppedCol).length > 1) {\n          handleOverlap(droppedCol, \"week\", boxes);\n        }\n\n        boxes.updateStore(\n          store,\n          box.getAttribute(\"data-box-id\"),\n          weekArray,\n        );\n      }\n\n      setStylingForEvent(\"dragend\", main, store);\n      document.removeEventListener(\"mousemove\", mousemove);\n      document.removeEventListener(\"mouseup\", mouseup);\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** Drag down empty column to create box */\n  function createBoxOnDrag(e) {\n    setStylingForEvent(\"dragstart\", main, store);\n    document.body.style.cursor = \"move\";\n    const [tempcategory, color] = store.getFirstActiveCategoryKeyPair();\n    const colIdx = parseInt(e.target.getAttribute(\"data-column-index\"));\n\n    const box = document.createElement('div');\n    box.setAttribute(\"class\", \"box box-dragging temp-week-box\");\n\n    // boxheader is static - create from template\n    const boxheader = createTempBoxHeader(\"week\");\n    const boxcontent = document.createElement('div');\n    const boxtime = document.createElement('span');\n    const boxtimeend = document.createElement('span');\n    boxcontent.classList.add('box__content');\n    boxtime.classList.add('box-time');\n    boxtimeend.classList.add('box-time');\n\n\n    const headerOffset = +weekviewGrid.offsetTop;\n    const scrolled = parseInt(weekviewGrid.scrollTop);\n    const startCursorY = e.pageY - weekviewGrid.offsetTop;\n\n    let y = Math.round((startCursorY + Math.abs(scrolled)) / 12.5) * 12.5;\n    box.setAttribute(\"style\", getBoxDefaultStyle(y, color));\n\n    let coords = { y: +y / 12.5, x: colIdx, h: 1, e: 2 };\n    let [starthour, startmin, endhour, endmin] = startEndDefault(y);\n\n    function mousemove(e) {\n      const currentCursorY = e.pageY - headerOffset;\n      let newOffsetY = currentCursorY - startCursorY;\n      let newHeight = Math.round((newOffsetY) / 12.5) * 12.5;\n\n      if (newHeight <= 12.5) { newHeight = 12.5; }\n      if (newHeight + y > 1188) { newHeight = 1187.5 - y; }\n      box.style.height = `${newHeight}px`;\n\n      coords.h = +newHeight / 12.5;\n      coords.e = +coords.y + coords.h;\n\n      endhour = Math.floor(((+newHeight + +y) / 12.5) / 4);\n      endmin = Math.floor(((+newHeight + +y) / 12.5) % 4) * 15;\n      boxtime.style.wordBreak = \"break-word\";\n      boxtime.textContent = `${formatTime(starthour, startmin)} – `;\n      boxtimeend.textContent = `${formatTime(endhour, endmin)}`;\n    }\n\n    boxcontent.append(boxtime, boxtimeend);\n    box.append(boxheader, boxcontent);\n    e.target.appendChild(box);\n\n    function mouseup() {\n      const datesData = getTempDates(\n        new Date(weekArray[colIdx]),\n        [starthour, endhour],\n        [startmin, endmin],\n      );\n\n      openWeekviewForm(\n        box,\n        coords,\n        [tempcategory, color],\n        datesData,\n        [\"create\", null, null, null],\n      );\n\n      setStylingForEvent(\"dragend\", main, store);\n      document.removeEventListener(\"mouseup\", mouseup);\n      document.removeEventListener(\"mousemove\", mousemove);\n    }\n    document.addEventListener(\"mousemove\", mousemove);\n    document.addEventListener(\"mouseup\", mouseup);\n  }\n\n  /** delegate via grid */\n  function delegateGridEvents(e) {\n\n    const getBoxResizeHandle = getClosest(e, \".box-resize-s\");\n    const getBox = getClosest(e, \".box\");\n    const getWeekCol = getClosest(e, \".week--col\");\n    const getAllDayCol = getClosest(e, \".allday--col\");\n\n\n    if (getBoxResizeHandle) {\n      resizeBoxNS(e, e.target.parentElement);\n      return;\n    }\n\n    if (getBox) {\n      dragEngineWeek(e, e.target);\n      return;\n    }\n\n    if (getWeekCol) {\n      createBoxOnDrag(e, e.target);\n      return;\n    }\n\n    if (getAllDayCol) {\n      if (e.target.childElementCount > 0) {\n        openAllDayModal(e, e.target);\n        return;\n      }\n    }\n  }\n\n  function renderDataForGrid() {\n    renderBoxes();\n    const colsToCheck = boxes.getColumnsWithMultipleBoxes();\n    colsToCheck.forEach(col => handleOverlap(col, \"week\", boxes));\n  }\n\n  /*\n  \n  */\n  function delegateWvHeader(e) {\n    const getHeaderDayNumber = getClosest(e, \".weekview--header-day__number\");\n    if (getHeaderDayNumber) {\n      setDayView(e);\n      return;\n    }\n\n  }\n\n  const initWeek = () => {\n    weekviewSideGrid.innerText = \"\";\n    createWVSideGridCells();\n    configureDaysOfWeek();\n    renderDataForGrid();\n    main.onmousedown = delegateGridEvents;\n    // need to use onclick to delegate header events in order to allow for tab + enter\n    weekviewHeader.onclick = delegateWvHeader;\n    store.setResetPreviousViewCallback(resetWeekviewBoxes);\n    if (firstY !== null) {\n      setTimeout(() => {\n        weekviewGrid.scrollTo({ top: Math.abs((+firstY * 12.5) - 25), behavior: \"instant\" });\n      }, 4);\n    }\n  };\n\n  initWeek();\n}","import setViews from \"../../config/setViews\";\nimport locales from \"../../locales/en\";\nimport { getClosest } from \"../../utilities/helpers\";\nimport { getDateFromAttribute } from \"../../utilities/dateutils\";\nimport setSidebarDatepicker from \"../../components/menus/sidebarDatepicker\";\nconst yearviewGrid = document.querySelector(\".calendar__yearview\");\nconst sidebar = document.querySelector(\".sidebar\");\n\nexport default function setYearView(context, store, datepickerContext) {\n\n  function renderSidebarDatepicker() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(\n        context.getYear(), context.getMonth(), context.getDay()\n      );\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function renderMonthCells() {\n    yearviewGrid.innerText = \"\";\n    let year = context.getYear();\n    let entries = store.getGroupedYearEntries(store.getYearEntries(year));\n    for (let i = 0; i < 12; i++) {\n      if (entries[i]) {\n        yearviewGrid.appendChild(createMonthCell(year, i, entries[i]));\n      } else {\n        yearviewGrid.appendChild(createMonthCell(year, i, []));\n      }\n    }\n\n    entries = null;\n    year = null;\n  }\n\n  function createMonthCell(year, month, entries) {\n    const today = context.getToday();\n    const [ty, tm, td] = [\n      +today.getFullYear(),\n      +today.getMonth(),\n      +today.getDate()\n    ];\n\n    const prevmonth = new Date(year, month, 0);\n    const daysInPrevMonth = prevmonth.getDate();\n    const nextmonth = new Date(year, month + 2, 0);\n    const currentMonth = new Date(year, month, 1);\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const firstDayOfMonth = currentMonth.getDay();\n\n    const cellWrapper = document.createElement(\"div\");\n    cellWrapper.classList.add(\"yv-monthcell\");\n\n    const cellHeader = document.createElement(\"div\");\n    cellHeader.classList.add(\"yv-monthcell__header\");\n\n    const cellHeaderRowOne = document.createElement(\"div\");\n    cellHeaderRowOne.classList.add(\"yv-monthcell__header--rowone\");\n    cellHeaderRowOne.textContent = locales.labels.monthsLong[month];\n\n    if (month === context.getMonth() && year === context.getYear()) {\n      cellHeaderRowOne.classList.add(\"yvmht-current\");\n      cellWrapper.classList.add(\"cell-current\");\n    }\n\n    // **************************\n    // cell header row two\n    const cellHeaderWeekDayNames = document.createElement(\"div\");\n    cellHeaderWeekDayNames.classList.add(\"yv-monthcell__header--weekdays\");\n\n    locales.labels.weekdaysNarrow.forEach((el) => {\n      const weekday = document.createElement(\"div\");\n      weekday.classList.add(\"yv-monthcell__header--weekday\");\n      weekday.textContent = el;\n      cellHeaderWeekDayNames.appendChild(weekday);\n    });\n\n\n    const cellBody = document.createElement(\"div\");\n    cellBody.classList.add(\"yv-monthcell__body\");\n\n    function populateMonths() {\n      let count = 0;\n      let prevmonthstart = daysInPrevMonth - firstDayOfMonth;\n\n      const createyvcell = (day, classname, year, month, current) => {\n        const daywrapper = document.createElement(\"div\");\n        daywrapper.classList.add(\"yv-monthcell__body--day-wrapper\");\n      \n        if (classname !== null) {\n          daywrapper.classList.add(classname);\n        }\n        \n        if (current) {\n          daywrapper.setAttribute(\"data-yv-date\", `${year}-${month}-${day}`);\n          daywrapper.textContent = day;\n          // check if day is selected\n          if (day === context.getDateSelected() && month === context.getMonth() && year === context.getYear()) {\n            daywrapper.classList.add(\"yvmb-selected\");\n          }\n      \n          // check if day is today\n          if (day === td && month === tm && year === ty) {\n            daywrapper.classList.add(\"yvmb-today\");\n          }\n      \n          // check if day has entry\n          if (entries[day]) {\n            daywrapper.classList.add(\"yvmb-has-entry\");\n          }\n        }\n      \n        return daywrapper;\n      };\n\n      // if first day of month is not sunday, add previous month days until the start of the current month\n      for (let i = prevmonthstart; i < daysInPrevMonth; i++) {\n        cellBody.appendChild(createyvcell(\n          i + 1,\n          \"yvmb-prevnext\",\n          prevmonth.getFullYear(),\n          prevmonth.getMonth(),\n          false,\n        ));\n        count++;\n      }\n\n      for (let i = 0; i < daysInMonth; i++) {\n        cellBody.appendChild(createyvcell(\n          i + 1,\n          null,\n          currentMonth.getFullYear(),\n          currentMonth.getMonth(),\n          true,\n        ));\n        count++;\n      }\n\n      // ensure that each month cell has 42 days, use next month days if necessary\n      // let i = 0;\n      // while (count < 42) {\n      //   i++;\n      //   cellBody.appendChild(createyvcell(\n      //     i,\n      //     \"yvmb-prevnext\",\n      //     nextmonth.getFullYear(),\n      //     nextmonth.getMonth(),\n      //     false,\n      //   ));\n      //   count++;\n      // }\n    }\n\n    cellHeader.append(cellHeaderRowOne, cellHeaderWeekDayNames);\n    populateMonths();\n    cellWrapper.append(cellHeader, cellBody);\n    return cellWrapper;\n  }\n\n  function handleDaySelection(e) {\n    const target = e.target;\n    const [tempy, tempm, tempd] = getDateFromAttribute(target, \"data-yv-date\", null);\n    context.setDate(tempy, tempm, tempd);\n    context.setDateSelected(tempd);\n    context.setComponent(\"day\");\n    setViews(\"day\", context, store, datepickerContext);\n    renderSidebarDatepicker();\n  }\n\n  function delegateYearEvents(e) {\n    if (getClosest(e, \".yv-monthcell__body--day-wrapper\")) {\n      handleDaySelection(e);\n      return;\n    }\n  }\n\n  function resetYearview() {\n    yearviewGrid.innerText = \"\";\n    yearviewGrid.onmousedown = null;\n  }\n\n  function initYearview() {\n    renderMonthCells();\n    yearviewGrid.onmousedown = delegateYearEvents;\n    store.setResetPreviousViewCallback(resetYearview);\n    const currentmonth = document?.querySelector(\".cell-current\");\n    if (currentmonth) {\n      setTimeout(() => {\n        yearviewGrid.scrollTo({\n          top: parseInt(currentmonth.offsetTop) - 100,\n          behavior: \"instant\",\n        });\n      }, 4);\n    }\n  };\n  initYearview();\n}","import { setTheme } from \"../utilities/helpers\";\nconst appBody = document.querySelector(\".body\");\n\nexport default function setAppDefaults(context, store) {\n  let animationStatus = store.getAnimationStatus();\n\n  const disableTransitionsOnLoad = () => {\n    setTimeout(() => {\n      appBody.classList.remove(\"preload\");\n    }, 4);\n  };\n\n  const setDefaultAnimationStatus = () => {\n    animationStatus ? appBody.classList.remove(\"disable-transitions\") : appBody.classList.add(\"disable-transitions\");\n  };\n\n  disableTransitionsOnLoad();\n  setTheme(context);\n  setDefaultAnimationStatus();\n}","import setViews from \"./setViews\";\nimport setDatepicker from \"../components/menus/datepicker\";\nimport setSidebarDatepicker from \"../components/menus/sidebarDatepicker\";\nimport handleSidebarCategories from \"../components/menus/sidebarCategories\";\nimport { getClosest, throttle } from \"../utilities/helpers\";\nimport setEntryForm from \"../components/forms/entryForm\";\nimport handleSidebarFooter from \"../components/menus/sidebarFooter\";\nimport handleShortCutsModal from \"../components/menus/shortcutsModal\";\nimport getSidebarSubMenu from \"../components/menus/sidebarSubMenu\";\nimport createGoTo from \"../components/forms/goto\";\nimport createCategoryForm from \"../components/menus/editCategory\";\n\nconst appBody = document.querySelector(\".body\");\nconst colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\n\nconst header = document.querySelector(\".h__container\");\nconst headerLogo = document.querySelector(\".logo\");\n\nconst toggleForm = document.querySelector(\".toggle-form\");\nconst sbToggleForm = document.querySelector(\".sb-toggle-form-btn\");\nconst sbToggleSubBtn = document.querySelector(\".sb-data-btn\");\nconst formOverlay = document.querySelector(\".form-overlay\");\nconst form = document.querySelector(\".entries__form\");\n\nconst datepicker = document.querySelector(\".datepicker\");\nconst datepickeroverlay = document.querySelector(\".datepicker-overlay\");\nconst dateTimeWrapper = document.querySelector(\".datetime-wrapper\");\nconst dateTimeBtn = document.querySelector(\".datetime-content\");\n\nconst sbDatepicker = document.querySelector(\".datepicker-sidebar\");\nconst sbDatepickerBody = document.querySelector(\".sbdatepicker__body--dates\");\nconst sbCategoriesWrapper = document.querySelector(\".sb__categories--body-form\");\n\nconst selectElement = document.querySelector(\".select__modal\");\nconst selectOverlay = document.querySelector(\".change-view--overlay\");\nconst optionswrapper = document.querySelector(\".change-view--wrapper\");\nconst options = document.querySelectorAll(\".view-option\");\n\nconst sidebar = document.querySelector(\".sidebar\");\nconst sbFooter = document.querySelector(\".sb__info\");\nconst sbCategories = document.querySelector(\".sb__categories\");\n\nconst viewsContainer = document.querySelector(\".container__calendars\");\nconst yearwrapper = document.querySelector(\".yearview\");\nconst monthwrapper = document.querySelector(\".monthview\");\nconst listviewBody = document.querySelector(\".listview__body\");\n\nconst collapsebtn = document.querySelector(\".collapse-view\");\n\nexport default function renderViews(context, datepickerContext, store) {\n  \n  function setColorScheme() {\n    const setlight = () => {\n      context.setColorScheme(\"light\");\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\n      appBody.classList.add(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setdark = () => {\n      context.setColorScheme(\"dark\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setcontrast = () => {\n      context.setColorScheme(\"contrast\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.add(\"contrast-mode\");\n    };\n\n    const currentScheme = context.getColorScheme();\n    if (currentScheme === \"light\") {\n      setdark();\n    } else if (currentScheme === \"dark\") {\n      setcontrast();\n    } else {\n      setlight();\n    }\n  }\n\n  function fullRender(component) {\n    setViews(component, context, store, datepickerContext);\n  }\n\n  function setInitialAttributes() {\n    selectElement.setAttribute(\"data-value\", `${context.getComponent().slice(0, 1).toUpperCase()}`);\n\n   // headerLogo.setAttribute(\"data-current-day-of-month\", new Date().getDate());\n  }\n\n  function renderSidebarDatepicker() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n      setSidebarDatepicker(context, store, datepickerContext);\n    }\n  }\n\n  function renderSidebarCategories() {\n    if (!sidebar.classList.contains(\"hide-sidebar\")) {\n      handleSidebarCategories(context, store, datepickerContext);\n      handleSidebarFooter(store);\n    }\n  }\n\n  function getPreviousDay() {\n    context.setPrevDay();\n    fullRender(\"day\");\n    context.setDateSelected(context.getDay());\n    renderSidebarDatepicker();\n  }\n\n  function getNextDay() {\n    context.setNextDay();\n    fullRender(\"day\");\n    context.setDateSelected(context.getDay());\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousWeek() {\n    context.setPrevWeek();\n    fullRender(\"week\");\n    renderSidebarDatepicker();\n  }\n\n  function getNextWeek() {\n    context.setNextWeek();\n    fullRender(\"week\");\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousMonth() {\n    context.setPrevMonth();\n    fullRender(\"month\");\n    renderSidebarDatepicker();\n  }\n\n  function getNextMonth() {\n    context.setNextMonth();\n    fullRender(\"month\");\n    renderSidebarDatepicker();\n  }\n\n  function getPreviousYear() {\n    context.setPrevYear();\n    fullRender(\"year\");\n    renderSidebarDatepicker();\n    return;\n  }\n\n  function getNextYear() {\n    context.setNextYear();\n    fullRender(\"year\");\n    renderSidebarDatepicker();\n    return;\n  }\n\n  /**\n   * handleTransition\n   * @desc  The main purpose of this function is to handle situations where a user is holding down a hotkey to navigate through previous and next periods. Rather than having the swipe fire every single time, it will wait until after the user has stopped holding down the hotkey.\n   * Same goes for swipe gestures/prev & next button clicks.\n   * \n   * @param {HTMLElement} view (current calendar view to be transitioned)\n   * @param {String} keyframeDirection (direction of the keyframe animation) prev/next period\n   * @param {Function} callback (load next and previous periods)\n   */\n  let tm = 250; // define timeout out of scope so that it can be \n  function handleTransition(view, keyframeDirection, callback) {\n    if (!store.getAnimationStatus()) {\n      callback();\n      return;\n    } else {\n      const removeslide = (dir) => {\n        dir === \"left\" ? view.classList.remove(\"transition--right\") : view.classList.remove(\"transition--left\");\n      };\n\n      if (!view.classList.contains(\"weekview--header\")) {\n        viewsContainer.style.overflowX = \"hidden\";\n        setTimeout(() => {\n          viewsContainer.style.overflowX = \"auto\";\n        }, 200);\n      }\n\n      removeslide(keyframeDirection);\n      const slide = `transition--${keyframeDirection}`;\n      if (view.classList.contains(slide)) {\n        // prevent transition from firing too often\n        callback();\n        tm += 250;\n      } else {\n        view.classList.add(slide);\n        setTimeout(() => {\n          view.classList.remove(slide);\n        }, tm);\n        callback();\n        tm = 250;\n      }\n    }\n  }\n\n  // define a means for opening the form then provide it to the store so that it can be accessed by other components\n  function handleForm() {\n    setEntryForm(context, store, datepickerContext);\n    form.setAttribute(\"style\", \"top:5%;left:5%;right:5%;bottom:5%;margin:auto;\");\n    form.classList.remove(\"hide-form\");\n    formOverlay.classList.remove(\"hide-form-overlay\");\n    store.addActiveOverlay(\"hide-form-overlay\");\n  }\n\n  // the submenu (meatball menu) adjacent to \"create\" button in sidebar\n  // opens instance of settings menu\n  function handleToggleSubmenu() {\n    //getSidebarSubMenu(store, context);\n  }\n\n  // open / close sidebar\n  // sidebar state (open / closed) is stored locally and will persist across sessions\n  // triggers via \"s\" keypress or by clicking on the hamburger menu icon\n  // will also trigger in instances where the user tries to create a new entry on a blank day but no categories are selected.\n  function handleBtnMainMenu() {\n    const currentSidebarState = context.getSidebarState();\n\n    if (currentSidebarState === \"hide\") {\n      toggleForm.onclick = handleForm;\n      sbToggleForm.onclick = null;\n      sbToggleSubBtn.onclick = null;\n      sbFooter.onmousedown = null;\n      sbCategories.onmousedown = null;\n      sbDatepicker.onclick = null;\n\n      // clear categories/datepicker content when inactive\n      setTimeout(() => {\n        sbDatepickerBody.innerText = \"\";\n        sbCategoriesWrapper.innerText = \"\";\n      }, 100);\n\n      viewsContainer.classList.remove(\"container__calendars-sb-active\");\n      sidebar.classList.add(\"hide-sidebar\");\n      toggleForm.classList.remove(\"hide-toggle--form\");\n      dateTimeWrapper.classList.remove(\"datetime-inactive\");\n      dateTimeBtn.removeAttribute(\"tabindex\");\n      listviewBody.removeAttribute(\"style\");\n\n    } else {\n      toggleForm.onclick = null;\n      sbToggleForm.onclick = handleForm;\n      sbToggleSubBtn.onclick = handleToggleSubmenu;\n\n      if (context.getComponent() === \"list\") {\n        listviewBody.style.width = \"100%\";\n        listviewBody.style.marginLeft = \"0\";\n      }\n\n      viewsContainer.classList.add(\"container__calendars-sb-active\");\n      sidebar.classList.remove(\"hide-sidebar\");\n      toggleForm.classList.add(\"hide-toggle--form\");\n      dateTimeWrapper.classList.add(\"datetime-inactive\");\n      dateTimeBtn.setAttribute(\"tabindex\", \"-1\");\n\n      /**\n       * @function resetdatepicker\n       * @desc if at any point the datepicker in the header is opened, it will provide a callback to the global store with instructions to close. This can only trigger if the user presses \"s\" on the keyboard (open sidebar toggle) while the datepicker is open.\n       */\n      const resetdatepicker = store.getResetDatepickerCallback();\n      if (resetdatepicker !== null) {\n        resetdatepicker();\n        store.setResetDatepickerCallback(null);\n      }\n\n      datepickerContext.setDate(\n        +context.getYear(), +context.getMonth(), +context.getDay()\n      );\n      datepickerContext.setDateSelected(+context.getDay());\n\n      renderSidebarCategories();\n      renderSidebarDatepicker();\n    }\n  }\n\n  function handleBtnToday() {\n    if (!context.isToday() && context.getComponent() !== \"list\") {\n      let tempdate = new Date();\n      context.setDate(\n        tempdate.getFullYear(),\n        tempdate.getMonth(),\n        tempdate.getDate(),\n      );\n\n      fullRender(context.getComponent());\n      renderSidebarDatepicker();\n    }\n  }\n\n  function handleBtnPrev() {\n    switch (context.getComponent()) {\n      case \"day\":\n        handleTransition(\n          document.querySelector(\".dayview--header-day__number\"),\n          \"right\",\n          getPreviousDay\n        );\n        break;\n      case \"week\":\n        handleTransition(\n          document.querySelector(\".weekview--header\"),\n          \"right\",\n          getPreviousWeek\n        );\n        break;\n      case \"month\":\n        handleTransition(monthwrapper, \"right\", getPreviousMonth);\n        break;\n      case \"year\":\n        handleTransition(yearwrapper, \"right\", getPreviousYear);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleBtnNext() {\n    switch (context.getComponent()) {\n      case \"day\":\n        handleTransition(\n          document.querySelector(\".dayview--header-day__number\"),\n          \"left\",\n          getNextDay\n        );\n        break;\n      case \"week\":\n        handleTransition(\n          document.querySelector(\".weekview--header\"),\n          \"left\",\n          getNextWeek\n        );\n        break;\n      case \"month\":\n        handleTransition(monthwrapper, \"left\", getNextMonth);\n        break;\n      case \"year\":\n        handleTransition(yearwrapper, \"left\", getNextYear);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function handleDatePickerBtn(e) {\n    datepicker.classList.remove(\"hide-datepicker\");\n    datepickeroverlay.classList.remove(\"hide-datepicker-overlay\");\n    datepickerContext.setDate(context.getYear(), context.getMonth(), context.getDay());\n    const rect = e.target.getBoundingClientRect();\n    const newDatepickerLeft = parseInt(rect.left);\n    // convert rect left into a percentage so that it scales with window resize\n    const perc = parseInt((newDatepickerLeft / window.innerWidth) * 100);\n    datepicker.setAttribute(\"style\", `left:${perc}%;top:12px;`);\n    setDatepicker(context, store, datepickerContext, \"header\");\n\n  }\n\n  function setOptionStyle(option) {\n    const views = ['day', 'week', 'month', 'year', 'list'];\n    const activeIndex = views.indexOf(option);\n    for (let i = 0; i < options.length; i++) {\n      if (i === activeIndex) {\n        options[i].classList.add(\"change-view--option__active\");\n      } else {\n        options[i].classList.remove(\"change-view--option__active\");\n      }\n    }\n  }\n\n  function closeOptionsModal() {\n    selectElement.classList.remove(\"selection--active\");\n    selectOverlay.style.display = \"none\";\n    selectOverlay.classList.add(\"toggle-options\");\n    optionswrapper.classList.add(\"toggle-options\");\n    optionswrapper.classList.remove(\"toggle-animate\");\n  }\n\n  function renderOption(option, initialRender) {\n    const comp = context.getComponent();\n    // console.log(comp, option)\n    if (option === \"week\" || option === \"day\") {\n      collapsebtn.onclick = handleCollapse;\n      collapsebtn.classList.remove(\"hide-cbt\");\n    } else {\n      collapsebtn.onclick = null;\n      collapsebtn.classList.add(\"hide-cbt\");\n    }\n\n    if (option === comp && !initialRender) return;\n    closeOptionsModal();\n    context.setComponent(option);\n    fullRender(option);\n    setOptionStyle(option);\n    // week datepicker is the only one that has any stylistic difference\n    if (comp || option === \"week\") {\n      renderSidebarDatepicker();\n    }\n    document.activeElement.blur();\n  }\n\n  function handleSelect(e) {\n    selectElement.classList.add(\"selection--active\");\n    selectOverlay.classList.remove(\"toggle-options\");\n    selectOverlay.style.display = \"block\";\n    optionswrapper.classList.remove(\"toggle-options\");\n    optionswrapper.classList.add(\"toggle-animate\");\n    const setOption = (e) => {\n      const option = e.target.getAttribute(\"data-view-option\");\n      renderOption(option);\n    };\n    optionswrapper.onclick = setOption;\n    selectOverlay.onclick = closeOptionsModal;\n  }\n\n  // EVENT DELEGATION : HEADER ELEMENTS\n  function delegateHeaderEvents(e) {\n    e.preventDefault();\n    const btnMainMenu = getClosest(e, \".menu\");\n    const btnToday = getClosest(e, \".btn-today\");\n    const btnPrev = getClosest(e, \".prev\");\n    const btnNext = getClosest(e, \".next\");\n    const dateTime = getClosest(e, \".datetime-content\");\n    const search = getClosest(e, \".h-search\");\n    const settings = getClosest(e, \".settings\");\n    const select = getClosest(e, \".select__modal\");\n\n    if (btnMainMenu) {\n      context.toggleSidebarState();\n      handleBtnMainMenu();\n      return;\n    }\n\n    if (btnToday) {\n      handleBtnToday();\n      return;\n    }\n\n    if (btnPrev) {\n      handleBtnPrev();\n      return;\n    }\n\n    if (btnNext) {\n      handleBtnNext();\n      return;\n    }\n\n    if (dateTime) {\n      handleDatePickerBtn(e);\n      return;\n    }\n\n    if (search) {\n      createGoTo(context, store, datepickerContext);\n      return;\n    }\n\n    if (settings) {\n      handleToggleSubmenu(e);\n      return;\n    }\n\n    if (select) {\n      handleSelect(e);\n      return;\n    }\n  }\n\n\n  function delegateGlobalKeyDown(e) {\n    const toggleChangeview = (e) => {\n      if (selectElement.classList.contains(\"selection--active\")) {\n        if (e.key.toLowerCase() === \"v\") {\n          closeOptionsModal();\n        }\n      } else {\n        handleSelect();\n      }\n    };\n\n    switch (e.key.toLowerCase()) {\n      // switch to day view\n      case \"d\":\n        renderOption(\"day\");\n        break;\n      case \"1\":\n        renderOption(\"day\");\n        break;\n\n      // switch to week view\n      case \"w\":\n        renderOption(\"week\");\n        break;\n      case \"2\":\n        renderOption(\"week\");\n        break;\n\n      // switch to month view\n      case \"m\":\n        renderOption(\"month\");\n        break;\n      case \"3\":\n        renderOption(\"month\");\n        break;\n\n      // switch to year view\n      case \"y\":\n        renderOption(\"year\");\n        break;\n      case \"4\":\n        renderOption(\"year\");\n        break;\n\n      // switch to list view\n      case \"l\":\n        renderOption(\"list\");\n        break;\n      case \"5\":\n        renderOption(\"list\");\n        break;\n\n      // toggle sidebar open/close\n      case \"s\":\n        context.toggleSidebarState();\n        handleBtnMainMenu();\n        break;\n\n      // toggle form open (close with escape)\n      case \"f\":\n        handleForm();\n        break;\n\n      // open \"views\" menu\n      case \"v\":\n        toggleChangeview(e);\n        break;\n\n      // (day/week) next month\n      case \"p\":\n        handleBtnPrev();\n        break;\n\n      // (day/week) prev month\n      case \"n\":\n        handleBtnNext();\n        break;\n\n      // set date to today\n      case \"t\":\n        handleBtnToday();\n        break;\n\n      // open submenu\n      case \"a\":\n        handleToggleSubmenu();\n        break;\n\n      // open keyboard shortcuts modal\n      case \"?\":\n        handleShortCutsModal(store);\n        break;\n      case \"/\":\n        handleShortCutsModal(store);\n        break;\n\n      // toggle between light/dark mode\n      case \"0\":\n        setColorScheme();\n        break;\n\n      // opens search modal\n      case \"g\":\n        createGoTo(context, store, datepickerContext);\n        break;\n\n      case \"+\":\n        createCategoryForm(store, {\n          name: \"new category\",\n          color: \"#2C52BA\",\n        }, false, null);\n\n      default:\n        break;\n    }\n  }\n\n  const getKeyPressThrottled = throttle(delegateGlobalKeyDown, 150);\n  const handleHeaderDelegation = throttle(delegateHeaderEvents, 150);\n\n  let [lk, lk2] = ['', ''];\n  function handleGlobalKeydown(e) {\n    if (!store.getShortcutsStatus()) return;\n    if (store.hasActiveOverlay()) return;\n\n    // prevent ctrl + key shortcuts from triggering at all\n    lk = e.key;\n    if (lk === \"Control\") {\n      lk2 = \"Control\";\n      return;\n    }\n    if (lk2 === \"Control\" && lk !== \"Control\") {\n      lk2 = \"\";\n      return;\n    }\n\n    getKeyPressThrottled(e);\n  }\n\n  function handleCollapse() {\n    const view = context.getComponent();\n    const headers = {\n      ['day']: {\n        component: document.querySelector(\".dayview--header\"),\n        collapse: \"dvh-collapse\",\n      },\n      ['week']: {\n        component: document.querySelector(\".weekview--header\"),\n        componentBody: document.querySelector(\".weekview__grid\"),\n        collapse: \"wvh-collapse\",\n        componentBodytoggle: \"wvh-body-collapse\"\n      },\n    };\n\n    const eyeIcons = {\n      on: document.querySelector(\".cv-svg-on\"),\n      off: document.querySelector(\".cv-svg-off\")\n    };\n\n    if (view === \"week\" || view === \"day\") {\n      eyeIcons.on.classList.toggle(\"hide-cbt\");\n      eyeIcons.off.classList.toggle(\"hide-cbt\");\n      headers[view].component.classList.toggle(headers[view].collapse);\n      if (view === \"week\") {\n        headers[view].componentBody.classList.toggle(headers[view].componentBodytoggle);\n      }\n    }\n  }\n\n  const appinit = () => {\n    /*************************/\n    // render initial view and set initial attributes\n    renderOption(context.getComponent(), true);\n    setInitialAttributes();\n    handleBtnMainMenu();\n\n    /*************************/\n    // supply callbacks to store for opening form and sidebar\n    store.setRenderFormCallback(handleForm);\n    const ensureSidebarIsOpen = () => {\n      context.setSidebarState(\"open\");\n      handleBtnMainMenu();\n    };\n    store.setRenderSidebarCallback(ensureSidebarIsOpen);\n\n    /*************************/\n    // establish global event listeners\n    header.onclick = throttle(handleHeaderDelegation, 150);\n    document.addEventListener(\"keydown\", handleGlobalKeydown);\n  };\n  appinit();\n}","import setHeader from \"../components/menus/header\";\nimport setYearView from \"../components/views/yearview\";\nimport setMonthView from \"../components/views/monthview\";\nimport setWeekView from \"../components/views/weekview\";\nimport setDayView from \"../components/views/dayview\";\nimport setListView from \"../components/views/listview\";\n// import setListView from \"../components/views/listview\"\n\nconst yearComponent = document.querySelector(\".yearview\");\nconst monthComponent = document.querySelector(\".monthview\");\nconst weekComponent = document.querySelector(\".weekview\");\nconst dayComponent = document.querySelector(\".dayview\");\nconst listComponent = document.querySelector(\".listview\");\n\nlet [prev1, prev2] = [null, null];\nexport default function setViews(component, context, store, datepickerContext) {\n  prev1 = prev2;\n  prev2 = component;\n\n  function hideViews() {\n    const views = [\n      yearComponent,\n      monthComponent,\n      weekComponent,\n      dayComponent,\n      listComponent\n    ];\n\n    const resetPrevView = store.getResetPreviousViewCallback();\n    if (prev1 !== null && resetPrevView !== null && prev1 !== prev2) {\n      resetPrevView();\n    }\n\n    \n    views.forEach((view) => {\n      view.classList.add(\"hide-view\");\n     \n    });\n  }\n\n  function initView(component) {\n    switch (component) {\n      case \"day\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setDayView(context, store, datepickerContext);\n        dayComponent.classList.remove(\"hide-view\");\n        break;\n      case \"week\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setWeekView(context, store, datepickerContext);\n        weekComponent.classList.remove(\"hide-view\");\n        break;\n      case \"month\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setMonthView(context, store, datepickerContext);\n        monthComponent.classList.remove(\"hide-view\");\n        // window.onresize = store.getResizeHandle(\"month\");\n        // window.addEventListener(\"resize\", store.getResizeHandle(\"month\"));\n        break;\n      case \"year\":\n        context.setComponent(component);\n        setHeader(context, component);\n        setYearView(context, store, datepickerContext);\n        yearComponent.classList.remove(\"hide-view\");\n        break;\n      case \"list\":\n        context.setComponent(component);\n        setHeader(context, component, store);\n        setListView(context, store, datepickerContext);\n        listComponent.classList.remove(\"hide-view\");\n        break;\n      default:\n        context.setComponent(\"month\");\n        setHeader(context, \"month\");\n        setMonthView(context, store, datepickerContext);\n        monthComponent.classList.remove(\"hide-view\");\n        break;\n    }\n  }\n\n  hideViews();\n  document.title = context.getMonthName();\n  initView(component);\n}","import { compareDates } from \"../utilities/dateutils\";\nimport locales from \"../locales/en\";\nconst labels = locales.labels;\n\n\n/*\n\"setDateDefaults\",\n\"setSchemaDefaults\",\n\"setDefaults\",\n\"getAllMethodNames\",\n\"getColorScheme\",\n\"setColorScheme\",\n\"setSidebarState\",\n\"toggleSidebarState\",\n\"getComponent\",\n\"setComponent\",\n\"getSidebarState\",\n\"setDay\",\n\"setMonth\",\n\"setYear\",\n\"setDate\",\n\"setDateSelected\",\n\"setPrevDay\",\n\"setPrevWeek\",\n\"setPrevMonth\",\n\"setPrevYear\",\n\"setNextDay\",\n\"setNextWeek\",\n\"setNextMonth\",\n\"setNextYear\",\n\n\"getGmt\",\n\"getDateSelected\",\n\"getDay\",\n\"getMonth\",\n\"getYear\",\n\"getDate\",\n\"getToday\",\n\"getWeek\",\n\"getWeekday\",\n\"getWeekArray\",\n\"getWeekRange\",\n\"getWeekNumber\",\n\"getMonthName\",\n\"getDaysInMonth\",\n\"getMonthArrayStartDay\",\n\"getMonthArrayStart\",\n\"getMonthArrayEndDay\",\n\"getMonthArrayEnd\",\n\"getMonthArray\",\n\"isToday\"\n*/\nclass Context {\n  constructor () {\n    this.colorScheme = \"dark\";\n    this.component = \"month\";\n    this.sidebarState = \"hide\";\n    this.date = new Date();\n    this.gmt = new Date().getTimezoneOffset() / 60;\n\n    this.dateSelected = 1;\n    this.daySelected = this.date.getDate();\n    this.monthSelected = this.date.getMonth();\n    this.yearSelected = this.date.getFullYear();\n\n    this.month = this.getMonth();\n    this.monthArray = this.getMonthArray();\n    this.week = this.getWeek();\n  }\n\n  setDateDefaults() {\n    if (localStorage.getItem(\"yearSelected\") === null) {\n      if (this.yearSelected === undefined) {\n        this.yearSelected = this.date.getFullYear();\n      }\n      Context.setLocalYear(this.yearSelected);\n    }\n\n    if (localStorage.getItem(\"monthSelected\") === null) {\n      if (this.monthSelected === undefined) {\n        this.monthSelected = this.date.getMonth();\n      }\n      Context.setLocalMonth(this.monthSelected);\n    }\n\n    if (localStorage.getItem(\"daySelected\") === null) {\n      if (this.daySelected === undefined) {\n        this.daySelected = this.date.getDate();\n      }\n      Context.setLocalDay(this.daySelected);\n    }\n\n    if (localStorage.getItem(\"dateSelected\") === null) {\n      if (this.dateSelected === undefined) {\n        this.dateSelected = 1;\n      }\n      Context.setLocalDateSelected(this.dateSelected);\n    }\n  }\n\n  setSchemaDefaults() {\n    if (localStorage.getItem(\"colorScheme\") === null) {\n      if (this.colorScheme === undefined) {\n        this.colorScheme = \"dark\";\n      }\n      Context.setLocalColorScheme(this.colorScheme);\n    }\n\n    if (localStorage.getItem(\"component\") === null) {\n      if (this.component === undefined) {\n        this.component = \"month\";\n      }\n      Context.setLocalComponent(this.component);\n    }\n\n    if (localStorage.getItem(\"sidebarState\") === null) {\n      if (this.sidebarState === undefined) {\n        this.sidebarState = \"hide\";\n      }\n      Context.setLocalSidebarState(this.sidebarState);\n    }\n  }\n\n  setDefaults() {\n    this.setSchemaDefaults();\n    this.setDateDefaults();\n  }\n\n  /* **************************************** */\n  /* LOCAL STATE MANAGEMENT */\n  static getLocalDay() {\n    return +localStorage.getItem(\"daySelected\") === undefined ? 1 : +localStorage.getItem(\"daySelected\");\n  }\n\n  static getLocalMonth() {\n    return +localStorage.getItem(\"monthSelected\") === undefined ? 1 : +localStorage.getItem(\"monthSelected\");\n  }\n\n  static getLocalYear() {\n    return +localStorage.getItem(\"yearSelected\") === undefined ? 1 : +localStorage.getItem(\"yearSelected\");\n  }\n\n  static getLocalDateSelected() {\n    return +localStorage.getItem(\"dateSelected\");\n  }\n\n  static getLocalComponent() {\n    return localStorage.getItem(\"component\");\n  }\n\n  static getLocalColorScheme() {\n    return localStorage.getItem(\"colorScheme\");\n  }\n\n  static getLocalSidebarState() {\n    return localStorage.getItem(\"sidebarState\");\n  }\n\n  static setLocalDay(day) {\n    localStorage.setItem(\"daySelected\", day);\n  }\n\n  static setLocalMonth(month) {\n    localStorage.setItem(\"monthSelected\", month);\n  }\n\n  static setLocalYear(year) {\n    localStorage.setItem(\"yearSelected\", year);\n  }\n\n  static setLocalDateSelected(date) {\n    localStorage.setItem(\"dateSelected\", date);\n  }\n\n  static setLocalComponent(component) {\n    localStorage.setItem(\"component\", component);\n  }\n\n  static setLocalSidebarState(state) {\n    localStorage.setItem(\"sidebarState\", state);\n  }\n\n  static setLocalColorScheme(colorScheme) {\n    localStorage.setItem(\"colorScheme\", colorScheme);\n  }\n  /* **************************************** */\n\n\n  /* **************************************** */\n  /* TESTING -- DEV ONLY */\n  getAllMethodNames() {\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\n      (method) => {\n        return method !== \"constructor\" && method !== \"getStoreStats\";\n      }\n    );\n  }\n\n  /* **************************************** */\n  /* APPLICATION THEME (DARK/LIGHT) */\n  getColorScheme() {\n    return Context.getLocalColorScheme();\n  }\n  setColorScheme(colorScheme) {\n    this.colorScheme = colorScheme;\n    Context.setLocalColorScheme(colorScheme);\n  }\n  setSidebarState(state) {\n    this.sidebarState = state;\n    Context.setLocalSidebarState(state);\n  }\n  toggleSidebarState() {\n    this.sidebarState = this.getSidebarState() === \"open\" ? \"hide\" : \"open\";\n    Context.setLocalSidebarState(this.sidebarState);\n  }\n  /* **************************************** */\n\n\n  /* **************************************** */\n  /* APPLICATION CURRENT COMPONENT */\n  getComponent() {\n    return Context.getLocalComponent() || \"month\";\n  }\n  setComponent(component) {\n    this.component = component;\n    Context.setLocalComponent(component);\n  }\n  getSidebarState() {\n    return Context.getLocalSidebarState() || \"hide\";\n  }\n  /* **************************************** */\n\n\n\n  /* **************************************** */\n  /* APPLICATION DATE HANDLING */\n  // set the current date for the following\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\n  setDay(day) {\n    this.daySelected = day;\n    Context.setLocalDay(day);\n  }\n\n  setMonth(month) {\n    this.monthSelected = month;\n    Context.setLocalMonth(month);\n  }\n\n  setYear(year) {\n    this.yearSelected = year;\n    Context.setLocalYear(year);\n  }\n\n  setDate(year, month, day) {\n    this.setYear(year);\n    this.setMonth(month);\n    this.setDay(day);\n  }\n\n  setDateSelected(date) {\n    this.dateSelected = date;\n    Context.setLocalDateSelected(date);\n  }\n  /* ************** */\n  // Take current date and set it to previous day/week/month/year\n  /* PREVIOUS : DAY, WEEK, MONTH, YEAR */\n  setPrevDay() {\n    const prevDay = new Date(\n      this.getYear(), this.getMonth(), this.getDay() - 1\n    );\n\n    this.setDate(\n      prevDay.getFullYear(), prevDay.getMonth(), prevDay.getDate()\n    );\n  }\n\n  setPrevWeek() {\n    const prevWeek = new Date(\n      this.getYear(), this.getMonth(), this.getDay() - 7\n    );\n\n    this.setDate(\n      prevWeek.getFullYear(), prevWeek.getMonth(), prevWeek.getDate()\n    );\n  }\n\n  setPrevMonth() {\n    const prevMonth = new Date(\n      this.getYear(), +this.getMonth() - 1, this.getDay()\n    );\n\n    this.setDate(\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\n    );\n  }\n\n  setPrevYear() {\n    this.setYear(this.getYear() - 1);\n  }\n  /* ************** */\n\n  // Take current date and set it to next day/week/month/year\n  /* NEXT : DAY, WEEK, MONTH, YEAR */\n  setNextDay() {\n    const nextDay = new Date(this.getYear(), this.getMonth(), this.getDay() + 1);\n    this.setDate(nextDay.getFullYear(), nextDay.getMonth(), nextDay.getDate());\n  }\n\n  setNextWeek() {\n    const nextWeek = new Date(this.getYear(), this.getMonth(), this.getDay() + 7);\n    this.setDate(nextWeek.getFullYear(), nextWeek.getMonth(), nextWeek.getDate());\n  }\n\n  setNextMonth() {\n    const nextMonth = new Date(this.getYear(), this.getMonth() + 1, this.getDay());\n    this.setDate(nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate());\n  }\n\n  setNextYear() {\n    this.setYear(this.getYear() + 1);\n  }\n  /* ************** */\n\n\n  /* ************** */\n  /* GETTERS */\n  getGmt() {\n    return this.gmt;  // UTC Offset\n  }\n\n  getDateSelected() {\n\n    return +Context.getLocalDateSelected();\n    // return +this.dateSelected;\n  }\n\n  getDay() {\n    return +Context.getLocalDay();\n    // return +this.daySelected;\n  }\n\n  getMonth() {\n    // const month = Context.getLocalMonth();\n    return +Context.getLocalMonth();\n    // return +this.monthSelected;\n  }\n\n  getYear() {\n    return +Context.getLocalYear() || this.date.getFullYear();\n    // return +this.yearSelected;\n  }\n\n  getDate() {\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\n  }\n\n  getToday() {\n    return this.date;\n  }\n\n  getWeek() {\n    let tempdate = this.getDate();\n    tempdate.setDate(tempdate.getDate() - tempdate.getDay());\n    return tempdate;\n  }\n\n  getWeekday() {\n    return this.getDate().getDay();\n  }\n\n  getWeekArray() {\n    let week = this.getWeek();\n    let weekArray = [];\n    for (let i = 0; i < 7; i++) {\n      if (i < 6) {\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i));\n      } else {\n        weekArray.push(new Date(week.getFullYear(), week.getMonth(), week.getDate() + i, 23, 59, 59, 999));\n      }\n    }\n    return weekArray;\n  }\n\n  getWeekRange() {\n    let weekArray = this.getWeekArray();\n    let [m1, m2] = [weekArray[0].getMonth(), weekArray[6].getMonth()];\n    let [d1, d2] = [weekArray[0].getDate(), weekArray[6].getDate()];\n\n    if (m1 === m2) {\n      return `${labels.monthsShort[m1]} ${d1} – ${d2}, ${weekArray[0].getFullYear()}`;\n    } else {\n      return `${labels.monthsShort[m1]} ${d1} – ${d2} ${labels.monthsShort[m2]}, ${weekArray[1].getFullYear()}`;\n    }\n  }\n\n  // ** not in use **\n  getWeekNumber() {\n    // returns week index 1 - 52\n    let d = new Date(Date.UTC(this.getYear(), this.getMonth(), this.getDay()));\n    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));\n    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n  }\n\n  getMonthName() {\n    return labels.monthsLong[this.getMonth()];\n  }\n\n  getDaysInMonth() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\n  }\n\n  getMonthArrayStartDay() {\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\n  }\n\n  getMonthArrayStart() {\n    let monthArrayStart = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\n      monthArrayStart.push(new Date(year, month, 0 - i));\n    }\n    return monthArrayStart;\n  }\n\n  getMonthArrayEndDay() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\n  }\n\n  getMonthArrayEnd(handleFourWeeks) {\n    let monthArrayEnd = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n\n    if (handleFourWeeks) {\n      for (let i = 1; i < 8; i++) {\n        monthArrayEnd.push(new Date(year, +month + 1, i));\n      }\n      return monthArrayEnd;\n    } else {\n      for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\n        monthArrayEnd.push(new Date(year, +month + 1, i));\n      }\n      return monthArrayEnd;\n    }\n  }\n\n  getMonthArray() {\n    let monthArray = [];\n    let start = this.getMonthArrayStart();\n    let daysInMonth = this.getDaysInMonth();\n    let [year, month] = [this.getYear(), this.getMonth()];\n    let end = this.getMonthArrayEnd();\n\n    for (let i = start.length - 1; i >= 0; i--) {\n      monthArray.push(start[i]);\n    }\n\n    for (let i = 1; i <= daysInMonth; i++) {\n      monthArray.push(new Date(year, month, i));\n    }\n\n    monthArray[monthArray.length - 1].setHours(23, 59, 59, 999);\n\n    if (monthArray.length === 28 && end.length < 7) {\n      end = this.getMonthArrayEnd(true);\n    }\n\n    for (let i = 0; i < end.length; i++) {\n      if (i === end.length - 1) {\n        end[i].setHours(23, 59, 59, 999);\n      }\n      monthArray.push(end[i]);\n    }\n\n    return monthArray;\n  }\n\n  isToday(testDate) {\n    if (!testDate) {\n      return compareDates(this.getDate(), new Date());\n    } else {\n      return compareDates(testDate, new Date());\n    }\n  }\n}\n\n/**\n  * DatepickerContext\n  * @class\n  * @classdesc date context for datepicker -- \n  * slimmed down version of @Context class \n  * @property {Date} date - today's date\n  * @property {Date} dateSelected - selected date\n  * @property {number} daySelected - selected day\n  * @property {number} monthSelected - selected month\n  * @property {number} yearSelected - selected year\n  * @property {number} month - current month\n  * @property {Array} monthArray - current month array\n  * \n */\nclass DatepickerContext {\n  constructor () {\n    this.date = new Date();\n    this.dateSelected = this.date.getDate();\n    this.daySelected = this.date.getDate();\n    this.monthSelected = this.date.getMonth();\n    this.yearSelected = this.date.getFullYear();\n    this.month = this.getMonth();\n    this.monthArray = this.getMonthArray();\n  }\n\n  setDefaults() {\n    if (localStorage.getItem(\"pickerYearSelected\") === null) {\n      if (this.yearSelected === undefined) {\n        this.yearSelected = this.date.getFullYear();\n      }\n      DatepickerContext.setLocalPickerYear(this.yearSelected);\n    }\n\n    if (localStorage.getItem(\"pickerMonthSelected\") === null) {\n      if (this.monthSelected === undefined) {\n        this.monthSelected = this.date.getMonth();\n      }\n      DatepickerContext.setLocalPickerMonth(this.monthSelected);\n    }\n\n    if (localStorage.getItem(\"pickerDaySelected\") === null) {\n      if (this.daySelected === undefined) {\n        this.daySelected = this.date.getDate();\n      }\n      DatepickerContext.setLocalPickerDay(this.daySelected);\n    }\n\n    if (localStorage.getItem(\"pickerDateSelected\") === null) {\n      if (this.dateSelected === undefined) {\n        this.dateSelected = this.date.getDate();\n      }\n      DatepickerContext.setLocalPickerDateSelected(this.dateSelected);\n    }\n  }\n\n  /* **************************************** */\n  /* LOCAL STATE MANAGEMENT */\n  static getLocalPickerDay() {\n    return +localStorage.getItem(\"pickerDaySelected\");\n  }\n\n  static getLocalPickerMonth() {\n    return +localStorage.getItem(\"pickerMonthSelected\");\n  }\n\n  static getLocalPickerYear() {\n    return +localStorage.getItem(\"pickerYearSelected\");\n  }\n\n  static getLocalPickerDateSelected() {\n    return +localStorage.getItem(\"pickerDateSelected\");\n  }\n\n  static setLocalPickerDay(day) {\n    localStorage.setItem(\"pickerDaySelected\", day);\n  }\n\n  static setLocalPickerMonth(month) {\n    localStorage.setItem(\"pickerMonthSelected\", month);\n  }\n\n  static setLocalPickerYear(year) {\n    localStorage.setItem(\"pickerYearSelected\", year);\n  }\n\n  static setLocalPickerDateSelected(date) {\n    localStorage.setItem(\"pickerDateSelected\", date);\n  }\n\n  /* **************************************** */\n  /* DAY, MONTH, YEAR, DATE, DAY_SELECTED */\n  setDay(day) {\n    this.daySelected = day;\n    DatepickerContext.setLocalPickerDay(day);\n  }\n\n  setMonth(month) {\n    this.monthSelected = month;\n    DatepickerContext.setLocalPickerMonth(month);\n  }\n\n  setYear(year) {\n    this.yearSelected = year;\n    DatepickerContext.setLocalPickerYear(year);\n  }\n\n  setDateSelected(date) {\n    this.dateSelected = date;\n    DatepickerContext.setLocalPickerDateSelected(date);\n  }\n\n  setDate(year, month, day) {\n    this.setYear(year);\n    this.setMonth(month);\n    this.setDay(day);\n  }\n\n  /* ************** */\n  setPrevMonth() {\n    const prevMonth = new Date(\n      this.getYear(), this.getMonth() - 1, this.getDay()\n    );\n\n    this.setDate(\n      prevMonth.getFullYear(), prevMonth.getMonth(), prevMonth.getDate()\n    );\n  }\n\n  setNextMonth() {\n    const nextMonth = new Date(\n      this.getYear(), this.getMonth() + 1, this.getDay()\n    );\n\n    this.setDate(\n      nextMonth.getFullYear(), nextMonth.getMonth(), nextMonth.getDate()\n    );\n  }\n  /* ************** */\n  getDateSelected() {\n    return +DatepickerContext.getLocalPickerDateSelected();\n  }\n\n  getDay() {\n    return +DatepickerContext.getLocalPickerDay();\n  }\n\n  getMonth() {\n    return +DatepickerContext.getLocalPickerMonth();\n  }\n\n  getYear() {\n    return +DatepickerContext.getLocalPickerYear();\n  }\n\n  getDate() {\n    return new Date(this.getYear(), this.getMonth(), this.getDay());\n  }\n\n  getToday() {\n    return this.date;\n  }\n\n  getMonthName() {\n    return labels.monthsLong[this.getMonth()];\n  }\n\n  getDaysInMonth() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDate();\n  }\n\n  getMonthArrayStartDay() {\n    return new Date(this.getYear(), this.getMonth(), 1).getDay();\n  }\n\n  getMonthArrayStart() {\n    let monthArrayStart = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 0; i < this.getMonthArrayStartDay(); i++) {\n      monthArrayStart.push(new Date(year, month, 0 - i));\n    }\n    return monthArrayStart;\n  }\n\n  getMonthArrayEndDay() {\n    return new Date(this.getYear(), this.getMonth() + 1, 0).getDay();\n  }\n\n  getMonthArrayEnd() {\n    let monthArrayEnd = [];\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 1; i < 7 - this.getMonthArrayEndDay(); i++) {\n      monthArrayEnd.push(new Date(year, +month + 1, i));\n    }\n    return monthArrayEnd;\n  }\n\n  getMonthArray() {\n    let monthArray = [];\n\n    let start = this.getMonthArrayStart();\n    for (let i = start.length - 1; i >= 0; i--) {\n      monthArray.push(start[i]);\n    }\n\n    let [year, month] = [this.getYear(), this.getMonth()];\n    for (let i = 1; i <= this.getDaysInMonth(); i++) {\n      monthArray.push(new Date(year, month, i));\n    }\n\n    let end = this.getMonthArrayEnd();\n    for (let i = 0; i < end.length; i++) {\n      if (i === end.length - 1) {\n        end[i].setHours(23, 59, 59, 999);\n      }\n      monthArray.push(end[i]);\n    }\n    return monthArray;\n  }\n}\n\nconst context = new Context();\nconst datepickerContext = new DatepickerContext();\ncontext.setDefaults();\ndatepickerContext.setDefaults();\nexport default context;\nexport { datepickerContext };","const localStoreKeyNames = [\n  \"animationStatus\",\n  \"colorScheme\",\n  \"component\",\n  \"ctg\",\n  \"dateSelected\",\n  \"daySelected\",\n  \"keyboardShortcutsStatus\",\n  \"monthSelected\",\n  \"pickerDateSelected\",\n  \"pickerDaySelected\",\n  \"pickerMonthSelected\",\n  \"pickerYearSelected\",\n  \"refresh\",\n  \"sidebarState\",\n  \"store\",\n  \"yearSelected\"\n];\n\n// [\n//   \"activeCtg\",\n//   \"dateSelected\",\n//   \"pickerDaySelected\",\n//   \"pickerMonthSelected\",\n//   \"sidebarState\",\n//   \"animationStatus\",\n//   \"refresh\",\n//   \"component\",\n//   \"yearSelected\",\n//   \"ctg\",\n//   \"monthSelected\",\n//   \"daySelected\",\n//   \"pickerDateSelected\",\n//   \"pickerYearSelected\",\n//   \"store\",\n//   \"colorScheme\",\n//   \"keyboardShortcutsStatus\"\n// ]\n\nexport default localStoreKeyNames;","import Entry from \"../factory/entries\";\nimport localStoreKeyNames from \"./constants\";\nimport { testDate, compareDates } from \"../utilities/dateutils\";\nimport locales from \"../locales/en\";\nimport defautlKeyboardShortcuts from \"../locales/kbDefault\";\nconst colors = locales.colors;\n\n\nclass Store {\n  constructor () {\n    this.store = localStorage.getItem(\"store\")\n      ? JSON.parse(localStorage.getItem(\"store\"))\n      : [];\n\n    this.userUpload;\n\n    this.ctg = localStorage.getItem(\"ctg\")\n      ? JSON.parse(localStorage.getItem(\"ctg\"))\n      : {\n        default: { color: colors.blue[4], active: true },\n      };\n\n    this.activeOverlay = new Set();\n\n    this.handleRenders = {\n      sidebar: {\n        callback: null,\n      },\n      datepicker: {\n        reset: null,\n      },\n      form: {\n        callback: null,\n      },\n      reconfig: {\n        callback: null,\n      },\n      categories: {\n        callback: null,\n      },\n      calendars: {\n        previous: {\n          reset: null,\n        },\n        month: {\n          reset: null,\n          resize: null,\n        },\n        week: {\n          reset: null,\n          render: null,\n        },\n        day: {\n          reset: null,\n        },\n        list: {\n          reset: null,\n        },\n      },\n    };\n\n    this.keyboardShortcuts = defautlKeyboardShortcuts;\n    this.keyboardShortcutsStatus = true;\n    this.animationStatus = true;\n  }\n\n  setStoreForTesting(store) {\n    this.store = store;\n    Store.setStore(this.store);\n  }\n\n  getStoreStats() {\n    return [this.store.length, this.getAllCtgNames().length];\n  }\n\n  getAllMethodNames() {\n    return Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(\n      (method) => {\n        return method !== \"constructor\" && method !== \"getStoreStats\";\n      }\n    );\n  }\n\n  /* ************************* */\n  /* LOCAL STORAGE MANAGEMENT */\n  static getStore() {\n    return JSON.parse(localStorage.getItem(\"store\")) || [];\n  }\n\n  static getActiveStore() {\n    return JSON.parse(localStorage.getItem(\"activeStore\")) || [];\n  }\n\n  static getCtg() {\n    return JSON.parse(localStorage.getItem(\"ctg\")) || [];\n  }\n\n  static getShortcutsStatus() {\n    return JSON.parse(localStorage.getItem(\"keyboardShortcutsStatus\"));\n  }\n\n  static getAnimationStatus() {\n    return JSON.parse(localStorage.getItem(\"animationStatus\"));\n  }\n\n  // *******************\n  static setStore(store) {\n    localStorage.setItem(\"store\", JSON.stringify(store));\n  }\n\n  static setActiveStore(activeStore) {\n    localStorage.setItem(\"activeStore\", JSON.stringify(activeStore));\n  }\n\n  static setCtg(ctg) {\n    localStorage.setItem(\"ctg\", JSON.stringify(ctg));\n  }\n\n  static setShortcutsStatus(status) {\n    localStorage.setItem(\"keyboardShortcutsStatus\", JSON.stringify(status));\n  }\n\n  static setAnimationStatus(status) {\n    localStorage.setItem(\"animationStatus\", JSON.stringify(status));\n  }\n  /* ************************* */\n\n  /* ************** */\n  /* essential crud (entries) - create, read, update, delete */\n  addEntry(entry) {\n    this.store.push(entry);\n    Store.setStore(this.store);\n  }\n\n  createEntry(...args) {\n    this.addEntry(new Entry(...args));\n    Store.setStore(this.store);\n  }\n\n  deleteEntry(id) {\n    this.store = this.store.filter((entry) => entry.id !== id);\n    Store.setStore(this.store);\n  }\n\n  getActiveEntries() {\n    const active = this.getActiveCategories();\n    if (!active) return [];\n    const activeEntries = this.store.filter((entry) => {\n      return active ? active.indexOf(entry.category) > -1 : [];\n    });\n    return activeEntries;\n  }\n\n  getEntry(id) {\n    return this.store.find((entry) => entry.id === id);\n  }\n\n  getEntries() {\n    return this.store || [];\n  }\n\n  getEntriesByCtg(ctg) {\n    return this.store.filter((entry) => {\n      return entry.category === ctg;\n    });\n  }\n\n  removeLastEntry() {\n    this.store.pop();\n    Store.setStore(this.store);\n  }\n\n  getLastEntryId() {\n    return this.store[this.store.length - 1].id;\n  }\n\n  compareEntries(entry1, entry2) {\n    for (let key in entry1) {\n      if (key === \"id\" || key === \"coordinates\") continue;\n      if (key === \"end\" || key === \"start\") {\n        if (new Date(entry1[key]).getTime() - new Date(entry2[key]).getTime() !== 0) {\n          return false;\n        }\n      } else if (entry1[key] !== entry2[key]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  updateEntry(id, data) {\n    let entry = this.getEntry(id);\n    entry = Object.assign(entry, data);\n    Store.setStore(this.store);\n  }\n  /* ************ */\n\n  /* **************************** */\n  /* (ENTRIES) FILTER/SORT/PARTITION/ */\n  searchBy(entries, searchtype, value) {\n    if (entries.length === 0) return;\n    return entries.filter((entry) => {\n      return entry[searchtype].toLowerCase().slice(0, value.length) === value;\n    });\n  }\n\n  sortBy(entries, type, direction) {\n    if (entries.length === 0) return;\n\n    if (direction === \"desc\") {\n      return entries.sort((a, b) => {\n        if (type === \"start\") {\n          return new Date(a.start) - new Date(b.start);\n        } else if (type === \"end\") {\n          return new Date(a.end) - new Date(b.end);\n        } else if (\n          type === \"description\" ||\n          type === \"title\" ||\n          type === \"category\"\n        ) {\n          return a[type].localeCompare(b[type]);\n        } else {\n          return a[type] - b[type];\n        }\n      });\n    } else {\n      return entries.sort((a, b) => {\n        if (type === \"start\") {\n          return new Date(b.start) - new Date(a.start);\n        } else if (type === \"end\") {\n          return new Date(b.end) - new Date(a.end);\n        } else if (\n          type === \"description\" ||\n          type === \"title\" ||\n          type === \"category\"\n        ) {\n          return b[type].localeCompare(a[type]);\n        } else {\n          return b[type] - a[type];\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * @returns {Array} [\n   *    start date/time of earliest entry,  {string}\n   *    end date/time of last entry         {string}\n   * ]\n   */\n  getFirstAndLastEntry() {\n    let sorted = this.sortBy(this.getActiveEntries(), \"start\", \"desc\");\n    if (sorted === undefined) {\n      return [0, 0];\n    } else {\n      return [sorted[0].start, sorted[sorted.length - 1].end];\n    }\n  }\n  /* **************************** */\n\n  /* *************************************** */\n  /* SEGMENT ENTRIES FOR SPECIFIC VIEWS (YEAR/MONTH/...ect)*/\n\n  // @generateCoordinates -- (only used in week and day view)\n  \n  generateCoordinates(start, end) {\n    [start, end] = [testDate(start), testDate(end)];\n\n    let startMin = start.getHours() * 4 + Math.floor(start.getMinutes() / 15);\n    let endMin = end.getHours() * 4 + Math.floor(end.getMinutes() / 15);\n    let height = endMin - startMin;\n    let total = startMin + height;\n\n    if (!compareDates(start, end)) {\n      return {\n        allDay: true,\n        x: start.getDay(),\n        x2: end.getDay(),\n      };\n    } else {\n      return {\n        allDay: false,\n        x: start.getDay(),\n        y: startMin,\n        h: height,\n        e: total,\n      };\n    }\n  }\n\n  getDayEntries(day) {\n    let activeEntries = this.getActiveEntries();\n    let boxes = {\n      allDay: [], // entries that start on one day and end on another\n      day: [], // entries that start and end on same day\n    };\n\n    if (activeEntries.length === 0) return boxes;\n\n    let dayEntries = activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      return (\n        y === day.getFullYear() && m === day.getMonth() && d === day.getDate()\n      );\n    });\n\n    dayEntries.forEach((entry) => {\n      entry.coordinates = this.generateCoordinates(\n        new Date(entry.start),\n        new Date(entry.end)\n      );\n\n      if (entry.coordinates.allDay) {\n        boxes.allDay.push(entry);\n      } else {\n        boxes.day.push(entry);\n      }\n    });\n    return boxes;\n  }\n\n  getDayEntriesArray(targetDate) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n\n    return activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      return (\n        y === targetDate.getFullYear() &&\n        m === targetDate.getMonth() &&\n        d === targetDate.getDate()\n      );\n    });\n  }\n\n  getMonthEntries(montharr) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n\n    return activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      return (\n        entryDate >= montharr[0] && entryDate <= montharr[montharr.length - 1]\n      );\n    });\n  }\n\n  getMonthEntryDates(montharr) {\n    let entries = this.getMonthEntries(montharr);\n    let grouped = {};\n    entries.forEach((entry) => {\n      let entryDate = new Date(entry.start);\n      const [y, m, d] = [\n        entryDate.getFullYear(),\n        entryDate.getMonth(),\n        entryDate.getDate(),\n      ];\n      let key = `${y}-${m}-${d}`;\n      if (!grouped[key]) {\n        grouped[key] = [];\n      }\n      grouped[key].push(entry);\n    });\n    return Object.keys(grouped);\n  }\n\n  getGroupedMonthEntries(entries) {\n    return entries.reduce((acc, entry) => {\n      let tempDate = new Date(entry.start);\n      let day = tempDate.getDate();\n      if (!acc[day]) {\n        acc[day] = [];\n      }\n      acc[day].push(entry);\n      return acc;\n    }, {});\n  }\n\n  getWeekEntries(week) {\n    let activeEntries = this.getActiveEntries();\n    let [start, end] = [week[0], week[6]];\n    let boxes = {\n      allDay: [], // entries that start on one day and end on another\n      day: [], // entries that start and end on same day\n    };\n\n    if (activeEntries.length === 0) return boxes;\n    let entries = activeEntries.filter((entry) => {\n      let entryDate = new Date(entry.start);\n      return entryDate >= start && entryDate <= end;\n    });\n\n    entries.forEach((entry) => {\n      entry.coordinates = this.generateCoordinates(\n        new Date(entry.start),\n        new Date(entry.end)\n      );\n\n      if (entry.coordinates.allDay) {\n        boxes.allDay.push(entry);\n      } else {\n        boxes.day.push(entry);\n      }\n    });\n\n    return boxes;\n  }\n\n  getYearEntries(year) {\n    let activeEntries = this.getActiveEntries();\n    if (activeEntries.length === 0) return [];\n    return activeEntries.filter(\n      (entry) => new Date(entry.start).getFullYear() === year\n    );\n  }\n\n  getGroupedYearEntries(yearentries) {\n    let grouped = {};\n    yearentries.forEach((entry) => {\n      let entryDate = new Date(entry.start);\n      let month = entryDate.getMonth();\n      let day = entryDate.getDate();\n\n      if (!grouped[month]) {\n        grouped[month] = {};\n      }\n\n      if (!grouped[month][day]) {\n        grouped[month][day] = [];\n      }\n\n      grouped[month][day].push(entry);\n    });\n\n    return grouped;\n  }\n\n  /* ************************************* */\n\n  /* ********************* */\n  /*  CATEGORY MANAGEMENT */\n  addNewCtg(categoryName, color) {\n    if (!this.hasCtg(categoryName)) {\n      this.ctg[categoryName] = {\n        color: color,\n        active: true,\n      };\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  deleteCategory(category) {\n    if (this.hasCtg(category)) {\n      delete this.ctg[category];\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  getDefaultCtg() {\n    return Object.entries(this.ctg)[0];\n  }\n\n  getFirstActiveCategory() {\n    for (let [key, value] of Object.entries(this.ctg)) {\n      if (value.active) {\n        return key;\n      }\n    }\n    return \"default\";\n  }\n\n  getFirstActiveCategoryKeyPair() {\n    for (let [key, value] of Object.entries(this.ctg)) {\n      if (value.active) {\n        return [key, value.color];\n      }\n    }\n    const backup = this.getDefaultCtg();\n    return [backup[0], backup[1].color];\n  }\n\n  getActiveCategories() {\n    let active = Object.keys(this.ctg).filter((key) => this.ctg[key].active);\n    if (active.length > 0) {\n      return active;\n    } else {\n      active = [];\n    }\n  }\n\n  getActiveCategoriesKeyPair() {\n    return Object.entries(this.ctg).filter((key) => key[1].active);\n  }\n\n  getAllCtg() {\n    return this.ctg;\n  }\n\n  getAllCtgColors() {\n    return Object.values(this.ctg).map((ctg) => ctg.color);\n  }\n\n  getAllCtgNames() {\n    return Object.keys(this.ctg);\n  }\n\n  getCategoryStatus(category) {\n    if (this.ctg.hasOwnProperty(category)) {\n      return this.ctg[category].active;\n    }\n  }\n\n  getCtgColor(ctg) {\n    return this.ctg[ctg].color;\n  }\n\n  getCtgLength(category) {\n    return this.store.filter((entry) => entry.category === category).length;\n  }\n\n  hasCtg(categoryName) {\n    let hasctg = false;\n    for (let key in this.ctg) {\n      if (key.toLowerCase() === categoryName.toLowerCase()) {\n        hasctg = true;\n      }\n    }\n    return hasctg;\n  }\n\n  /**\n   *\n   * @param {string} category\n   * @param {string} newCategory\n   */\n  moveCategoryEntriesToNewCategory(category, newCategory, newName) {\n    if (this.hasCtg(category) || newName === true) {\n      this.store.forEach((entry) => {\n        if (entry.category === category) {\n          entry.category = newCategory;\n        }\n      });\n      Store.setStore(this.store);\n    }\n    this.deleteCategory(category);\n  }\n\n  removeCategoryAndEntries(category) {\n    if (this.hasCtg(category)) {\n      this.store = this.store.filter((entry) => entry.category !== category);\n      Store.setStore(this.store);\n    }\n    this.deleteCategory(category);\n  }\n\n  setCategoryStatus(category, status) {\n    if (this.hasCtg(category)) {\n      this.ctg[category].active = status;\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  setAllCategoryStatusExcept(category, status) {\n    for (let key in this.ctg) {\n      if (key !== category) {\n        this.ctg[key].active = status;\n      } else {\n        this.ctg[key].active = !status;\n      }\n    }\n    Store.setCtg(this.ctg);\n  }\n\n  /**\n   *\n   * @param {string} categoryName\n   * @param {string} color\n   * @desc updates the color of a category\n   */\n  updateCtgColor(categoryName, color) {\n    if (this.hasCtg(categoryName)) {\n      this.ctg[categoryName].color = color;\n      Store.setCtg(this.ctg);\n    }\n  }\n\n  getCtgIndex(category) {\n    return Object.keys(this.ctg).indexOf(category);\n  }\n\n  /**\n   *\n   * @param {string} newName\n   * @param {string} newColor\n   * @param {string} oldName\n   * @returns new category object\n   * @desc note that 'value' of [key, value] is necessary to segment the object, even if it is not directly referenced\n   */\n  updateCtg(newName, newColor, oldName) {\n    let entries = Object.entries(this.ctg);\n    let hasColor = newColor !== null;\n    let count = 0;\n    let length = entries.length;\n\n    const isNumeric = (n) => !isNaN(parseFloat(n)) && isFinite(n);\n    if (isNumeric(newName)) {\n      newName = \"category \" + newName;\n    }\n\n    for (let [key, value] of entries) {\n      count++;\n      if (count === 1) {\n        // changing the default category;\n        if (oldName === key) {\n          entries[0][0] = newName;\n          if (hasColor) {\n            entries[0][1].color = newColor;\n          }\n        }\n      } else {\n        if (oldName === key) {\n          entries[count - 1][0] = newName;\n          if (hasColor) {\n            entries[count - 1][1].color = newColor;\n          }\n        }\n      }\n    }\n    if (entries.length !== length) {\n      console.error(\"something went wrong with category name/color change\");\n      return;\n    } else {\n      this.ctg = Object.fromEntries(entries);\n      this.moveCategoryEntriesToNewCategory(oldName, newName, true);\n      Store.setCtg(this.ctg);\n    }\n  }\n  /* ********************* */\n\n  /* ***************************** */\n  /*  KEYBOARD SHORTCUT MANAGEMENT */\n  getShortcuts() {\n    return this.keyboardShortcuts;\n  }\n\n  setShortCut(shortcut) {\n    const keys = Object.keys(this.getShortcuts());\n    let idx = keys.indexOf(shortcut);\n    if (idx > -1) {\n      return `Shortcut (${shortcut}) is already in use`;\n    } else {\n      return;\n    }\n  }\n\n  setShortcutsStatus(status) {\n    this.keyboardShortcutsStatus = status;\n    Store.setShortcutsStatus(status);\n  }\n\n  getShortcutsStatus() {\n    const status = Store.getShortcutsStatus();\n    return status !== null ? status : true;\n  }\n  /* ***************************** */\n\n  /* ***************************** */\n  /*  ANIMATION MANAGEMENT */\n\n  getAnimationStatus() {\n    const status = Store.getAnimationStatus();\n    return status !== null ? status : true;\n  }\n\n  setAnimationStatus(status) {\n    this.animationStatus = status;\n    Store.setAnimationStatus(status);\n  }\n  /* ***************************** */\n\n  /* ******************** */\n  /*  OVERLAY MANAGEMENT */\n  addActiveOverlay(overlay) {\n    this.activeOverlay.add(overlay);\n  }\n\n  removeActiveOverlay(overlay) {\n    const len = this.activeOverlay.size;\n    if (len === 0) {\n      return;\n    } else if (this.activeOverlay.size === 1) {\n      this.activeOverlay = new Set();\n      return;\n    } else {\n      this.activeOverlay = new Set(\n        [...this.activeOverlay].filter((o) => o !== overlay)\n      );\n      return;\n    }\n  }\n\n  getActiveOverlay() {\n    return this.activeOverlay;\n  }\n\n  hasActiveOverlay() {\n    return this.activeOverlay.size > 0;\n  }\n  /* ******************** */\n\n  /* ************************ */\n  /*  JSON UPLOAD & DOWNLOAD */\n  validateUserUpload(userUpload) {\n    const keys = Object.keys(userUpload);\n    let message = {};\n    if (keys.length > localStoreKeyNames.length) {\n      message.err1 = \"invalid number of keys (too many)\";\n    }\n\n    for (let i = 0; i < keys.length; i++) {\n      if (!localStoreKeyNames.includes(keys[i])) {\n        let errname = \"err\" + Object.keys(message).length;\n        message[errname] = \"invalid key: \" + keys[i];\n      }\n    }\n\n    if (Object.keys(message).length > 0) {\n      return message;\n    } else {\n      return true;\n    }\n  }\n\n  setUserUpload(userUpload) {\n    const validation = this.validateUserUpload(userUpload);\n    let validated;\n    if (validation === true) {\n      localStorage.clear();\n      validated = true;\n      for (const [key, value] of Object.entries(userUpload)) {\n        localStorage.setItem(key, value);\n      }\n    } else {\n      return validation;\n    }\n    if (validated) {\n      const refresh = localStorage.getItem(\"refresh\");\n      if (refresh === null) {\n        window.location.reload();\n        window.localStorage.setItem(\"refresh\", \"1\");\n      }\n    }\n  }\n\n  getUserUpload() {\n    return this.userUpload;\n  }\n \n\n  \n  \n  setFormRenderHandle(type, callback) {\n    this.handleRenders.calendars[type].render = callback;\n  }\n\n  setFormResetHandle(type, callback) {\n    this.handleRenders.calendars[type].reset = callback;\n  }\n\n  setRenderFormCallback(callback) {\n    this.handleRenders.form.callback = callback;\n  }\n\n  setRenderSidebarCallback(callback) {\n    this.handleRenders.sidebar.callback = callback;\n  }\n\n  setResizeHandle(type, callback) {\n    this.handleRenders.calendars[type].resize = callback;\n  }\n\n  setDataReconfigCallback(callback) {\n    this.handleRenders.reconfig.callback = callback;\n  }\n\n  setResetDatepickerCallback(callback) {\n    this.handleRenders.datepicker.reset = callback;\n  }\n\n  setResetPreviousViewCallback(callback) {\n    this.handleRenders.calendars[\"previous\"].reset = callback;\n  }\n\n  setRenderCategoriesCallback(callback) {\n    this.handleRenders.categories.callback = callback;\n  }\n\n  getRenderCategoriesCallback() {\n    return this.handleRenders.categories.callback;\n  }\n\n  getResetPreviousViewCallback() {\n    return this.handleRenders.calendars[\"previous\"].reset;\n  }\n\n  getResetDatepickerCallback() {\n    return this.handleRenders.datepicker.reset;\n  }\n\n  getDataReconfigCallback() {\n    return this.handleRenders.reconfig.callback;\n  }\n\n  getResizeHandle(type) {\n    if (this.handleRenders.calendars[type] === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].resize;\n    }\n  }\n\n  getFormRenderHandle(type) {\n    if (this.handleRenders.calendars[type] === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].render;\n    }\n  }\n\n  getFormResetHandle(type) {\n    if (this.handleRenders.calendars[type].reset === undefined) {\n      return null;\n    } else {\n      return this.handleRenders.calendars[type].reset;\n    }\n  }\n\n  getRenderFormCallback() {\n    const callback = this.handleRenders.form.callback;\n    if (callback !== null) {\n      return callback;\n    } else {\n      return null;\n    }\n  }\n\n  getRenderSidebarCallback() {\n    const callback = this.handleRenders.sidebar.callback;\n    if (callback !== null) {\n      return callback;\n    } else {\n      return null;\n    }\n  }\n  /* ************************************ */\n}\n\n// single\nexport default new Store();\n","import { generateId } from \"../utilities/helpers\";\n\n/**\n * @class Entry\n * @param {String} id - Unique identifier\n * @param {String} title\n * @param {String} description\n * @param {Date} start\n * @param {Date} end\n * @param {String} category\n * @param {Boolean} completed\n */\nexport default class Entry {\n  constructor (category, completed, description, end, start, title) {\n    this.category = category;\n    this.completed = completed;\n    this.description = description;\n    this.end = end;\n    this.id = generateId();\n    this.start = start;\n    this.title = title;\n  }\n}\n\nclass CoordinateEntry {\n  constructor (category, completed, coordinates, description, id, title) {\n    this.category = category;\n    this.completed = completed || false;\n    this.coordinates = coordinates || {};\n    this.description = description;\n    this.id = id;\n    this.title = title;\n  }\n}\n\n/**\n * @class Week\n * \n * @param {Array} dayEntries\n * @description Array of entries that span a single day.\n * \n * @param {Array} allDayEntries\n * @description Array of entries that span multiple days.\n */\nclass Week {\n  constructor (dayEntries, allDayEntries) {\n    this.boxes = dayEntries;\n    this.boxesTop = allDayEntries;\n  }\n\n  setAllBoxes(tempEntries) {\n    this.boxes = tempEntries.day;\n    this.boxesTop = tempEntries.allDay;\n  }\n\n  addBox(box) {\n    this.boxes.push(box);\n  }\n\n  addBoxTop(box) {\n    this.boxesTop.push(box);\n  }\n\n  getBox(id) {\n    return this.boxes.find(box => box.id === id);\n  }\n\n  getBoxes() {\n    return this.boxes;\n  }\n\n  getBoxesTop() {\n    return this.boxesTop;\n  }\n\n  getLength() {\n    return this.boxes.length;\n  }\n\n  getBoxesByColumn(col) {\n    return this.boxes.filter(box => +box.coordinates.x == col);\n  }\n\n  getBoxesByColumnTop(col) {\n    return this.boxesTop.filter(box => +box.coordinates.x == col);\n  }\n\n  getBoxesTopByDay(day) {\n    return this.boxesTop.filter(box => +box.coordinates.y == day);\n  }\n\n  getBoxesTopLengths() {\n    return this.getBoxesTop().reduce((a, c) => {\n      let start = new Date(c.start);\n      if (a[start.getDay()]) {\n        a[start.getDay()]++;\n      }\n      else {\n        a[start.getDay()] = 1;\n      }\n      return a;\n    }, {});\n  }\n\n  getColumnsWithMultipleBoxes() {\n    let temp = {};\n    let columns = [];\n    for (const box of this.boxes) {\n      if (temp[box.coordinates.x]) {\n        temp[box.coordinates.x]++;\n        if (temp[box.coordinates.x] === 2) {\n          columns.push(box.coordinates.x);\n        }\n      } else {\n        temp[box.coordinates.x] = 1;\n      }\n    }\n    return columns;\n  }\n\n  getEntriesByTitle(title) {\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\n  }\n\n  updateCoordinates(id, coordinates) {\n    this.getBox(id).coordinates = coordinates;\n  }\n\n  sortByY(bxs) {\n    return bxs.sort((a, b) => +a.coordinates.y - +b.coordinates.y);\n  }\n\n  checkForCollision(col) {\n    const bxs = this.getBoxesByColumn(col);\n    let overlaps = []; // a list to store the overlapping entries\n    for (let i = 0; i < bxs.length; i++) {\n      for (let j = i + 1; j < bxs.length; j++) {\n        const e1 = bxs[i];\n        const e2 = bxs[j];\n        if (e1.coordinates.y < e2.coordinates.e && e1.coordinates.e > e2.coordinates.y) {\n          if (!overlaps.includes(e1)) {\n            overlaps.push(e1);\n          }\n          if (!overlaps.includes(e2)) {\n            overlaps.push(e2);\n          }\n        }\n      }\n    }\n    return overlaps.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n  }\n  \n  updateStore(store, id, weekArray) {\n    const boxEntry = this.getBox(id);\n    const coords = boxEntry.coordinates;\n    let boxstart = +coords.y * 15;\n    let boxend = +coords.e * 15;\n    let day = weekArray[+coords.x];\n\n    const startDate = new Date(day);\n    const starthours = Math.floor(boxstart / 60);\n    const startminutes = boxstart % 60;\n    startDate.setHours(starthours);\n    startDate.setMinutes(startminutes);\n\n    const endDate = new Date(day);\n    const endhours = Math.floor(boxend / 60);\n    const endminutes = boxend % 60;\n    endDate.setHours(endhours);\n    endDate.setMinutes(endminutes);\n\n    store.updateEntry(id, {\n      start: startDate,\n      end: endDate,\n    });\n  }\n}\n/**\n * @class Week\n * \n * @param {Array} dayEntries\n * @description Array of entries that span a single day.\n * \n * @param {Array} allDayEntries\n * @description Array of entries that span multiple days.\n */\nclass Day {\n  constructor (dayEntries, allDayEntries) {\n    this.boxes = dayEntries;\n    this.boxesTop = allDayEntries;\n  }\n\n  setAllBoxes(tempEntries) {\n    this.boxes = tempEntries.day;\n    this.boxesTop = tempEntries.allDay;\n  }\n\n  addBox(box) {\n    this.boxes.push(box);\n  }\n\n  addBoxTop(box) {\n    this.boxesTop.push(box);\n  }\n\n  getBox(id) {\n    return this.boxes.find(box => box.id === id);\n  }\n\n  getBoxes() {\n    return this.boxes;\n  }\n\n  getBoxesTop() {\n    return this.boxesTop;\n  }\n\n  getAllBoxes() {\n    return [...this.boxes, ...this.boxesTop];\n  }\n\n  getLength() {\n    return this.boxes.length;\n  }\n\n  getBoxesTopLengths() {\n    return this.getBoxesTop().reduce((a, c) => {\n      let start = new Date(c.start);\n      if (a[start.getDay()]) {\n        a[start.getDay()]++;\n      }\n      else {\n        a[start.getDay()] = 1;\n      }\n      return a;\n    }, {});\n  }\n\n  getEntriesByTitle(title) {\n    return this.boxes.filter(box => box.title.toLowerCase().includes(title.toLowerCase()));\n  }\n\n  updateCoordinates(id, coordinates) {\n    this.getBox(id).coordinates = coordinates;\n  }\n\n  getEntriesEndingOnDay(day) {\n    return this.boxes.filter(box => +box.coordinates.e === day);\n  }\n\n  sortByY(bxs) {\n    return bxs.sort((a, b) => {\n      let diff = +a.coordinates.y - +b.coordinates.y;\n      if (diff === 0) {\n        return +a.coordinates.e - +b.coordinates.e;\n      } else {\n        return diff;\n      }\n    });\n  }\n\n  checkForCollision() {\n    const bxs = this.getBoxes();\n    let overlaps = []; // a list to store the overlapping entries\n    // entries.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n    for (let i = 0; i < bxs.length; i++) {\n      for (let j = i + 1; j < bxs.length; j++) {\n        const e1 = bxs[i];\n        const e2 = bxs[j];\n        if (e1.coordinates.y < e2.coordinates.e && e1.coordinates.e > e2.coordinates.y) {\n          if (!overlaps.includes(e1)) {\n            overlaps.push(e1);\n          }\n          if (!overlaps.includes(e2)) {\n            overlaps.push(e2);\n          }\n        }\n      }\n    }\n    return overlaps.sort((a, b) => +a.coordinates.y - +b.coordinates.y)\n  }\n\n  updateStore(store, id) {\n    const boxEntry = this.getBox(id);\n    const coords = boxEntry.coordinates;\n    let boxstart = +coords.y * 15;\n    let boxend = +coords.e * 15;\n\n    const startDate = new Date(boxEntry.start);\n    const starthours = Math.floor(boxstart / 60);\n    const startminutes = boxstart % 60;\n    startDate.setHours(starthours);\n    startDate.setMinutes(startminutes);\n\n    const endDate = new Date(boxEntry.start);\n    let endhours = Math.floor(boxend / 60);\n    let endminutes = boxend % 60;\n    if (endhours === 24) {\n      endhours = 23;\n      endminutes = 59;\n    }\n    endDate.setHours(endhours);\n    endDate.setMinutes(endminutes);\n\n    store.updateEntry(id, {\n      start: startDate,\n      end: endDate,\n    });\n  }\n}\n\nexport {\n  CoordinateEntry,\n  Week,\n  Day,\n};","class MonthBoxQuery {\n  constructor (flag) {\n    this.flag = flag;\n    this.tops = [20, 20];\n    this.heights = [18, 18];\n    // this.tops = [16, 20];\n    // this.heights = [14, 18];\n  }\n\n  updateFlag() {\n    this.flag = window.innerWidth <= 530 || window.innerHeight <= 470;\n  }\n\n  getFlag() {\n    return this.flag;\n  }\n\n  getTop() {\n    const [a, b] = this.tops;\n    return this.flag ? a : b;\n  }\n\n  getHeight() {\n    const [a, b] = this.heights;\n    return this.flag ? a : b;\n  }\n\n  getPrevTop(top) {\n    const [a, b] = this.tops;\n    return top === a ? b : a;\n  }\n}\n\nexport default MonthBoxQuery;","export default {\n  labels: {\n    monthsLong: [\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\n    ],\n    monthsShortLower: [\n      'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'\n    ],\n    monthsLongLower: [\n      'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'\n    ],\n    monthsShort: [\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n    ],\n    weekdaysLong: [\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\n    ],\n    weekdaysShort: [\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'\n    ],\n    weekdaysNarrow: [\n      'S', 'M', 'T', 'W', 'T', 'F', 'S'\n    ],\n\n  },\n\n  colors: {\n    red: {\n      1: '#DF2A79',\n      2: '#A51955',\n      3: '#73113C',\n      4: '#C20000',\n      5: '#9D0000',\n      6: '#690000',\n      7: '#460000',\n    },\n\n    orange: {\n      1: '#EE756A',\n      2: '#E84334',\n      3: '#E77C2B',\n      4: '#D56A18',\n      5: '#954A11',\n      6: '#6B350C',\n      7: '#402007',\n    },\n\n    green: {\n      1: '#1E9E98',\n      2: '#1A8A84',\n      3: '#167671',\n      4: '#115855',\n      5: '#0F4E4B',\n      6: '#09312F',\n      7: '#072726',\n    },\n\n    blue: {\n      1: '#14489A',\n      2: '#125ab8',\n      3: '#5578D7',\n      4: '#2C52BA',\n      5: '#234295',\n      6: '#1B3375',\n      7: '#142555',\n    },\n\n    purple: {\n      1: '#42338B',\n      2: '#513FAB',\n      3: '#614E7A',\n      4: '#604793',\n      5: '#49356F',\n      6: '#342650',\n      7: '#271D3C',\n    },\n\n    grey: {\n      1: '#858F93',\n      2: '#4D5458',\n      3: '#272B2C',\n      4: '#202B31',\n      5: '#2C3C44',\n      6: '#384C56',\n      7: '#516C7B',\n    },\n  },\n};","export default {\n  0: { shortcut: '0', action: \"change app theme\" },\n  1: { shortcut: ['1', 'D'], action: 'open day view' },\n  2: { shortcut: ['2', 'W'], action: 'open week view' },\n  3: { shortcut: ['3', 'M'], action: 'open month view' },\n  4: { shortcut: ['4', 'Y'], action: 'open year view' },\n  5: { shortcut: ['5', 'L'], action: 'open list view' },\n  6: { shortcut: 'v', action: 'toggle view options' },\n  7: { shortcut: 't', action: 'set date to today' },\n  8: { shortcut: \"g\", action: 'enter date manually' },\n  9: { shortcut: \"n\", action: 'next period' },\n  10: { shortcut: \"p\", action: 'previous period' },\n  11: { shortcut: 's', action: 'toggle sidebar' },\n  12: { shortcut: 'f', action: 'open form' },\n  13: { shortcut: '+', action: 'open new category form' },\n  14: { shortcut: 'a', action: 'open settings' },\n  15: { shortcut: ['/', '?'], action: 'open keyboard shortcuts' },\n  16: { shortcut: \"e\", action: '(entry options) opens form with entry details' },\n  17: {\n    shortcut: '↑', action: [\n      '(datepicker) set date to next month/week',\n      '(yearpicker) set year to next year'\n    ]\n  },\n  18: {\n    shortcut: '↓', action: [\n      '(datepicker) set date to prev month/week',\n      '(yearpicker) set year to prev year'\n    ]\n  },\n  19: {\n    shortcut: '←', action: [\n      '(datepicker) set date to prev day',\n      '(monthpicker) set month to prev month',\n    ]\n  },\n  20: {\n    shortcut: '→', action: [\n      '(datepicker) set date to next day',\n      '(monthpicker) set month to next month',\n    ]\n  },\n  21: { shortcut: 'DELETE', action: '(entry options) delete entry' },\n  22: {\n    shortcut: 'ENTER', action: [\n      '(datepicker) set date to selected date',\n      '(form) submit form',\n    ]\n  },\n  23: { shortcut: \"ESCAPE\", action: 'close any active modal/popup/form' },\n};","import { formatTime, formatStartEndTimes } from \"./timeutils\";\nimport locales from \"../locales/en\";\nconst labels = locales.labels;\nconst monthNames = labels.monthsShort;\n\nexport default function createDate(year, month, day) {\n  const pad = (num) => { return num < 10 ? `0${num}` : num; };\n  Date.prototype.toCustomISO = function () {\n    return this.getFullYear() +\n      '-' + pad(this.getMonth() + 1) +\n      '-' + pad(this.getDate()) +\n      'T' + pad(this.getHours()) +\n      ':' + pad(this.getMinutes()) +\n      ':' + pad(this.getSeconds()) +\n      '.' + (this.getMilliseconds() / 1000).toFixed(3).slice(2, 5) +\n      'Z';\n  };\n  if (!year && !month && !day) {\n    return new Date().toCustomISO();\n  } else {\n    return new Date(year, month, day, 0, 0, 0, 0).toCustomISO().slice(0, 10);\n  }\n}\n\nfunction testDate(date) {\n  return date instanceof Date && !isNaN(date) ? date : new Date(date);\n}\n\nfunction getDateFormatted(date) {\n  date = testDate(date);\n  return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n}\n\nfunction getDateForStore(date) {\n  date = testDate(date);\n  return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;\n}\n\nfunction getdatearray(date) {\n  return [+date.getFullYear(), +date.getMonth() + 1, +date.getDate()];\n}\n\nfunction formatDateForDisplay(date) {\n  date = testDate(date);\n  const month = locales.labels.monthsShort[date.getMonth()];\n  const day = date.getDate();\n  let hours = date.getHours();\n  let minutes = date.getMinutes();\n  hours = hours < 10 ? `0${hours}` : hours;\n  minutes = minutes < 10 ? `0${minutes}` : minutes;\n  let hm = `${hours}:${minutes}`;\n  return `${month} ${day} ${date.getFullYear()}, (${hm}) `;\n}\n\nfunction compareDates(date1, date2) {\n  [date1, date2] = [testDate(date1), testDate(date2)];\n  return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();\n}\n\nfunction formatDuration(seconds) {\n  let time = { year: 31536000, day: 86400, hour: 3600 },\n    res = [];\n  if (seconds === 0) return 'now';\n  for (let key in time) {\n    if (seconds >= time[key]) {\n      let val = Math.floor(seconds / time[key]);\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\n      seconds = seconds % time[key];\n    }\n  }\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\n}\n\nfunction formatDurationHourMin(seconds) {\n  let time = { hour: 3600, minute: 60 },\n    res = [];\n  if (seconds === 0) return 'now';\n  for (let key in time) {\n    if (seconds >= time[key]) {\n      let val = Math.floor(seconds / time[key]);\n      res.push(val += val > 1 ? ' ' + key + 's' : ' ' + key);\n      seconds = seconds % time[key];\n    }\n  }\n  return res.length > 1 ? res.join(', ').replace(/,([^,]*)$/, ' &' + '$1') : res[0];\n}\n\nfunction formatStartEndDate(start, end, flag) {\n  [start, end] = [testDate(start), testDate(end)];\n\n  const [startday, startmonth, startyear] = [\n    start.getDate(),\n    monthNames[start.getMonth()],\n    start.getFullYear()\n  ];\n\n  const [endday, endmonth, endyear] = [\n    end.getDate(),\n    monthNames[end.getMonth()],\n    end.getFullYear()\n  ];\n\n  let tempstartyear = startyear;\n  let tempendyear = endyear;\n  if (flag) {\n    tempstartyear = startyear.toString().slice(2, 4);\n    tempendyear = endyear.toString().slice(2, 4);\n  }\n\n  if (startyear === endyear) {\n    if (startmonth === endmonth) {\n      if (startday === endday) {\n        // same : day, month, year\n        return `${startmonth} ${startday} ${startyear}`;\n      } else {\n        // same : month, year\n        return `${startmonth} ${startday} – ${endday}, ${startyear}`;\n      }\n    } else {\n      // same : year\n      return `${startmonth} ${startday} – ${endmonth} ${endday}, ${startyear}`;\n    }\n  } else {\n    // same : nothing\n    return `${startmonth} ${startday}, ${tempstartyear} – ${endmonth} ${endday}, ${tempendyear}`;\n  }\n}\n\n\n\n\nfunction formatStartEndTime(start, end) {\n  [start, end] = [new Date(start), new Date(end)];\n  let startmin = start.getMinutes();\n  let endmin = end.getMinutes();\n  endmin = endmin % 15 === 0 ? endmin : endmin + (15 - (endmin % 15));\n  startmin = startmin % 15 === 0 ? startmin : startmin + (15 - (startmin % 15));\n  let starttime = formatTime(start.getHours(), startmin);\n  let endtime = formatTime(end.getHours(), endmin);\n  if (starttime.slice(-2) === endtime.slice(-2)) {\n    starttime = starttime.slice(0, -2);\n  }\n  return `${starttime} – ${endtime}`;\n}\n\nfunction getDuration(start, end) {\n  [start, end] = [new Date(start), new Date(end)];\n  const duration = formatDuration((Math.floor(end.getTime() / 1000)) - (Math.floor(start.getTime() / 1000)));\n  if (duration === undefined) {\n    return \"completed\";\n  } else {\n    return duration;\n  }\n}\n\nfunction createDateFromFormattedString(dateString) {\n  const dateArray = dateString.split(\"-\");\n  return new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);\n}\n\nfunction isBeforeDate(date1, date2) {\n  [date1, date2] = [new Date(date1), new Date(date2)];\n  return date1.getTime() < date2.getTime();\n}\n\nfunction isDate(value) {\n  return value instanceof Date && !isNaN(value);\n}\n\nfunction getDateFromAttribute(target, attribute, view) {\n  return target.getAttribute(attribute).split(\"-\").map((x, i) => {\n    if (view === \"month\") {\n      return i === 1 ? parseInt(x) - 1 : parseInt(x);\n    } else {\n      return parseInt(x);\n    }\n  });\n}\n\nfunction getTimeFromAttribute(target, attribute) {\n  return target.getAttribute(attribute).split(\":\").map((x) => {\n    return parseInt(x);\n  });\n}\n\nfunction getDateTimeFormatted(date, hour, minute) {\n  date = testDate(date);\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    parseInt(hour),\n    parseInt(minute),\n    1,\n    1,\n  );\n}\n\nfunction getTempDates(tempdate, hours, minutes) {\n  tempdate = testDate(tempdate);\n  return [\n    getDateTimeFormatted(tempdate, hours[0], minutes[0]),\n    getDateTimeFormatted(tempdate, hours[1], minutes[1]),\n  ];\n}\n\nfunction generateTempStartEnd(data) {\n  let tempdate = new Date();\n\n  const [year, month, day] = data;\n  let startDate = new Date(year, month, day);\n  startDate.setHours(tempdate.getHours());\n  startDate.setMinutes(0);\n\n  let endDate = new Date(startDate);\n  endDate.setHours(tempdate.getHours());\n  endDate.setMinutes(30);\n\n  return [startDate, endDate];\n}\n\nfunction getFormDateObject(start, end) {\n  [start, end] = [testDate(start), testDate(end)];\n\n  const setmin = min => min === 0 ? \"00\" : min;\n  return {\n    dateObj: [start, end],\n    minutes: [setmin(start.getMinutes()), setmin(end.getMinutes())],\n    formatted: [getDateForStore(start), getDateForStore(end)],\n  };\n}\n\nfunction sortDates(dates, dir) {\n  return dates.sort((a, b) => {\n    let [date1, date2] = [new Date(a), new Date(b)];\n    if (dir === \"asc\") {\n      return date1 - date2;\n    } else {\n      return date2 - date1;\n    }\n  });\n}\n\nfunction getDurationSeconds(date1, date2) {\n  return (Math.floor(date2.getTime() / 1000)) - (Math.floor(date1.getTime() / 1000));\n}\n\nfunction formatEntryOptionsDate(date1, date2) {\n  let [y1, y2] = [date1.getFullYear(), date2.getFullYear()];\n  let [m1, m2] = [date1.getMonth(), date2.getMonth()];\n  let [d1, d2] = [date1.getDate(), date2.getDate()];\n  let [h1, h2] = [date1.getHours(), date2.getHours()];\n  let [min1, min2] = [date1.getMinutes(), date2.getMinutes()];\n\n  let useTempDate = false;\n  let tempdateone = new Date();\n  if (isBeforeDate(date1, tempdateone)) {\n    useTempDate = true;\n  }\n  // if same day, month, & year -- return time as start-end\n  // otherwise, return time as duration between start & end\n  if (y1 === y2) {\n    if (m1 === m2) {\n      if (d1 === d2) {\n        // === year, month, day\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n        let durationTime = formatDurationHourMin(duration);\n        return {\n          date: `${labels.monthsLong[m1]} ${d1}, ${y1} (${formatStartEndTimes([h1, h2], [min1, min2])})`,\n          time: durationTime,\n        };\n      } else {\n        // === year, month\n        let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n        let durationTime = formatDuration(duration);\n        return {\n          date: `${labels.monthsLong[m1]} ${d1} – ${d2}, ${y1}`,\n          time: durationTime,\n        };\n      }\n    } else {\n      // === year\n      let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n      let durationTime = formatDuration(duration);\n      return {\n        date: `${labels.monthsShort[m1]} ${d1} – ${labels.monthsShort[m2]} ${d2}, ${y2}`,\n        time: durationTime,\n      };\n    }\n  } else {\n    // different year --- return full date\n    let duration = getDurationSeconds(useTempDate ? tempdateone : date1, date2);\n    let durationTime = formatDuration(duration);\n    return {\n      date: `${labels.monthsShort[m1]} ${d1}, ${y1} – ${labels.monthsShort[m2]} ${d2}, ${y2}`,\n      time: durationTime,\n    };\n  }\n}\n\nfunction createTimestamp() {\n  const date = new Date();\n  const year = date.getFullYear().toString().slice(-2);\n  const month = monthNames[date.getMonth()].toUpperCase();\n  const day = parseInt(date.getDate());\n  return `${month}${day}`;\n}\n\nfunction longerThanDay(date1, date2) {\n  return getDurationSeconds(date1, date2) > 86400;\n}\n\nfunction getDayOrdinal(day) {\n  if (day > 3 && day < 21) return 'th';\n  switch (day % 10) {\n    case 1: return \"st\";\n    case 2: return \"nd\";\n    case 3: return \"rd\";\n    default: return \"th\";\n  }\n}\n\nexport {\n  testDate,\n  getDateFormatted,\n  getDateForStore,\n  getdatearray,\n  formatDateForDisplay,\n  formatDuration,\n  compareDates,\n  createDateFromFormattedString,\n  formatStartEndDate,\n  formatStartEndTime,\n  getDuration,\n  isBeforeDate,\n  isDate,\n  getDateFromAttribute,\n  getTimeFromAttribute,\n  getDateTimeFormatted,\n  getTempDates,\n  generateTempStartEnd,\n  getFormDateObject,\n  sortDates,\n  formatEntryOptionsDate,\n  getDurationSeconds,\n  createTimestamp,\n  longerThanDay,\n  getDayOrdinal,\n};","import calcTime from \"./timeutils\";\n\n\n\nconst identifiers = {\n  boxnumarr: {\n    week: [\n      'box-one', 'box-two', 'box-three',\n      'box-four', 'box-five', 'box-six',\n      'box-seven', 'box-eight', 'box-nine',\n      'box-ten', 'box-eleven', 'box-twelve',\n      'box-thirteen', 'box-fourteen', 'box-fifteen',\n    ],\n    day: [\n      'dv-box-one', 'dv-box-two', 'dv-box-three',\n      'dv-box-four', 'dv-box-five', 'dv-box-six',\n      'dv-box-seven', 'dv-box-eight', 'dv-box-nine',\n      'dv-box-ten', 'dv-box-eleven', 'dv-box-twelve',\n      'dv-box-thirteen', 'dv-box-fourteen', 'dv-box-fifteen',\n    ],\n  },\n\n  boxClasses: {\n    week: {\n      base: \"box\",\n      ontop: \"box-ontop\",\n      active: \"box-mv-dragactive\",\n      temporary: \"temporary-box\",\n      prepend: \"box-\",\n    },\n    day: {\n      base: \"dv-box\",\n      ontop: \"dv-box-ontop\",\n      active: \"dv-box-mv-dragactive\",\n      temporary: \"dv-temporary-box\",\n      prepend: \"dv-box-\",\n    },\n  },\n\n  boxAttributes: {\n    week: {\n      updatecoord: [\n        \"data-box-id\",\n        \"data-start-time\",\n        \"data-time-intervals\"\n      ],\n      dataIdx: \"box-idx\",\n      dataId: \"data-box-id\",\n      dataCol: \"data-box-col\",\n      prepend: \"data-\",\n      prepentwo: \"data-wv-\"\n    },\n    day: {\n      updatecoord: [\n        \"data-dv-box-id\",\n        \"data-dv-start-time\",\n        \"data-dv-time-intervals\",\n      ],\n      dataIdx: \"data-dv-box-index\",\n      dataId: \"data-dv-box-id\",\n      prepend: \"data-dv-\",\n      prepentwo: \"data-dv-\"\n    },\n  },\n\n  styles: {\n    newBox: {\n      left: \"calc((100% - 0px) * 0 + 0px)\",\n      height: \"12.5px\",\n      width: \"calc((100% - 4px) * 1)\",\n    }\n  }\n};\n\nfunction calcNewLeft(index) {\n  let base = 0.1;\n  let add = 0.05;\n\n  if (index === 0) {\n    return 0;\n  }\n\n  if (index >= 1 && index <= 5) {\n    return (index * add) + base;\n  }\n}\n\n\nfunction setBoxWidthWeek(box, prepend, dataidx) {\n  const attr = box.getAttribute(dataidx);\n  switch (attr) {\n    case `${prepend}one`:\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n      box.style.width = \"calc((100% - 4px) * 1)\";\n      break;\n    case `${prepend}two`:\n      box.style.left = \"calc((100% - 0px) * 0.2 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.80)\";\n      break;\n    case `${prepend}three`:\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\n      break;\n    case `${prepend}four`:\n      box.style.left = \"calc((100% - 0px) * 0.0 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.44)\";\n      break;\n    case `${prepend}five`:\n      box.style.left = \"calc((100% - 0px) * .5 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\n      break;\n    case `${prepend}six`:\n      box.style.left = \"calc((100% - 0px) * 0.1 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.4)\";\n      break;\n    case `${prepend}seven`:\n      box.style.left = \"calc((100% - 0px) * 0.5 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.5)\";\n      break;\n    case `${prepend}eight`:\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\n      break;\n    case `${prepend}nine`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.35)\";\n      break;\n    case `${prepend}ten`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eleven`:\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}twelve`:\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}thirteen`:\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fourteen`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fifteen`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    default:\n      break;\n  }\n}\n\nfunction setBoxWidthDay(box, prepend, dataidx) {\n  const attr = box.getAttribute(dataidx);\n  switch (attr) {\n    case `${prepend}one`:\n      box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n      box.style.width = \"calc((100% - 4px) * 1)\";\n      break;\n    case `${prepend}two`:\n      box.style.left = \"calc((100% - 0px) * 0.15 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.85)\";\n      break;\n    case `${prepend}three`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.70)\";\n      break;\n    case `${prepend}four`:\n      box.style.left = \"calc((100% - 0px) * 0.45 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.55)\";\n      break;\n    case `${prepend}five`:\n      box.style.left = \"calc((100% - 0px) * 0.60 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.40)\";\n      break;\n    case `${prepend}six`:\n      box.style.left = \"calc((100% - 0px) * 0.75 + 0px)\";\n      box.style.width = \"calc((100% - 4px) * 0.25)\";\n      break;\n    case `${prepend}seven`:\n      box.style.left = \"calc((100% - 0px) * 0.10 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eight`:\n      box.style.left = \"calc((100% - 0px) * 0.25 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}nine`:\n      box.style.left = \"calc((100% - 0px) * 0.4 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}ten`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}eleven`:\n      box.style.left = \"calc((100% - 0px) * 0.70 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}twelve`:\n      box.style.left = \"calc((100% - 0px) * 0.85 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.15)\";\n      break;\n    case `${prepend}thirteen`:\n      box.style.left = \"calc((100% - 0px) * 0.05 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fourteen`:\n      box.style.left = \"calc((100% - 0px) * 0.30 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    case `${prepend}fifteen`:\n      box.style.left = \"calc((100% - 0px) * 0.55 + 0px)\";\n      box.style.width = \"calc((100% - 16px) * 0.25)\";\n      break;\n    default:\n      break;\n  }\n}\nfunction handleOverlap(col, view, boxes) {\n\n  const collisions = view === \"day\" ? boxes.checkForCollision() : boxes.checkForCollision(col);\n  // console.log(boxes)\n\n  const identifyBox = identifiers.boxnumarr[view];\n\n  const [baseClass, classPrepend] = [\n    identifiers.boxClasses[view],\n    identifiers.boxClasses[view].prepend,\n  ];\n\n  const [boxIdxAttr, boxIdAttr] = [\n    identifiers.boxAttributes[view].dataIdx,\n    identifiers.boxAttributes[view].dataId,\n  ];\n\n  for (let i = 0; i < collisions.length; i++) {\n    const box = document.querySelector(`[${boxIdAttr}=\"${collisions[i].id}\"]`);\n    let idx = i;\n    if (i >= 15) {\n      idx -= 12;\n    }\n    if (i === 0) {\n      box.setAttribute(\"class\", `${baseClass.base} ${identifyBox[idx]}`);\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\n    } else {\n      box.setAttribute(\"class\", `${baseClass.base} ${baseClass.ontop} ${identifyBox[idx]}`);\n      box.setAttribute(boxIdxAttr, identifyBox[idx]);\n    }\n    view === \"day\"\n      ? setBoxWidthDay(box, classPrepend, boxIdxAttr)\n      : setBoxWidthWeek(box, classPrepend, boxIdxAttr);\n  }\n}\n\nfunction setStylingForEvent(clause, wrapper, store) {\n  const sidebar = document.querySelector(\".sidebar\");\n  const resizeoverlay = document.querySelector(\".resize-overlay\");\n\n  switch (clause) {\n    case \"dragstart\":\n      if (!sidebar.classList.contains(\"hide-sidebar\")) {\n        if (wrapper.offsetLeft === 0) {\n          sidebar.classList.add(\"sidebar--dragged-over\");\n        }\n      }\n      store.addActiveOverlay(\"hide-resize-overlay\");\n      resizeoverlay.classList.remove(\"hide-resize-overlay\");\n      break;\n    case \"dragend\":\n      store.removeActiveOverlay(\"hide-resize-overlay\");\n      sidebar.classList.remove(\"sidebar--dragged-over\");\n      resizeoverlay.classList.add(\"hide-resize-overlay\");\n      document.body.style.cursor = \"default\";\n      break;\n    default:\n      break;\n  }\n}\n\nfunction updateBoxCoordinates(box, view, boxes) {\n  let [id, y, h] = identifiers.boxAttributes[view].updatecoord.map((x) => {\n    return box.getAttribute(x);\n  });\n  let x = view === \"week\" ? box.getAttribute(\"data-box-col\") : 1;\n  boxes.updateCoordinates(id, {\n    x: parseInt(x),\n    y: parseInt(y),\n    h: parseInt(h),\n    e: parseInt(y) + parseInt(h),\n  });\n}\n\nfunction setBoxTimeAttributes(box, view) {\n  let start = +box.style.top.split(\"px\")[0];\n  start = start >= 0 ? start / 12.5 : 0;\n  let length = +box.style.height.split(\"px\")[0] / 12.5;\n  let end = start + length;\n  let prepend = identifiers.boxAttributes[view].prepend;\n  box.setAttribute(`${prepend}start-time`, start);\n  box.setAttribute(`${prepend}time-intervals`, length);\n  box.setAttribute(`${prepend}end-time`, end);\n}\n\nfunction createBox(col, entry, view, color) {\n  const baseClass = identifiers.boxClasses[view].base;\n  const attrPrepend = identifiers.boxAttributes[view].prepend;\n  const attrPrependTwo = identifiers.boxAttributes[view].prependtwo;\n  const coord = entry.coordinates;\n\n  const box = document.createElement('div');\n  box.classList.add(baseClass);\n  box.style.backgroundColor = color;\n  box.style.top = `${+coord.y * 12.5}px`;\n  box.style.height = `${+coord.h * 12.5}px`;\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n  box.style.width = \"calc((100% - 4px) * 1)\";\n\n  const boxheader = document.createElement('div');\n  boxheader.classList.add(`${baseClass}__header`);\n  const entryTitle = document.createElement('div');\n  entryTitle.classList.add(`${baseClass}-title`);\n  entryTitle.textContent = entry.title;\n  boxheader.appendChild(entryTitle);\n\n  const boxcontent = document.createElement('div');\n  boxcontent.classList.add(`${baseClass}__content`);\n  const entryTime = document.createElement('span');\n  entryTime.classList.add(`${baseClass}-time`);\n  boxcontent.appendChild(entryTime);\n\n  const resizehandleS = document.createElement('div');\n  resizehandleS.classList.add(`${baseClass}-resize-s`);\n\n  if (col.getAttribute(`${attrPrependTwo}top`) === \"true\") {\n    box.setAttribute(`${attrPrependTwo}start`, coord.x);\n    box.setAttribute(`${attrPrependTwo}end`, coord.x2);\n  } else {\n    box.setAttribute(`${attrPrepend}start-time`, coord.y);\n    box.setAttribute(`${attrPrepend}time-intervals`, coord.h);\n    box.setAttribute(`${attrPrepend}end-time`, +coord.y + +coord.h);\n    if (view === \"week\") {\n      box.setAttribute(\"data-box-col\", coord.x);\n      box.setAttribute(\"box-idx\", 1);\n    } else {\n      box.setAttribute(\"data-dv-box-index\", 1);\n    }\n    entryTime.textContent = calcTime(coord.y, +coord.h);\n  }\n\n  box.setAttribute(`${attrPrepend}box-id`, entry.id);\n  box.setAttribute(`${attrPrepend}box-category`, entry.category);\n  box.append(boxheader, boxcontent, resizehandleS);\n  col.appendChild(box);\n}\n\nfunction createTemporaryBox(box, col, hasSibling, view) {\n  const clone = box.cloneNode(true);\n  clone.classList.add(`${identifiers.boxClasses[view].temporary}`);\n  if (hasSibling) {\n    col.insertBefore(clone, box.nextElementSibling);\n  } else {\n    col.appendChild(clone);\n  }\n}\n\n\n\n\nfunction getBoxDefaultStyle(y, backgroundColor) {\n  const style = identifiers.styles.newBox;\n  return `top:${y}px; left:${style.left}; height:${style.height}; width:${style.width}; background-color:${backgroundColor};`;\n}\n\nfunction resetStyleOnClick(view, box) {\n  box.setAttribute(\"class\", identifiers.boxClasses[view].base);\n  box.style.left = 'calc((100% - 0px) * 0 + 0px)';\n  box.style.width = \"calc((100% - 4px) * 1)\";\n}\n\nfunction createTempBoxHeader(view) {\n  const baseClass = identifiers.boxClasses[view].base;\n  const boxheader = document.createElement('div');\n  const boxtitle = document.createElement('div');\n  boxheader.classList.add(`${baseClass}__header`);\n  boxtitle.classList.add(`${baseClass}-title`);\n  boxtitle.textContent = \"(no title)\";\n  boxheader.appendChild(boxtitle);\n  return boxheader;\n}\n\nfunction startEndDefault(y) {\n  let tempstarthour = Math.floor((y / 12.5) / 4);\n  let tempstartmin = Math.floor((y / 12.5) % 4) * 15;\n  return [\n    tempstarthour,        // start hour\n    tempstartmin,         // start minute\n    tempstarthour,        // end hour\n    +tempstartmin + 15    // end minute\n  ];\n}\n\nfunction calcNewHourFromCoords(h, y) {\n  return Math.floor(((h + y) / 12.5) / 4);\n}\n\nfunction calcNewMinuteFromCoords(h, y) {\n  return Math.floor(((h + y) / 12.5) % 4) * 15;\n}\n\nfunction calcDateOnClick(date, start, length) {\n  let [startDate, endDate] = [new Date(date), new Date(date)];\n  startDate.setHours(Math.floor(+start / 4));\n  startDate.setMinutes((+start * 15) % 60);\n  endDate.setHours(Math.floor((start + length) / 4));\n  endDate.setMinutes(((start + length) * 15) % 60);\n  return [startDate, endDate];\n}\n\nfunction getOriginalBoxObject(box) {\n  return {\n    height: box.style.height,\n    left: box.style.left,\n    width: box.style.width,\n    class: box.getAttribute(\"class\"),\n  };\n}\n\nfunction resetOriginalBox(box, boxorig) {\n  box.setAttribute(\"class\", boxorig.class);\n  box.style.left = boxorig.left;\n  box.style.width = boxorig.width;\n}\n\nexport default handleOverlap;\nexport {\n  setStylingForEvent,\n  updateBoxCoordinates,\n  setBoxTimeAttributes,\n  createBox,\n  createTemporaryBox,\n  getBoxDefaultStyle,\n  resetStyleOnClick,\n  createTempBoxHeader,\n  startEndDefault,\n  calcNewHourFromCoords,\n  calcNewMinuteFromCoords,\n  calcDateOnClick,\n  getOriginalBoxObject,\n  resetOriginalBox\n};","/**\n * \n * @param {callback} func \n * @param {number} limit \n * @returns strict debounce \n */\nfunction debounce(func, limit) {\n  let timeoutId;\n  return function (...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(this, args), limit);\n  };\n}\n\nfunction getClosest(e, element) {\n  return e.target.closest(element);\n}\n\nfunction hextorgba(hex, alpha) {\n  let r = 0, g = 0, b = 0, a = alpha;\n  r = \"0x\" + hex[1] + hex[2];\n  g = \"0x\" + hex[3] + hex[4];\n  b = \"0x\" + hex[5] + hex[6];\n  return \"rgba(\" + +r + \",\" + +g + \",\" + +b + \",\" + a + \")\";\n}\n\nfunction generateId() {\n  return Date.now().toString(36) + Math.random().toString(36).substring(2);\n}\n\nconst throttle = (fn, wait) => {\n  let inThrottle, lastFn, lastTime;\n  return function () {\n    const context = this,\n      args = arguments;\n    if (!inThrottle) {\n      fn.apply(context, args);\n      lastTime = Date.now();\n      inThrottle = true;\n    } else {\n      clearTimeout(lastFn);\n      lastFn = setTimeout(function () {\n        if (Date.now() - lastTime >= wait) {\n          fn.apply(context, args);\n          lastTime = Date.now();\n        }\n      }, Math.max(wait - (Date.now() - lastTime), 0));\n    }\n  };\n};\n\n\nfunction setTheme(context) {\n  const appBody = document.querySelector(\".body\");\n  const colorSchemeMeta = document.getElementsByName(\"color-scheme\")[0];\n  const currentScheme = context.getColorScheme();\n  const hasLightMode = appBody.classList.contains(\"light-mode\");\n  const hasContrastMode = appBody.classList.contains(\"contrast-mode\");\n\n  const setColorSchema = () => {\n    if (currentScheme === \"light\" && hasLightMode && !hasContrastMode) {\n      return;\n    } else if (currentScheme === \"dark\" && !hasLightMode && !hasContrastMode) {\n      return;\n    } else if (currentScheme === \"contrast\" && hasContrastMode && !hasLightMode) {\n      return;\n    }\n\n    const setlight = () => {\n      context.setColorScheme(\"light\");\n      colorSchemeMeta.setAttribute(\"content\", \"light\");\n      appBody.classList.remove(\"contrast-mode\");\n      appBody.classList.add(\"light-mode\");\n    };\n\n    const setdark = () => {\n      context.setColorScheme(\"dark\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark light\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.remove(\"contrast-mode\");\n    };\n\n    const setcontrast = () => {\n      context.setColorScheme(\"contrast\");\n      colorSchemeMeta.setAttribute(\"content\", \"dark\");\n      appBody.classList.remove(\"light-mode\");\n      appBody.classList.add(\"contrast-mode\");\n    };\n\n    if (currentScheme === \"light\") {\n      setlight();\n      return;\n    }\n\n    if (currentScheme === \"contrast\") {\n      setcontrast();\n      return;\n    }\n\n    if (currentScheme === \"dark\") {\n      setdark();\n      return;\n    }\n  };\n  setColorSchema();\n}\n\n\n\nfunction placePopup(popupWidth, popupHeight, coords, windowCoords, center, targetWidth) {\n  const [popupW, popupH] = [popupWidth, popupHeight];\n  const [x, y] = coords;\n  const [winW, winH] = windowCoords;\n\n  let popupX;\n  if (center) {\n    popupX = x - (popupW / 2) + (targetWidth / 2);\n    if (popupWidth + x + 4 >= winW) {\n      popupX = winW - popupW - 4;\n    }\n  } else {\n    popupX = x + popupW > winW ? x - popupW - 6 : x;\n  }\n\n  let popupY = y + popupH > winH ? winH - popupH - 6 : y;\n\n  if (popupX < 0) popupX = Math.abs(popupX);\n  if (popupY < 0) popupY = 56;\n  return [popupX, popupY];\n}\n\nfunction isNumeric(n) {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n\nexport default debounce;\nexport {\n  getClosest,\n  hextorgba,\n  generateId,\n  throttle,\n  setTheme,\n  placePopup,\n  isNumeric\n}; ","let n = 40;\nexport default n;\n\nconst createStatusIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  icon.classList.add(\"lvhi-status--icon\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm-2 14l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCategoryIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\");\n  icon.classList.add(\"lvhi-category--icon\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createEditIcon = () => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  icon.setAttribute(\"fill\", \"var(--white3)\");\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M10 16q-.625 0-1.062-.438Q8.5 15.125 8.5 14.5t.438-1.062Q9.375 13 10 13t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 16 10 16Zm0-4.5q-.625 0-1.062-.438Q8.5 10.625 8.5 10t.438-1.062Q9.375 8.5 10 8.5t1.062.438q.438.437.438 1.062t-.438 1.062q-.437.438-1.062.438ZM10 7q-.625 0-1.062-.438Q8.5 6.125 8.5 5.5t.438-1.062Q9.375 4 10 4t1.062.438q.438.437.438 1.062t-.438 1.062Q10.625 7 10 7Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createPencilIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L3 16.82V21h4.18L20.41 7.77c.79-.78.79-2.05 0-2.83zm-14 14.12L5 19v-1.36l9.82-9.82 1.41 1.41-9.82 9.83z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createTrashIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M15 4V3H9v1H4v2h1v13c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6h1V4h-5zm2 15H7V6h10v13z\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M9 8h2v9H9zm4 0h2v9h-2z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCloseIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M6.062 15 5 13.938 8.938 10 5 6.062 6.062 5 10 8.938 13.938 5 15 6.062 11.062 10 15 13.938 13.938 15 10 11.062Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createCaretDownIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18\");\n  icon.setAttribute(\"width\", \"18\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M7 10l5 5 5-5z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCaretUpIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18\");\n  icon.setAttribute(\"width\", \"18\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0V0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M7 14l5-5 5 5H7z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCaretRightIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"20\");\n  icon.setAttribute(\"width\", \"20\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"m6 18.167-1.583-1.584L11 10 4.417 3.417 6 1.833 14.167 10Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createCheckIcon = (fill) => {\n  // <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"/></svg>\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18px\");\n  icon.setAttribute(\"width\", \"18px\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white2)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nconst createCheckBoxIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white2)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"m10.6 16.2 7.05-7.05-1.4-1.4-5.65 5.65-2.85-2.85-1.4 1.4ZM5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14ZM5 5v14V5Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createMeatballVertIcon = (fill) => {\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"24\");\n  icon.setAttribute(\"width\", \"24\");\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white4)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z\");\n  icon.appendChild(pathone);\n  return icon;\n};\n\nconst createExpandDownIcon = (fill) => {\n  {/* <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"18px\" viewBox=\"0 0 24 24\" width=\"18px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/></svg> */ }\n  const icon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  icon.setAttribute(\"height\", \"18px\");\n  icon.setAttribute(\"width\", \"18px\");\n  icon.setAttribute(\"viewBox\", \"0 0 24 24\");\n  // icon.setAttribute(\"fill\", \"\")\n  if (!fill) {\n    icon.setAttribute(\"fill\", \"var(--white3)\");\n  } else {\n    icon.setAttribute(\"fill\", fill);\n  }\n  const pathone = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathone.setAttribute(\"d\", \"M0 0h24v24H0z\");\n  pathone.setAttribute(\"fill\", \"none\");\n  const pathtwo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  pathtwo.setAttribute(\"d\", \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\");\n  icon.append(pathone, pathtwo);\n  return icon;\n};\n\nexport {\n  createStatusIcon,\n  createCategoryIcon,\n  createEditIcon,\n  createPencilIcon,\n  createTrashIcon,\n  createCloseIcon,\n  createCaretDownIcon,\n  createCaretUpIcon,\n  createCaretRightIcon,\n  createCheckIcon,\n  createCheckBoxIcon,\n  createMeatballVertIcon,\n  createExpandDownIcon\n};\n","function formatTime(hours, minutes) {\n  let md;\n  if (minutes === 60) {\n    minutes = 0;\n    hours += 1;\n  }\n  if (+hours === 0) {\n    hours = 12;\n    md = \"am\";\n  } else if (hours < 12) {\n    md = \"am\";\n  } else if (hours === 12) {\n    md = \"pm\";\n  } else if (hours === 24) {\n    md = \"am\";\n    hours -= 12;\n  } else {\n    hours -= 12;\n    md = \"pm\";\n  }\n\n  if (+minutes === 0) {\n    return `${hours}${md}`;\n  } else {\n    return `${hours}:${minutes}${md}`;\n  }\n}\n\nfunction formatStartEndTimes(hours, minutes) {\n  let [startHours, endHours] = hours;\n  let [startMinutes, endMinutes] = minutes;\n\n  let [start, end] = [\n    formatTime(startHours, startMinutes),\n    formatTime(endHours, endMinutes),\n  ];\n\n  if (start.slice(-2) === end.slice(-2)) {\n    start = start.slice(0, -2);\n  }\n\n  return `${start} – ${end}`;\n}\n\nfunction configMinutesForStore(minutes) {\n  return minutes === 0 ? \"00\" : minutes;\n}\n\nfunction calcTime(start, length) {\n  let startHours = Math.floor(+start / 4);\n  let startMinutes = (+start * 15) % 60;\n\n  let endHours = Math.floor((start + length) / 4);\n  let endMinutes = ((start + length) * 15) % 60;\n\n  let startingtime = formatTime(startHours, startMinutes);\n  let endingtime = formatTime(endHours, endMinutes);\n\n  if (startingtime.slice(-2) == endingtime.slice(-2)) {\n    startingtime = startingtime.slice(0, -2);\n  }\n\n  const boxtime = `${startingtime} – ${endingtime}`;\n  return boxtime;\n}\n\nfunction compareTimes(time1, time2) {\n  let [hours1, minutes1] = time1.split(\":\");\n  let [hours2, minutes2] = time2.split(\":\");\n  // get time difference in minutes\n  let diff = (hours2 - hours1) * 60 + (minutes2 - minutes1);\n  let closest;\n\n  // if diff is negative, return the next closest time difference in 15 minute interval\n  if (diff < 0) {\n    closest = 15 * Math.ceil(diff / 15);\n  } else {\n    closest = true;\n  }\n\n  return [diff, closest];\n}\n\n\nexport default calcTime;\nexport {\n  configMinutesForStore,\n  formatStartEndTimes,\n  formatTime,\n  compareTimes\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import context, { datepickerContext } from \"./context/appContext\";\nimport store from \"./context/store\";\nimport setAppDefaults from \"./config/appDefaults\";\nimport renderViews from \"./config/renderViews\";\n\n/*!*************************************!*\\\n// (CSS) \n/*!*************************************!*/\n\n// <html>\nimport \"./styles/root.css\";\n// </html>\n\n// <header>\nimport \"./styles/header.css\";\n// </header>\n\n// <main>\nimport \"./styles/containers.css\";\nimport \"./styles/yearview.css\";\nimport \"./styles/monthview.css\";\nimport \"./styles/weekview.css\";\nimport \"./styles/dayview.css\";\nimport \"./styles/listview.css\";\nimport \"./styles/sidebar.css\";\nimport \"./styles/sbdatepicker.css\";\n// </main>\n\n// <aside>\nimport \"./styles/aside/datepicker.css\";\nimport \"./styles/aside/toast.css\";\nimport \"./styles/aside/goto.css\";\nimport \"./styles/aside/toggleForm.css\";\nimport \"./styles/aside/sidebarSubMenu.css\";\nimport \"./styles/aside/changeViewModule.css\";\nimport \"./styles/aside/editCategoryForm.css\";\nimport \"./styles/aside/form.css\";\nimport \"./styles/aside/timepicker.css\";\nimport \"./styles/aside/deleteCategoryPopup.css\";\nimport \"./styles/aside/entryOptions.css\";\nimport \"./styles/aside/info.css\";\nimport \"./styles/aside/shortcuts.css\";\n// </aside>\n\n/*!*************************************!*/\nsetAppDefaults(context, store);\nrenderViews(context, datepickerContext, store);"],"names":["sidebar","document","querySelector","datepicker","datepickeroverlay","formOverlay","formModalOverlay","entriesFormWrapper","entriesFormHeader","entriesForm","entriesFormBody","titleInput","descriptionInput","startDateInput","endDateInput","startTimeInput","endTimeInput","categoryModal","closeCategoryModalBtn","categoryModalIcon","categoryModalWrapper","selectedCategoryWrapper","selectedCategoryColor","selectedCategoryTitle","formSubmitButton","setEntryForm","context","store","datepickerContext","categories","activeCategories","currentComponent","year","month","day","closetimepicker","timep","timepoverlay","timepcontainer","activeTimeElement","scrollTo","remove","onclick","classList","setEndDateToNextDay","startCurrentDate","getAttribute","split","map","x","parseInt","nextDay","Date","nextDayString","getFullYear","getMonth","getDate","nextDayTitle","labels","monthsShort","setAttribute","textContent","createTimepicker","coords","currentTime","end","endLimit","timepicker","createElement","add","style","top","y","left","timepickerOverlay","timepickerTimesContainer","hours","md","minutes","currenthour","currentmin","currentmd","isSameDay","shouldTestReset","h","m","slice","length","si","count","setnewtime","e","time","target","attr","testhour","testminute","endTestHour","endTestMinute","startCurrentTime","newh","newm","nextHour","getHours","nextHourString","getMinutes","nextHourTitle","setEndDateToNextHour","forEach","hour","houridx","min","timepickerTime","appendChild","body","prepend","getClosest","handleSetDate","type","preventDefault","d","getDateFromAttribute","rect","getBoundingClientRect","datepickerLeft","bott","bottom","datepickerTop","window","innerHeight","addActiveOverlay","setDate","setDateSelected","getDatePicker","getDateFormatViaAttr","dateAttr","getTimeFormatViaAttr","timeAttr","getDateTimeFormatted","setHours","setMinutes","setSeconds","removeErrorMessages","contains","removeAttribute","firstElementChild","focus","removeLastFormEntry","removeLastEntry","clearAllErrors","inputErrElements","querySelectorAll","el","handleFormClose","onmousedown","removeEventListener","delegateFormKeyDown","removeActiveOverlay","reset","value","closeCategoryModal","resetCurrentView","getFormResetHandle","setFormResetHandle","handleSubmissionRender","start","id","entryBefore","getDayEntriesArray","setTimeout","compareEntries","getEntry","handleUndoLastEdit","updateEntry","category","completed","description","title","undoLastFormEdit","handleFormSubmission","startDate","endDate","startTimeAttr","starthour","startminute","endTimeAttr","endhour","endminute","configDatesForStore","validityStatus","status","valid","titlecheck","trim","replace","hasCtg","isDate","isBeforeDate","hasErrors","errors","key","checkFormValidity","JSON","parse","stringify","createEntry","getLastEntryId","errorMessages","blur","components","err","parentElement","svg","fill","handleFormErrors","display","innerText","openCategoryModal","scrollHeight","behavior","height","parent","currentCategory","color","categoryWrapper","width","backgroundColor","categoryDisplayColor","categoryTitle","checkIcon","createCheckIcon","checkIconWrapper","append","createCategoryOptions","handleTimepickerSetup","placePopup","innerWidth","delegateEntryHeader","dragHeader","closeicon","closeBtn","currleft","currtop","margin","opacity","userSelect","right","pointerEvents","leftBefore","topBefore","clientX","clientY","winH","winW","throttlemove","throttle","leftAfter","topAfter","offsetTop","offsetLeft","offsetWidth","offsetHeight","addEventListener","mouseup","dragFormAnywhere","delegateEntryFormEvents","startdate","starttime","enddate","endtime","getCategoryModal","getcloseCategoryModalBtn","getCategoryModalOverlay","inputError","customInputError","resetbtn","submitbtn","childElementCount","handleCategorySelection","setFormInitialValues","catsAct","Object","entries","getAllCtg","getActiveCategoriesKeyPair","getComponent","getYear","getDay","categoryColor","setInitialFormCategory","dateSelected","getMonthName","getDateForStore","temphours","getTimeAndMd","constructor","this","monthNames","headerOffset","form","formBody","formTitleDescription","formStartEndCtg","formsubmitbtn","formCategoryWrapper","formCategorySelect","formCategoryWrapperIcon","formCategoryTitle","formCatgoryIcon","setFormStyle","eX","eY","shouldCenter","centerOffset","setFormSubmitType","configFormTitleDescriptionInput","input","idx","setFormDateInput","date","dateFormatted","dateinput","timeinput","lastElementChild","timeformatted","setFormDatepickerDate","configFormDateInputs","dates","i","dateObj","formatted","configFormCategoryInput","categoryData","firstChild","getConfig","data","submission","name","object","monthsArray","monthsShortLower","monthsArrayLong","monthsLongLower","gotoOverlay","goto","gotoInput","inputErrMessage","cancelGoto","submitGoto","createGoTo","removeError","handleGoTo","newdate","arr","haserr","includes","dateInt","tempMonth","isNaN","indexOf","toLowerCase","toString","validateDate","getSidebarState","component","closeGoTo","closeGoToOnEscape","formatStart","FormSetup","setSubmission","setCategory","setDates","getSetup","datepickerBody","datepickerTitle","datepickerChangeDate","headerPrevBtn","headerNextBtn","yearpickerTitle","monthpickerMonths","setDatepicker","hasweek","montharray","getMonthArray","testDateSelected","getDateSelected","checkmonth","checkyear","datepickerKeypressThrottle","flag","yearpickerSetYear","renderPrevMonth","renderNextMonth","handleMonthpicker","curr","next","nextElementSibling","newDateSelected","setSelectedToNextDay","prev","previousElementSibling","lastday","getDaysInMonth","last","setSelectedToPrevDay","closeChangeDateModal","setNewDate","closeDatepicker","setDatepickerHeader","createCells","groupedEntries","getMonthEntryDates","currentWeekStart","getWeek","cell","datename","compareDates","isToday","formattedDate","temp","datepickerDate","activeFormDate","inactiveFormDate","inactiveValue","inactiveDate","inactiveDateType","handleFormDate","renderpicker","setNextMonth","setPrevMonth","monthpickerSetMonth","val","init","newmonth","setMonth","increment","newyear","setYear","dir","openChangeDateModal","formOpen","getActiveOverlay","has","delegateDatepickerEvents","datenumber","navnext","navprev","closeChangeDateBtn","ypNext","ypPrev","mpMonth","setResetDatepickerCallback","colors","values","CatFormHelper","catname","catcolor","errMsg","prevColorIdx","originalName","originalColor","setName","setColor","setPrevColor","getName","getColor","prevColor","setErrMsg","msg","getErrMsg","getOriginalName","getOriginalColor","ctgform","ctgformoverlay","ctgformInput","colorPickerTitle","colorPickerOptions","ctgErrMsg","createCategoryForm","selectedCategory","editing","resetParent","formhelper","createColorOption","selected","colorOption","validateNewCategory","categoryName","trimName","isNumeric","origName","errormsg","closeCategoryForm","updateCtg","updateCtgColor","addNewCtg","fullrenderCtg","getRenderCategoriesCallback","closeCategoryFormOnEsc","gc","element","closest","delegateCtgForm","cancelctgBtn","submitctgBtn","current","option","background","handleColorSelection","currentColor","getright","gettop","placeholder","openCtgForm","entryOptionsOverlay","entryOptionsWrapper","entryOptionsHeaderWrapper","entryOptionsDateHeader","entryOptionsTimeHeader","entryOptionTitle","entryOptionDescription","entryOptionCategoryIcon","entryOptionCategory","getEntryOptionModal","entry","finishSetup","openEditForm","getRenderFormCallback","openForm","closeEntryOptions","openDeleteWarning","deletepopup","deletebtns","deletepopupCancel","deletepopupConfirm","deletepopupText","removeDeletePopup","deleteEntry","proceedDelete","formNegated","handleEntryOptionKD","delegateEntryOptions","editBtn","deleteBtn","istoday","getDateTime","formatEntryOptionsDate","undefined","timeheadertitle","secondsDiff","getTime","daysSince","Math","floor","hourSince","minSince","getCtgColor","setEntryDefaults","setHeader","weekdaysLong","monthsLong","dateTimeTitle","header","selectElement","btnprev","btnnext","datetimeWrapper","datetimeContent","prevnext","configHeader","borderstyle","componentTitle","borderBottom","paddingRight","setHeaderAttributes","view","toUpperCase","getWeekRange","shortcutsModalOverlay","shortcutsModal","shortcutsModalContent","shortcutsModalClose","notifyShortcutsStatus","handleShortCutsModal","createShortcut","shortcut","shortcutKey","keyone","Array","isArray","or","keytwo","shortcutDescription","descriptionOne","descriptionTwo","handleShortcutsModalClose","closeShortcutsOnKeydown","inp","setStatusIcon","getShortcutsStatus","shortcuts","getShortcuts","action","setShortcutsStatus","handleShortcutsModalOpen","sidebarColTwo","cWrapper","categoriesContainer","categoriesHeader","categoryHeaderCaret","handleSidebarCategories","defaultCtg","getDefaultCtg","updateComponent","renderSidebarDatepickerCtg","renderCategories","ctg","keys","ctgname","active","createCategoryListItem","ctgcolor","row","colone","checkboxWrapper","checkbox","border","label","coltwo","deleteicon","editicon","createCloseIcon","createEditIcon","delegateCategoryEvents","ctgtoggleModal","editctgBtn","deletectgBtn","ctgChck","ctgPlus","toggle","targetcat","targetparent","targetCtg","targetElement","popupBox","popupBoxOverlay","optionEdit","optionTurnOff","optionTurnOn","closeCategoryOptionsMenu","chckbox","handleCloseOnEscapeCtgOptionsMenu","rerender","closeAndRemoveStyle","setAllCategoryStatusExcept","openCategoryOptionsMenu","offsetColor","categoryLength","getCtgLength","noEntries","ord","popupHeader","popupTitle","popupCategoryStats","popupBody","optionsWrapperOne","categoryNames","getAllCtgNames","optionMoveRadio","optionMove","optionMoveTitle","optionMoveSelect","optionsWrapperTwo","optionRemoveRadio","optionRemove","optionRemoveTitle","optionRemoveIcon","createTrashIcon","handleWrapperClick","checked","popupFooter","btncancel","btnproceed","closeDeletePopupOnEscape","closeDeletePopup","deleteCategory","selectedOption","moveCategoryEntriesToNewCategory","removeCategoryAndEntries","createDeleteCategoryPopup","children","cat","setCategoryStatus","setRenderCategoriesCallback","initSidebarCategories","sbdatepicker","sbdatepickerBody","sbdatepickerTitle","sbdatepickerChangeDate","sbyearpickerTitle","sbmonthpickerMonths","setSidebarDatepicker","resetpickerData","renderSelectedDay","sidebarFooter","sbInfoPopup","sbInfoPopupOverlay","selectInfo","closePopupButton","infopopupTitle","infopopupBody","handleSidebarFooter","infoContent","notes","content","privacy","terms","closeInfoPopup","closeInfoPopupOnEscape","setInfoContent","selection","handleSelectInfoChange","openInfoPopup","selectedIndex","onchange","projectNotes","sidebarSubMenuOverlay","sidebarSubMenu","closemenu","appBody","themeRadioBtns","themeRadioOptions","shortcutSwitch","animationsSwitchBtn","notifyDisabledShortcutsIcon","getSidebarSubMenu","closeSubOnEscape","popup","closeSubMenu","getJSONUpload","file","accept","files","reader","FileReader","onload","json","result","setUserUpload","readAsText","click","removeChild","removePopup","handleCalendarJSON","totalEntries","totalCategories","getStoreStats","titleEntries","hasEntries","hasCategories","subtitle","subtitle2","subtitle3","btns","cancelBtn","proceedBtn","console","log","createUploadConfirmationPopup","localStorage","filename","createTimestamp","blob","Blob","href","URL","createObjectURL","link","download","revokeObjectURL","getJSONDownload","toggleShortcuts","toggleShortcutsIcon","setAnimationsIcons","parenticonwrapper","icons","on","off","toggleAnimations","fromicon","setAnimationStatus","delegateSubMenuEvents","downloadjsonBtn","uploadjsonBtn","themebtn","kbShortcutMenu","shortcutSwitchNotifyIcon","animationsSwitch","animationsIcon","getCloseSubMenuBtn","targetinput","getColorScheme","setColorScheme","setTheme","handleThemeChange","themeIdx","shortcutStatus","animationStatus","getAnimationStatus","openSubMenu","toast","createToast","message","undoCallback","closetoast","onkeydown","toastMessage","closeIconWrapper","undoToastWrapper","undoToastMessage","getundo","getclose","dvHeaderDayNumber","dvHeaderDayOfWeek","dvHeaderInfo","dvOnTop","dvContainer","dvGrid","dvMainGrid","dvSideGridWrapper","setDayView","boxes","firstY","firstLastDates","bxs","longest","shortest","tempshort","templong","coordinates","h1","h2","m1","m2","tempdate1","tempdate2","formatStartEndTime","gmtOffset","getTimezoneOffset","abs","getGmt","weekdaysShort","getWeekday","allboxes","getAllBoxes","tempEndCase1","endingToday","startingToday","fulltitle","getDayviewHeaderEntryCount","resetDayview","openDvMore","entr","morepopupoverlay","morepopup","morepopupHeader","morepopupTitle","morepopupClose","morepopupBody","morepopupEntry","morepopupEntryTitle","morepopupCategory","morepopupEntryTime","createMorePopupEntry","closemp","closeMpOnEsc","openStackEntryOnTop","closearg","setup","getFormDateObject","modal","createDvTop","moremessage","dvOnTopGrid","ent","dvOnTopEntry","createStackableEntriesOnTop","handleDayviewClose","createBoxOnDragDay","setStylingForEvent","cursor","tempcategory","getFirstActiveCategoryKeyPair","box","boxheader","createTempBoxHeader","boxcontent","boxtime","boxtimeend","scrolled","scrollTop","startCursorY","pageY","round","getBoxDefaultStyle","startmin","endmin","startEndDefault","movedY","mousemove","movementY","newHeight","calcNewHourFromCoords","calcNewMinuteFromCoords","wordBreak","formatTime","datesData","getTempDates","submitType","openDayviewForm","renderBoxesForGrid","getBoxesTop","getBoxes","createBox","delegateDayView","dvhresizehandle","dvhbox","dvhgrid","dvhboxTop","dvhGrouped","col","boxhasOnTop","boxorig","getOriginalBoxObject","resetStyleOnClick","boxTop","createTemporaryBox","amountScrolled","resetOriginalBox","setBoxTimeAttributes","nextSibling","updateBoxCoordinates","updateStore","resizeBoxNSDay","startTop","boxHeight","toFixed","tempX","tempY","pageX","sX","sY","hasStyles","currentCursorY","newOffsetY","newTop","tempbox","setResetDv","dragEngineDay","dvSideGridCell","createDVSideGridCells","getDayEntries","Day","allDay","setResetPreviousViewCallback","settop","handleScrollToOnInit","listview","listviewBody","setListView","weekDayNames","todayYear","todayMonth","todayDay","getdatearray","createRowGroupHeader","weekname","monthname","rgHeader","rgHeaderDateNumber","rgHeaderDate","createRowGroupCell","datetitle","longerThanDay","tempyear","formatStartEndTimes","rgCell","rgCellColor","rgCellTime","rgCellTitle","resetCellActive","activeCell","delegateListview","headerNum","setComponent","setDayViewLV","hextorgba","rectTop","rectLeft","getRgContextMenu","resetListview","activeEnt","getActiveEntries","sortBy","reduce","acc","datestring","push","earliestDate","formatStartEndDate","tempdate","dow","wn","mn","rgheader","sort","a","b","rgContent","rg","createRowGroups","initListView","resizeoverlay","monthWrapper","setMonthView","boxquery","renderSidebarDatepickerMonth","handleOverlay","setDayViewViaMonth","getHeight","boxtitle","createCell","cellDate","cellCoordinates","dayofmonth","cellContent","daynumberAndMonth","daynumber","createCellHeader","toptotal","filter","groupedBxs","groupedDiv","groupedTitle","createGroupedCell","getTop","resetMonthview","populateCells","monthentries","getMonthEntries","getGroupedMonthEntries","dayEntries","dayHasEntry","getDateFormatted","getCoordinatesFromCell","configureForStorage","newCell","clone","tempEntry","diff","getDurationSeconds","endDay","configClonedBoxForDrop","resetCellOnDrop","transition","dragEngineMonth","startDragTime","now","targetModal","originalCellLength","cellX","cellY","cloneNode","cellRect","cellWidth","parseFloat","cellHeight","wrapperLeft","boxRect","boxWidth","hasFiveWeeks","startcursorx","startcursory","movedX","lastX","lastY","gaveStyles","changeCursor","newX","multX","newY","multY","timeDiff","newCellX","newCellY","newCellContent","boxmoved","handleMonthviewEditFormClose","openFormOnClickMV","groupedCell","configGroupedCellOnDrop","insertBefore","newGroupedCell","createGroupedCellOnDrop","closeMoreModalOnEscape","closeMoreModal","mm","createMoreModal","moreModalEntries","getMoreModalEntries","modalHeight","rectWidth","maxH","modalHeader","modalHeaderTitle","parentDate","createDateFromFormattedString","dowspan","daynspan","modalHeaderClose","modalContent","modalEntry","modalEntryTitle","createMoreModalBox","renderDayViewViaModal","once","tempcell","handleMonthviewFormClose","createEntryOnEmptyTarget","cellWrapper","generateTempStartEnd","tempctg","getActiveCategories","tempdefaultctg","tempcurrentctg","tempBox","configNewBoxInsertion","delegateMonthEvents","monthviewBox","monthviewBoxHeader","groupedBox","groupedBoxItem","closeGroupedBox","stopPropagation","openDayView","targetCellIdx","targetCell","cloned","lastChild","moreModal","newLength","dragOutOfModal","delegateNewBox","main","container","weekviewHeader","weekviewHeaderDayNumber","weekviewGrid","weekviewSideGrid","topCols","cols","setWeekView","weekArray","getWeekArray","getWeekEntries","Week","resetWeekviewBoxes","createBoxesTop","len","taskicons","icon","celltitle","cellexpand","createExpandDownIcon","createAllDayModal","dayofweek","entriesoffset","modalheader","modaltitle","getDayOrdinal","closeAlldayModalBtn","modalcontent","closealldayonEsc","closealldaymodal","handleCloseCallback","cellcontent","cellIcons","cellendDate","cellcategoryTitle","createMeatballVertIcon","createAllDayModalCell","getCloseAdBtn","getMeatballBtn","targetrect","getWeekViewContextMenu","getcol","handleWeekviewFormClose","dragEngineWeek","originalColumn","currentColumn","tempstartY","startCursorX","direction","currentCursorX","leftColX","rightColX","newOffsetX","setResetWv","droppedCol","getBoxesByColumn","createBoxOnDrag","colIdx","openWeekviewForm","delegateGridEvents","getBoxResizeHandle","getBox","getWeekCol","getAllDayCol","class","resizeBoxNS","colidx","colentries","getBoxesByColumnTop","openAllDayModal","renderDataForGrid","boxt","getBoxesTopLengths","k","renderBoxes","getColumnsWithMultipleBoxes","delegateWvHeader","yr","mo","da","wvSideGridCell","createWVSideGridCells","hasToday","hasSelected","dayNumbers","ymd","today","getToday","ty","tm","td","num","configureDaysOfWeek","yearviewGrid","setYearView","createMonthCell","prevmonth","daysInPrevMonth","currentMonth","daysInMonth","firstDayOfMonth","cellHeader","cellHeaderRowOne","cellHeaderWeekDayNames","weekdaysNarrow","weekday","cellBody","createyvcell","classname","daywrapper","populateMonths","handleDaySelection","tempy","tempm","tempd","delegateYearEvents","resetYearview","getGroupedYearEntries","getYearEntries","renderMonthCells","currentmonth","initYearview","setAppDefaults","colorSchemeMeta","getElementsByName","toggleForm","sbToggleForm","sbToggleSubBtn","dateTimeWrapper","dateTimeBtn","sbDatepicker","sbDatepickerBody","sbCategoriesWrapper","selectOverlay","optionswrapper","options","sbFooter","sbCategories","viewsContainer","yearwrapper","monthwrapper","collapsebtn","renderViews","currentScheme","fullRender","renderSidebarDatepicker","getPreviousDay","setPrevDay","getNextDay","setNextDay","getPreviousWeek","setPrevWeek","getNextWeek","setNextWeek","getPreviousMonth","getNextMonth","getPreviousYear","setPrevYear","getNextYear","setNextYear","handleTransition","keyframeDirection","callback","removeslide","overflowX","slide","handleForm","handleToggleSubmenu","handleBtnMainMenu","marginLeft","resetdatepicker","getResetDatepickerCallback","handleBtnToday","handleBtnPrev","handleBtnNext","closeOptionsModal","renderOption","initialRender","comp","handleCollapse","activeIndex","setOptionStyle","activeElement","handleSelect","getKeyPressThrottled","toggleSidebarState","toggleChangeview","handleHeaderDelegation","btnMainMenu","btnToday","btnPrev","btnNext","dateTime","search","settings","select","newDatepickerLeft","perc","handleDatePickerBtn","lk","lk2","handleGlobalKeydown","hasActiveOverlay","headers","collapse","componentBody","componentBodytoggle","eyeIcons","setRenderFormCallback","setRenderSidebarCallback","setSidebarState","appinit","yearComponent","monthComponent","weekComponent","dayComponent","listComponent","prev1","prev2","setViews","views","resetPrevView","getResetPreviousViewCallback","hideViews","initView","Context","colorScheme","sidebarState","gmt","daySelected","monthSelected","yearSelected","monthArray","week","setDateDefaults","getItem","setLocalYear","setLocalMonth","setLocalDay","setLocalDateSelected","setSchemaDefaults","setLocalColorScheme","setLocalComponent","setLocalSidebarState","setDefaults","getLocalDay","getLocalMonth","getLocalYear","getLocalDateSelected","getLocalComponent","getLocalColorScheme","getLocalSidebarState","setItem","state","getAllMethodNames","getOwnPropertyNames","getPrototypeOf","method","setDay","prevDay","prevWeek","prevMonth","nextWeek","nextMonth","d1","d2","getWeekNumber","UTC","setUTCDate","getUTCDate","getUTCDay","yearStart","getUTCFullYear","ceil","getMonthArrayStartDay","getMonthArrayStart","monthArrayStart","getMonthArrayEndDay","getMonthArrayEnd","handleFourWeeks","monthArrayEnd","testDate","DatepickerContext","setLocalPickerYear","setLocalPickerMonth","setLocalPickerDay","setLocalPickerDateSelected","getLocalPickerDay","getLocalPickerMonth","getLocalPickerYear","getLocalPickerDateSelected","Store","userUpload","default","blue","activeOverlay","Set","handleRenders","reconfig","calendars","previous","resize","render","list","keyboardShortcuts","keyboardShortcutsStatus","setStoreForTesting","setStore","getStore","getActiveStore","getCtg","setActiveStore","activeStore","setCtg","addEntry","args","find","getEntries","getEntriesByCtg","pop","entry1","entry2","assign","searchBy","searchtype","localeCompare","getFirstAndLastEntry","sorted","generateCoordinates","startMin","total","x2","activeEntries","entryDate","targetDate","montharr","grouped","yearentries","getFirstActiveCategory","backup","getAllCtgColors","getCategoryStatus","hasOwnProperty","hasctg","newCategory","newName","getCtgIndex","newColor","oldName","hasColor","n","isFinite","fromEntries","error","setShortCut","overlay","size","o","validateUserUpload","err1","validation","validated","clear","location","reload","getUserUpload","setFormRenderHandle","setResizeHandle","setDataReconfigCallback","getDataReconfigCallback","getResizeHandle","getFormRenderHandle","getRenderSidebarCallback","Entry","generateId","CoordinateEntry","allDayEntries","boxesTop","setAllBoxes","tempEntries","addBox","addBoxTop","getLength","getBoxesTopByDay","c","columns","getEntriesByTitle","updateCoordinates","sortByY","checkForCollision","overlaps","j","e1","e2","boxstart","boxend","starthours","startminutes","endhours","endminutes","getEntriesEndingOnDay","boxEntry","tops","heights","updateFlag","getFlag","getPrevTop","red","orange","green","purple","grey","createDate","pad","prototype","toCustomISO","getSeconds","getMilliseconds","formatDateForDisplay","hm","date1","date2","formatDuration","seconds","res","join","startday","startmonth","startyear","endday","endmonth","endyear","tempstartyear","tempendyear","getDuration","duration","dateString","dateArray","attribute","getTimeFromAttribute","minute","setmin","sortDates","y1","y2","min1","min2","useTempDate","tempdateone","durationTime","formatDurationHourMin","identifiers","boxnumarr","boxClasses","base","ontop","temporary","boxAttributes","updatecoord","dataIdx","dataId","dataCol","prepentwo","styles","newBox","setBoxWidthWeek","dataidx","setBoxWidthDay","clause","wrapper","baseClass","attrPrepend","attrPrependTwo","prependtwo","coord","entryTitle","entryTime","resizehandleS","hasSibling","tempstarthour","tempstartmin","calcDateOnClick","collisions","identifyBox","classPrepend","boxIdxAttr","boxIdAttr","hex","alpha","r","g","random","substring","fn","wait","inThrottle","lastFn","lastTime","arguments","clearTimeout","apply","max","hasLightMode","hasContrastMode","setColorSchema","popupWidth","popupHeight","windowCoords","center","targetWidth","popupW","popupH","popupX","popupY","func","limit","timeoutId","createStatusIcon","createElementNS","pathone","pathtwo","createCategoryIcon","createPencilIcon","createCaretDownIcon","createCaretUpIcon","createCaretRightIcon","createCheckBoxIcon","startHours","endHours","startMinutes","endMinutes","configMinutesForStore","compareTimes","time1","time2","hours1","minutes1","hours2","minutes2","startingtime","endingtime","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition","defineProperty","enumerable","get","obj","prop","call","Symbol","toStringTag"],"sourceRoot":""}